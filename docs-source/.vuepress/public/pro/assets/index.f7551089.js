
/**
 * 由 One-step-admin 提供技术支持
 * https://hooray.gitee.io/one-step-admin/
 * Powered by One-step-admin
 * https://hooray.github.io/one-step-admin/
 */
    
import{_ as e}from"./index.b3d8ab5d.js";import{_ as a}from"./index.c51a8d86.js";import{d as l,a as s,r,c as o,b as d,w as u,k as t,l as p,m as n,n as m,y as i,A as w}from"./index.93ad63e3.js";const c=i("提交"),f=l({name:"PersonalEditPassword"}),g=Object.assign(f,{setup(l){const i=t(),f=p(),{proxy:g}=w(),h=s(),b=r({password:"",newpassword:"",checkpassword:""}),v=r({password:[{required:!0,message:"请输入原密码",trigger:"blur"}],newpassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}],checkpassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{validator:(e,a,l)=>{a!==b.value.newpassword?l(new Error("请确认新密码")):l()}}]});function _(){g.$refs.formRef.validate((e=>{e&&h.editPassword(b.value).then((()=>{g.$message({type:"success",message:"模拟修改成功，请重新登录"}),h.logout().then((()=>{f.push({name:"login",query:{redirect:i.fullPath}})}))})).catch((()=>{}))}))}return(l,s)=>{const r=a,t=n("el-input"),p=n("el-form-item"),i=n("el-form"),w=n("el-col"),f=n("el-row"),g=n("el-button"),h=e;return m(),o("div",null,[d(h,null,{action:u((()=>[d(g,{type:"primary",size:"small",onClick:_},{default:u((()=>[c])),_:1})])),default:u((()=>[d(r,{title:"修改密码",content:"定期修改密码可以提高帐号安全性噢~"}),d(f,null,{default:u((()=>[d(w,{md:24,lg:12},{default:u((()=>[d(i,{ref:"formRef",model:b.value,rules:v.value,"label-width":"120px"},{default:u((()=>[d(p,{label:"原密码",prop:"password"},{default:u((()=>[d(t,{modelValue:b.value.password,"onUpdate:modelValue":s[0]||(s[0]=e=>b.value.password=e),type:"password",placeholder:"请输入原密码"},null,8,["modelValue"])])),_:1}),d(p,{label:"新密码",prop:"newpassword"},{default:u((()=>[d(t,{modelValue:b.value.newpassword,"onUpdate:modelValue":s[1]||(s[1]=e=>b.value.newpassword=e),type:"password",placeholder:"请输入原密码"},null,8,["modelValue"])])),_:1}),d(p,{label:"确认新密码",prop:"checkpassword"},{default:u((()=>[d(t,{modelValue:b.value.checkpassword,"onUpdate:modelValue":s[2]||(s[2]=e=>b.value.checkpassword=e),type:"password",placeholder:"请输入原密码"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1})])),_:1})])}}});export{g as default};
