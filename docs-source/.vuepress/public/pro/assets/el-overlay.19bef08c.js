
/**
 * 由 One-step-admin 提供技术支持
 * Powered by One-step-admin
 * https://one-step-admin.netlify.app
 * 代码仓库
 * Gitee  https://gitee.com/hooray/one-step-admin
 * Github https://github.com/hooray/one-step-admin
 */
    
var e=Object.defineProperty,o=Object.defineProperties,t=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,s=(o,t,n)=>t in o?e(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n;import{o as u,bp as r,a3 as d,a8 as c,an as i,av as p,b5 as f,W as m,bq as y,b3 as v,br as E,b4 as b,aH as g,O as S,P as C,d as h,V as M,b as T,H as O,ao as A,af as L,U as x,aM as B,r as D,C as I,ak as w,ah as N,bs as P,A as R,B as k,b6 as Y}from"./index.0a5e3bc2.js";import{U as F}from"./event2.27558ffe.js";import{u as _}from"./index2.fa2fe4ab.js";import{t as j}from"./error2.1d524120.js";import{g as H}from"./scroll2.09311c78.js";var z=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(z||{});const X=(e,o,t)=>{let n={offsetX:0,offsetY:0};const a=o=>{const t=o.clientX,a=o.clientY,{offsetX:l,offsetY:s}=n,u=e.value.getBoundingClientRect(),r=u.left,d=u.top,i=u.width,p=u.height,f=document.documentElement.clientWidth,m=document.documentElement.clientHeight,y=-r+l,v=-d+s,E=f-r-i+l,b=m-d-p+s,g=o=>{const u=Math.min(Math.max(l+o.clientX-t,y),E),r=Math.min(Math.max(s+o.clientY-a,v),b);n={offsetX:u,offsetY:r},e.value.style.transform=`translate(${c(u)}, ${c(r)})`},S=()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",S)};document.addEventListener("mousemove",g),document.addEventListener("mouseup",S)},l=()=>{o.value&&e.value&&o.value.removeEventListener("mousedown",a)};u((()=>{r((()=>{t.value?o.value&&e.value&&o.value.addEventListener("mousedown",a):l()}))})),d((()=>{l()}))},$=e=>{if(i(e)||j("[useLockscreen]","You need to pass a ref param to this function"),!p||f(document.body,"el-popup-parent--hidden"))return;let o=0,t=!1,n="0",a=0;const l=()=>{b(document.body,"el-popup-parent--hidden"),t&&(document.body.style.paddingRight=n)};m(e,(e=>{if(!e)return void l();t=!f(document.body,"el-popup-parent--hidden"),t&&(n=document.body.style.paddingRight,a=Number.parseInt(y(document.body,"paddingRight"),10)),o=H();const s=document.documentElement.clientHeight<document.body.scrollHeight,u=y(document.body,"overflowY");o>0&&(s||"scroll"===u)&&t&&(document.body.style.paddingRight=`${a+o}px`),v(document.body,"el-popup-parent--hidden")})),E((()=>l()))},G=e=>{if(!e)return{onClick:g,onMousedown:g,onMouseup:g};let o=!1,t=!1;return{onClick:n=>{o&&t&&e(n),o=t=!1},onMousedown:e=>{o=e.target===e.currentTarget},onMouseup:e=>{t=e.target===e.currentTarget}}};const U=h({name:"ElOverlay",props:S({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:C([String,Array,Object])},zIndex:{type:C([String,Number])}}),emits:{click:e=>e instanceof MouseEvent},setup(e,{slots:o,emit:t}){const n=M("overlay"),{onClick:a,onMousedown:l,onMouseup:s}=G(e.customMaskEvent?void 0:e=>{t("click",e)});return()=>e.mask?T("div",{class:[n.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:a,onMousedown:l,onMouseup:s},[O(o,"default")],z.STYLE|z.CLASS|z.PROPS,["onClick","onMouseup","onMousedown"]):A("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[O(o,"default")])}}),V=S({center:{type:Boolean,default:!1},closeIcon:{type:L,default:""},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),K={close:()=>!0},q=S((W=((e,o)=>{for(var t in o||(o={}))a.call(o,t)&&s(e,t,o[t]);if(n)for(var t of n(o))l.call(o,t)&&s(e,t,o[t]);return e})({},V),Z={appendToBody:{type:Boolean,default:!1},beforeClose:{type:C(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,required:!0},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}},o(W,t(Z))));var W,Z;const J={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[F]:e=>x(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Q=(e,o)=>{const t=k().emit,{nextZIndex:n}=B();let a="";const l=_(),s=_(),r=D(!1),d=D(!1),c=D(!1),i=D(e.zIndex||n());let f,y;const v=I((()=>w(e.width)?`${e.width}px`:e.width)),E=N("namespace",P),b=I((()=>{const o={},t=`--${E.value}-dialog`;return e.fullscreen||(e.top&&(o[`${t}-margin-top`]=e.top),e.width&&(o[`${t}-width`]=v.value)),o}));function g(){null==y||y(),null==f||f(),e.openDelay&&e.openDelay>0?({stop:f}=Y((()=>h()),e.openDelay)):h()}function S(){null==f||f(),null==y||y(),e.closeDelay&&e.closeDelay>0?({stop:y}=Y((()=>M()),e.closeDelay)):M()}function C(){e.beforeClose?e.beforeClose((function(e){e||(d.value=!0,r.value=!1)})):S()}function h(){p&&(r.value=!0)}function M(){r.value=!1}return e.lockScroll&&$(r),m((()=>e.modelValue),(a=>{a?(d.value=!1,g(),c.value=!0,t("open"),i.value=e.zIndex?i.value++:n(),R((()=>{o.value&&(o.value.scrollTop=0)}))):r.value&&S()})),m((()=>e.fullscreen),(e=>{o.value&&(e?(a=o.value.style.transform,o.value.style.transform=""):o.value.style.transform=a)})),u((()=>{e.modelValue&&(r.value=!0,c.value=!0,g())})),{afterEnter:function(){t("opened")},afterLeave:function(){t("closed"),t(F,!1),e.destroyOnClose&&(c.value=!1)},beforeLeave:function(){t("close")},handleClose:C,onModalClick:function(){e.closeOnClickModal&&C()},close:S,doClose:M,onOpenAutoFocus:function(){t("openAutoFocus")},onCloseAutoFocus:function(){t("closeAutoFocus")},onCloseRequested:function(){e.closeOnPressEscape&&C()},titleId:l,bodyId:s,closed:d,style:b,rendered:c,visible:r,zIndex:i}};export{U as E,J as a,X as b,$ as c,q as d,G as e,V as f,K as g,Q as u};
