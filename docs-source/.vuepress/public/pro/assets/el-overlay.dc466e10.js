
/**
 * 由 One-step-admin 提供技术支持
 * https://hooray.gitee.io/one-step-admin/
 * Powered by One-step-admin
 * https://hooray.github.io/one-step-admin/
 */
    
var e=Object.defineProperty,o=Object.defineProperties,t=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,s=(o,t,n)=>t in o?e(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n;import{f as u,bn as r,a4 as d,a9 as c,ba as i,au as p,Z as f,bo as m,aZ as y,aw as v,aF as E,I as b,M as g,d as h,J as S,g as C,H as M,am as T,ae as O,Y as L,aK as x,r as w,C as A,ao as B,z as D,B as I,b0 as N}from"./index.b046d3e8.js";import{U as P}from"./event.e7ca8317.js";import{t as Y}from"./error.76088f19.js";import{h as k,g as R,a as _,r as F}from"./style.3c5afb48.js";import{g as j}from"./scroll.df30964b.js";var z=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(z||{});const H=(e,o,t)=>{let n={offsetX:0,offsetY:0};const l=o=>{const t=o.clientX,l=o.clientY,{offsetX:a,offsetY:s}=n,u=e.value.getBoundingClientRect(),r=u.left,d=u.top,i=u.width,p=u.height,f=document.documentElement.clientWidth,m=document.documentElement.clientHeight,y=-r+a,v=-d+s,E=f-r-i+a,b=m-d-p+s,g=o=>{const u=Math.min(Math.max(a+o.clientX-t,y),E),r=Math.min(Math.max(s+o.clientY-l,v),b);n={offsetX:u,offsetY:r},e.value.style.transform=`translate(${c(u)}, ${c(r)})`},h=()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",h)};document.addEventListener("mousemove",g),document.addEventListener("mouseup",h)},a=()=>{o.value&&e.value&&o.value.removeEventListener("mousedown",l)};u((()=>{r((()=>{t.value?o.value&&e.value&&o.value.addEventListener("mousedown",l):a()}))})),d((()=>{a()}))},X=e=>{if(i(e)||Y("[useLockscreen]","You need to pass a ref param to this function"),!p||k(document.body,"el-popup-parent--hidden"))return;let o=0,t=!1,n="0",l=0;const a=()=>{F(document.body,"el-popup-parent--hidden"),t&&(document.body.style.paddingRight=n)};f(e,(e=>{if(!e)return void a();t=!k(document.body,"el-popup-parent--hidden"),t&&(n=document.body.style.paddingRight,l=Number.parseInt(R(document.body,"paddingRight"),10)),o=j();const s=document.documentElement.clientHeight<document.body.scrollHeight,u=R(document.body,"overflowY");o>0&&(s||"scroll"===u)&&t&&(document.body.style.paddingRight=`${l+o}px`),_(document.body,"el-popup-parent--hidden")})),m((()=>a()))},G=[],K=(e,o)=>{f(o,(o=>{o?G.push(e):G.splice(G.indexOf(e),1)}))};p&&y(document,"keydown",(e=>{if(0!==G.length&&e.code===v.esc){e.stopPropagation();G[G.length-1].handleClose()}}));const U=(e,o)=>{let t;f((()=>e.value),(e=>{var n,l;e?(t=document.activeElement,i(o)&&(null==(l=(n=o.value).focus)||l.call(n))):t.focus()}))},V=e=>{if(!e)return{onClick:E,onMousedown:E,onMouseup:E};let o=!1,t=!1;return{onClick:n=>{o&&t&&e(n),o=t=!1},onMousedown:e=>{o=e.target===e.currentTarget},onMouseup:e=>{t=e.target===e.currentTarget}}};const $=h({name:"ElOverlay",props:b({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:g([String,Array,Object])},zIndex:{type:g([String,Number])}}),emits:{click:e=>e instanceof MouseEvent},setup(e,{slots:o,emit:t}){const n=S("overlay"),{onClick:l,onMousedown:a,onMouseup:s}=V(e.customMaskEvent?void 0:e=>{t("click",e)});return()=>e.mask?C("div",{class:[n.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:l,onMousedown:a,onMouseup:s},[M(o,"default")],z.STYLE|z.CLASS|z.PROPS,["onClick","onMouseup","onMousedown"]):T("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[M(o,"default")])}}),Z=b({center:{type:Boolean,default:!1},closeIcon:{type:O,default:""},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),q={close:()=>!0},J=b((W=((e,o)=>{for(var t in o||(o={}))l.call(o,t)&&s(e,t,o[t]);if(n)for(var t of n(o))a.call(o,t)&&s(e,t,o[t]);return e})({},Z),Q={appendToBody:{type:Boolean,default:!1},beforeClose:{type:g(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,required:!0},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}},o(W,t(Q))));var W,Q;const ee={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[P]:e=>L(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},oe=(e,o)=>{const t=I().emit,{nextZIndex:n}=x();let l="";const a=w(!1),s=w(!1),r=w(!1),d=w(e.zIndex||n());let c,i;const m=A((()=>B(e.width)?`${e.width}px`:e.width)),y=A((()=>{const o={};return e.fullscreen||(e.top&&(o["--el-dialog-margin-top"]=e.top),e.width&&(o["--el-dialog-width"]=m.value)),o}));function v(){null==i||i(),null==c||c(),e.openDelay&&e.openDelay>0?({stop:c}=N((()=>g()),e.openDelay)):g()}function E(){null==c||c(),null==i||i(),e.closeDelay&&e.closeDelay>0?({stop:i}=N((()=>h()),e.closeDelay)):h()}function b(){e.beforeClose?e.beforeClose((function(e){e||(s.value=!0,a.value=!1)})):E()}function g(){p&&(a.value=!0)}function h(){a.value=!1}return e.lockScroll&&X(a),e.closeOnPressEscape&&K({handleClose:b},a),U(a),f((()=>e.modelValue),(l=>{l?(s.value=!1,v(),r.value=!0,t("open"),d.value=e.zIndex?d.value++:n(),D((()=>{o.value&&(o.value.scrollTop=0)}))):a.value&&E()})),f((()=>e.fullscreen),(e=>{o.value&&(e?(l=o.value.style.transform,o.value.style.transform=""):o.value.style.transform=l)})),u((()=>{e.modelValue&&(a.value=!0,r.value=!0,v())})),{afterEnter:function(){t("opened")},afterLeave:function(){t("closed"),t(P,!1),e.destroyOnClose&&(r.value=!1)},beforeLeave:function(){t("close")},handleClose:b,onModalClick:function(){e.closeOnClickModal&&b()},close:E,doClose:h,closed:s,style:y,rendered:r,visible:a,zIndex:d}};export{$ as E,ee as a,H as b,K as c,J as d,X as e,U as f,V as g,Z as h,q as i,oe as u};
