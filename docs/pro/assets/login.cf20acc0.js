
/**
 * 由 One-step-admin 提供技术支持
 * https://hooray.gitee.io/one-step-admin/
 * Powered by One-step-admin
 * https://hooray.github.io/one-step-admin/
 */
    
import{_ as E,a as X}from"./index.f5b36425.js";import{_ as Y}from"./index.ab111d0f.js";import{i as Z,q as G,R as H,S as J,r as u,T as Q,x as m,o as F,j as W,A as e,z as t,k as s,U as S,V as U,X as w,u as ee,Y as oe,Z as j,_ as i,y as te,l as ae,p as le,m as ne,$ as se,B as re}from"./vendor.a8203abd.js";import{_ as ue,s as h}from"./index.c3034165.js";const y=b=>(le("data-v-236412ef"),b=b(),ne(),b),ie=y(()=>s("div",{class:"bg-banner"},null,-1)),de=y(()=>s("i",{class:"ri-translate"},null,-1)),pe={id:"login-box"},ce=y(()=>s("div",{class:"login-banner"},null,-1)),me={class:"title-container"},_e={class:"title"},fe={class:"flex-bar"},ge=i("\u8BB0\u4F4F\u6211"),ve=i("\u5FD8\u8BB0\u5BC6\u7801"),we={style:{"margin-top":"20px","margin-bottom":"-10px",color:"#666","font-size":"14px","text-align":"center","font-weight":"bold"}},he=y(()=>s("span",{style:{"margin-right":"5px"}},"\u6F14\u793A\u5E10\u53F7\u4E00\u952E\u767B\u5F55\uFF1A",-1)),ye=i("admin"),be=i("test"),xe=y(()=>s("div",{class:"title-container"},[s("h3",{class:"title"},"\u91CD\u7F6E\u5BC6\u7801")],-1)),Ve=Z({name:"Login"});function $e(b){const{proxy:x}=re(),B=G(),I=H(),T=J(),z="One-step-admin \u4E13\u4E1A\u7248",V=u("login"),r=u({account:h.local.get("login_account"),password:"",remember:h.local.has("login_account")}),N=u({account:[{required:!0,trigger:"blur",message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"}],password:[{required:!0,trigger:"blur",message:"\u8BF7\u8F93\u5165\u5BC6\u7801"},{min:6,max:18,trigger:"blur",message:"\u5BC6\u7801\u957F\u5EA6\u4E3A6\u523018\u4F4D"}]}),d=u({account:h.local.get("login_account"),captcha:"",newPassword:""}),K=u({account:[{required:!0,trigger:"blur",message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"}],captcha:[{required:!0,trigger:"blur",message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}],newPassword:[{required:!0,trigger:"blur",message:"\u8BF7\u8F93\u5165\u65B0\u5BC6\u7801"},{min:6,max:18,trigger:"blur",message:"\u5BC6\u7801\u957F\u5EA6\u4E3A6\u523018\u4F4D"}]}),f=u(!1),_=u("password"),k=u(null);Q(()=>{var l;k.value=(l=I.query.redirect)!=null?l:"/"});function C(){_.value=_.value==="password"?"":"password",se(()=>{x.$refs.password.focus()})}function $(){x.$refs.loginFormRef.validate(l=>{l&&(f.value=!0,B.dispatch("user/login",r.value).then(()=>{f.value=!1,r.value.remember?h.local.set("login_account",r.value.account):h.local.remove("login_account"),T.push(k.value)}).catch(()=>{f.value=!1}))})}function L(){x.$message({message:"\u91CD\u7F6E\u5BC6\u7801\u4EC5\u63D0\u4F9B\u754C\u9762\u6F14\u793A\uFF0C\u65E0\u5B9E\u9645\u529F\u80FD\uFF0C\u9700\u5F00\u53D1\u8005\u81EA\u884C\u6269\u5C55",type:"info"}),x.$refs.resetFormRef.validate(l=>{})}function R(l){r.value.account=l,r.value.password="123456",$()}return(l,a)=>{const A=E,p=Y,g=m("el-input"),v=m("el-form-item"),D=m("el-checkbox"),c=m("el-button"),P=m("el-form"),q=m("el-col"),M=m("el-row"),O=X;return F(),W("div",null,[ie,e(A,{class:"i18n-selector"},{default:t(()=>[de]),_:1}),s("div",pe,[ce,S(e(P,{ref:(o,n)=>{n.loginFormRef=o},model:r.value,rules:N.value,class:"login-form",autocomplete:"on","label-position":"left"},{default:t(()=>[s("div",me,[s("h3",_e,w(ee(z))+"\u7BA1\u7406\u540E\u53F0",1)]),s("div",null,[e(v,{prop:"account"},{default:t(()=>[e(g,{ref:(o,n)=>{n.name=o},modelValue:r.value.account,"onUpdate:modelValue":a[0]||(a[0]=o=>r.value.account=o),placeholder:l.$t("app.account"),type:"text",tabindex:"1",autocomplete:"on"},{prefix:t(()=>[e(p,{name:"user"})]),_:1},8,["modelValue","placeholder"])]),_:1}),e(v,{prop:"password"},{default:t(()=>[e(g,{ref:(o,n)=>{n.password=o},modelValue:r.value.password,"onUpdate:modelValue":a[1]||(a[1]=o=>r.value.password=o),type:_.value,placeholder:l.$t("app.password"),tabindex:"2",autocomplete:"on",onKeyup:oe($,["enter"])},{prefix:t(()=>[e(p,{name:"password"})]),suffix:t(()=>[e(p,{name:_.value==="password"?"eye":"eye-open",onClick:C},null,8,["name"])]),_:1},8,["modelValue","type","placeholder","onKeyup"])]),_:1})]),s("div",fe,[e(D,{modelValue:r.value.remember,"onUpdate:modelValue":a[2]||(a[2]=o=>r.value.remember=o)},{default:t(()=>[ge]),_:1},8,["modelValue"]),e(c,{type:"text",onClick:a[3]||(a[3]=o=>V.value="reset")},{default:t(()=>[ve]),_:1})]),e(c,{loading:f.value,type:"primary",style:{width:"100%"},onClick:j($,["prevent"])},{default:t(()=>[i(w(l.$t("app.login")),1)]),_:1},8,["loading","onClick"]),s("div",we,[he,e(c,{type:"danger",size:"mini",onClick:a[4]||(a[4]=o=>R("admin"))},{default:t(()=>[ye]),_:1}),e(c,{type:"danger",size:"mini",plain:"",onClick:a[5]||(a[5]=o=>R("test"))},{default:t(()=>[be]),_:1})])]),_:1},8,["model","rules"]),[[U,V.value=="login"]]),S(e(P,{ref:(o,n)=>{n.resetFormRef=o},model:d.value,rules:K.value,class:"login-form","auto-complete":"on","label-position":"left"},{default:t(()=>[xe,s("div",null,[e(v,{prop:"account"},{default:t(()=>[e(g,{ref:(o,n)=>{n.name=o},modelValue:d.value.account,"onUpdate:modelValue":a[6]||(a[6]=o=>d.value.account=o),placeholder:l.$t("app.account"),type:"text",tabindex:"1",autocomplete:"on"},{prefix:t(()=>[e(p,{name:"user"})]),_:1},8,["modelValue","placeholder"])]),_:1}),e(v,{prop:"captcha"},{default:t(()=>[e(g,{ref:(o,n)=>{n.captcha=o},modelValue:d.value.captcha,"onUpdate:modelValue":a[7]||(a[7]=o=>d.value.captcha=o),placeholder:l.$t("app.captcha"),type:"text",tabindex:"2",autocomplete:"on"},{prefix:t(()=>[e(p,{name:"captcha"})]),append:t(()=>[e(c,null,{default:t(()=>[i(w(l.$t("app.sendCaptcha")),1)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1}),e(v,{prop:"newPassword"},{default:t(()=>[e(g,{ref:(o,n)=>{n.newPassword=o},modelValue:d.value.newPassword,"onUpdate:modelValue":a[8]||(a[8]=o=>d.value.newPassword=o),type:_.value,placeholder:l.$t("app.newPassword"),tabindex:"3",autocomplete:"on"},{prefix:t(()=>[e(p,{name:"password"})]),suffix:t(()=>[e(p,{name:_.value==="password"?"eye":"eye-open",onClick:C},null,8,["name"])]),_:1},8,["modelValue","type","placeholder"])]),_:1})]),e(M,{gutter:15,style:{"padding-top":"20px"}},{default:t(()=>[e(q,{md:6},{default:t(()=>[e(c,{style:{width:"100%"},onClick:a[9]||(a[9]=o=>V.value="login")},{default:t(()=>[i(w(l.$t("app.goLogin")),1)]),_:1})]),_:1}),e(q,{md:18},{default:t(()=>[e(c,{loading:f.value,type:"primary",style:{width:"100%"},onClick:j(L,["prevent"])},{default:t(()=>[i(w(l.$t("app.check")),1)]),_:1},8,["loading","onClick"])]),_:1})]),_:1})]),_:1},8,["model","rules"]),[[U,V.value=="reset"]])]),l.$store.state.settings.showCopyright?(F(),te(O,{key:0})):ae("v-if",!0)])}}const ke=Object.assign(Ve,{setup:$e});var Fe=ue(ke,[["__scopeId","data-v-236412ef"]]);export{Fe as default};
