
/**
 * 由 Fantastic-admin-discovery 提供技术支持
 * https://hooray.gitee.io/fantastic-admin-discovery/
 * Powered by Fantastic-admin-discovery
 * https://hooray.github.io/fantastic-admin-discovery/
 */
    
import{_ as V}from"./index.4e2c020e.js";import{_ as k}from"./index.3ac8c786.js";import{r as m,q as C,s as r,t as h,v as w,x as e,y as t,c as T,A as S,B as P,C as q,o as y,D as I,F as U,G as x,H as i}from"./vendor.1e66543d.js";import{_ as B}from"./plugin-vue_export-helper.5a098b48.js";const L={name:"Login",data(){return{title:"Fantastic-admin-discovery \u57FA\u7840\u7248",formType:"login",loginForm:{account:localStorage.login_account,password:"",remember:!!localStorage.login_account},loginRules:{account:[{required:!0,trigger:"blur",message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"}],password:[{required:!0,trigger:"blur",message:"\u8BF7\u8F93\u5165\u5BC6\u7801"},{min:6,max:18,trigger:"blur",message:"\u5BC6\u7801\u957F\u5EA6\u4E3A6\u523018\u4F4D"}]},resetForm:{account:localStorage.login_account,captcha:"",newPassword:""},resetRules:{account:[{required:!0,trigger:"blur",message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"}],captcha:[{required:!0,trigger:"blur",message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}],newPassword:[{required:!0,trigger:"blur",message:"\u8BF7\u8F93\u5165\u65B0\u5BC6\u7801"},{min:6,max:18,trigger:"blur",message:"\u5BC6\u7801\u957F\u5EA6\u4E3A6\u523018\u4F4D"}]},loading:!1,passwordType:"password",redirect:void 0}},watch:{$route:{handler:function(l){this.redirect=l.query&&l.query.redirect},immediate:!0}},methods:{showPassword(){this.passwordType=this.passwordType==="password"?"":"password",this.$nextTick(()=>{this.$refs.password.focus()})},handleLogin(){this.$refs.loginForm.validate(l=>{l&&(this.loading=!0,this.$store.dispatch("user/login",this.loginForm).then(()=>{this.loading=!1,this.loginForm.remember?localStorage.setItem("login_account",this.loginForm.account):localStorage.removeItem("login_account"),this.$router.push({path:this.redirect||"/"})}).catch(()=>{this.loading=!1}))})},handleFind(){this.$message({message:"\u91CD\u7F6E\u5BC6\u7801\u4EC5\u63D0\u4F9B\u754C\u9762\u6F14\u793A\uFF0C\u65E0\u5B9E\u9645\u529F\u80FD\uFF0C\u9700\u5F00\u53D1\u8005\u81EA\u884C\u6269\u5C55",type:"info"}),this.$refs.resetForm.validate(l=>{})},testAccount(l){this.loginForm.account=l,this.loginForm.password="123456",this.handleLogin()}}},_=l=>(P("data-v-41823610"),l=l(),q(),l),j=_(()=>r("div",{class:"bg-banner"},null,-1)),A={id:"login-box"},N=_(()=>r("div",{class:"login-banner"},null,-1)),R={class:"title-container"},z={class:"title"},D={class:"flex-bar"},K=i("\u8BB0\u4F4F\u6211"),E=i("\u5FD8\u8BB0\u5BC6\u7801"),G=i("\u767B \u5F55"),H={style:{"margin-top":"20px","margin-bottom":"-10px",color:"#666","font-size":"14px","text-align":"center","font-weight":"bold"}},M=_(()=>r("span",{style:{"margin-right":"5px"}},"\u6F14\u793A\u5E10\u53F7\u4E00\u952E\u767B\u5F55\uFF1A",-1)),J=i("admin"),O=i("test"),Q=_(()=>r("div",{class:"title-container"},[r("h3",{class:"title"},"\u91CD\u7F6E\u5BC6\u7801")],-1)),W=i("\u53D1\u9001\u9A8C\u8BC1\u7801"),X=i("\u53BB\u767B\u5F55"),Y=i("\u786E\u8BA4");function Z(l,s,$,ee,o,a){const d=k,c=m("el-input"),u=m("el-form-item"),v=m("el-checkbox"),p=m("el-button"),g=m("el-form"),f=m("el-col"),b=m("el-row"),F=V;return y(),C("div",null,[j,r("div",A,[N,h(e(g,{ref:"loginForm",model:o.loginForm,rules:o.loginRules,class:"login-form",autocomplete:"on","label-position":"left"},{default:t(()=>[r("div",R,[r("h3",z,I(o.title)+"\u7BA1\u7406\u540E\u53F0",1)]),r("div",null,[e(u,{prop:"account"},{default:t(()=>[e(c,{ref:"name",modelValue:o.loginForm.account,"onUpdate:modelValue":s[0]||(s[0]=n=>o.loginForm.account=n),placeholder:"\u7528\u6237\u540D",type:"text",tabindex:"1",autocomplete:"on"},{prefix:t(()=>[e(d,{name:"user"})]),_:1},8,["modelValue"])]),_:1}),e(u,{prop:"password"},{default:t(()=>[e(c,{ref:"password",modelValue:o.loginForm.password,"onUpdate:modelValue":s[1]||(s[1]=n=>o.loginForm.password=n),type:o.passwordType,placeholder:"\u5BC6\u7801",tabindex:"2",autocomplete:"on",onKeyup:U(a.handleLogin,["enter"])},{prefix:t(()=>[e(d,{name:"password"})]),suffix:t(()=>[e(d,{name:o.passwordType==="password"?"eye":"eye-open",onClick:a.showPassword},null,8,["name","onClick"])]),_:1},8,["modelValue","type","onKeyup"])]),_:1})]),r("div",D,[e(v,{modelValue:o.loginForm.remember,"onUpdate:modelValue":s[2]||(s[2]=n=>o.loginForm.remember=n)},{default:t(()=>[K]),_:1},8,["modelValue"]),e(p,{type:"text",onClick:s[3]||(s[3]=n=>o.formType="reset")},{default:t(()=>[E]),_:1})]),e(p,{loading:o.loading,type:"primary",style:{width:"100%"},onClick:x(a.handleLogin,["prevent"])},{default:t(()=>[G]),_:1},8,["loading","onClick"]),r("div",H,[M,e(p,{type:"danger",size:"mini",onClick:s[4]||(s[4]=n=>a.testAccount("admin"))},{default:t(()=>[J]),_:1}),e(p,{type:"danger",size:"mini",plain:"",onClick:s[5]||(s[5]=n=>a.testAccount("test"))},{default:t(()=>[O]),_:1})])]),_:1},8,["model","rules"]),[[w,o.formType=="login"]]),h(e(g,{ref:"resetForm",model:o.resetForm,rules:o.resetRules,class:"login-form","auto-complete":"on","label-position":"left"},{default:t(()=>[Q,r("div",null,[e(u,{prop:"account"},{default:t(()=>[e(c,{ref:"name",modelValue:o.resetForm.account,"onUpdate:modelValue":s[6]||(s[6]=n=>o.resetForm.account=n),placeholder:"\u7528\u6237\u540D",type:"text",tabindex:"1",autocomplete:"on"},{prefix:t(()=>[e(d,{name:"user"})]),_:1},8,["modelValue"])]),_:1}),e(u,{prop:"captcha"},{default:t(()=>[e(c,{ref:"captcha",modelValue:o.resetForm.captcha,"onUpdate:modelValue":s[7]||(s[7]=n=>o.resetForm.captcha=n),placeholder:"\u9A8C\u8BC1\u7801",type:"text",tabindex:"2",autocomplete:"on"},{prefix:t(()=>[e(d,{name:"captcha"})]),append:t(()=>[e(p,null,{default:t(()=>[W]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{prop:"newPassword"},{default:t(()=>[e(c,{ref:"newPassword",modelValue:o.resetForm.newPassword,"onUpdate:modelValue":s[8]||(s[8]=n=>o.resetForm.newPassword=n),type:o.passwordType,placeholder:"\u65B0\u5BC6\u7801",tabindex:"3",autocomplete:"on"},{prefix:t(()=>[e(d,{name:"password"})]),suffix:t(()=>[e(d,{name:o.passwordType==="password"?"eye":"eye-open",onClick:a.showPassword},null,8,["name","onClick"])]),_:1},8,["modelValue","type"])]),_:1})]),e(b,{gutter:15,style:{"padding-top":"20px"}},{default:t(()=>[e(f,{md:6},{default:t(()=>[e(p,{style:{width:"100%"},onClick:s[9]||(s[9]=n=>o.formType="login")},{default:t(()=>[X]),_:1})]),_:1}),e(f,{md:18},{default:t(()=>[e(p,{loading:o.loading,type:"primary",style:{width:"100%"},onClick:x(a.handleFind,["prevent"])},{default:t(()=>[Y]),_:1},8,["loading","onClick"])]),_:1})]),_:1})]),_:1},8,["model","rules"]),[[w,o.formType=="reset"]])]),l.$store.state.settings.showCopyright?(y(),T(F,{key:0})):S("v-if",!0)])}var le=B(L,[["render",Z],["__scopeId","data-v-41823610"]]);export{le as default};
