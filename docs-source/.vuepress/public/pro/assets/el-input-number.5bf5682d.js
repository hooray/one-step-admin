
/**
 * 由 One-step-admin 提供技术支持
 * https://hooray.gitee.io/one-step-admin/
 * Powered by One-step-admin
 * https://hooray.github.io/one-step-admin/
 */
    
import{d as e,an as a,o as n,c as t,a as l,I as r,V as u,ao as s,E as o,r as i,$ as d,J as c,C as p,aN as m,Z as b,f as v,a5 as f,a2 as N,ay as h,bh as g,h as I,a1 as V,q as y,g as w,w as x,j as S,k as A,x as k,L as E}from"./index.b046d3e8.js";import{E as j}from"./el-input.33bb8256.js";import{R as F}from"./index.4ac192a7.js";import{u as D}from"./index.16ef6f7e.js";import{d as B}from"./error.76088f19.js";import{u as z,c as C}from"./index.2b0c4341.js";import{a as M}from"./arrow-up.fa4eb789.js";import{a as R}from"./arrow-down.190c6c2a.js";import{p as _}from"./plus.94faa6cb.js";const K=e({name:"Minus"}),P={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},T=[l("path",{fill:"currentColor",d:"M128 544h768a32 32 0 1 0 0-64H128a32 32 0 0 0 0 64z"},null,-1)];const O=E(N(e({name:"ElInputNumber",components:{ElInput:j,ElIcon:o,ArrowUp:M,ArrowDown:R,Plus:_,Minus:a(K,[["render",function(e,a,l,r,u,s){return n(),t("svg",P,T)}]])},directives:{RepeatClick:F},props:r({step:{type:Number,default:1},stepStrictly:{type:Boolean,default:!1},max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:{type:Number},disabled:{type:Boolean,default:!1},size:{type:String,values:u},controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},name:String,label:String,placeholder:String,precision:{type:Number,validator:e=>e>=0&&e===Number.parseInt(`${e}`,10)}}),emits:{change:(e,a)=>e!==a,blur:e=>e instanceof FocusEvent,focus:e=>e instanceof FocusEvent,input:e=>s(e),"update:modelValue":e=>s(e)||void 0===e},setup(e,{emit:a}){const n=i(),t=d({currentValue:e.modelValue,userInput:null}),{formItem:l}=D(),r=c("input-number"),u=p((()=>x(e.modelValue,-1)<e.min)),o=p((()=>x(e.modelValue)>e.max)),N=p((()=>{const a=w(e.step);return m(e.precision)?Math.max(w(e.modelValue),a):(e.precision,e.precision)})),h=p((()=>e.controls&&"right"===e.controlsPosition)),g=z(),I=C(),V=p((()=>{if(null!==t.userInput)return t.userInput;let a=t.currentValue;if(s(a)){if(Number.isNaN(a))return"";m(e.precision)||(a=a.toFixed(e.precision))}return a})),y=(e,a)=>(m(a)&&(a=N.value),Number.parseFloat(""+Math.round(e*10**a)/10**a)),w=e=>{if(m(e))return 0;const a=e.toString(),n=a.indexOf(".");let t=0;return-1!==n&&(t=a.length-n-1),t},x=(a,n=1)=>s(a)?(a=s(a)?a:Number.NaN,y(a+e.step*n)):t.currentValue,S=(n,t)=>{const{max:l,min:r,step:u,precision:s,stepStrictly:o}=e;let i=Number(n);return null===n&&(i=Number.NaN),Number.isNaN(i)||(o&&(i=Math.round(i/u)*u),m(s)||(i=y(i,s)),(i>l||i<r)&&(i=i>l?l:r,t&&a("update:modelValue",i))),i},A=e=>{var n;const r=t.currentValue;let u=S(e);r!==u&&(Number.isNaN(u)&&(u=void 0),t.userInput=null,a("update:modelValue",u),a("input",u),a("change",u,r),null==(n=null==l?void 0:l.validate)||n.call(l,"change").catch((e=>B())),t.currentValue=u)};return b((()=>e.modelValue),(e=>{const a=S(e,!0);t.currentValue=a,t.userInput=null}),{immediate:!0}),v((()=>{var l;const r=null==(l=n.value)?void 0:l.input;if(r.setAttribute("role","spinbutton"),r.setAttribute("aria-valuemax",String(e.max)),r.setAttribute("aria-valuemin",String(e.min)),r.setAttribute("aria-valuenow",String(t.currentValue)),r.setAttribute("aria-disabled",String(I.value)),!s(e.modelValue)){let n=Number(e.modelValue);Number.isNaN(n)&&(n=void 0),a("update:modelValue",n)}})),f((()=>{var e;const a=null==(e=n.value)?void 0:e.input;null==a||a.setAttribute("aria-valuenow",t.currentValue)})),{input:n,displayValue:V,handleInput:e=>t.userInput=e,handleInputChange:e=>{const a=""!==e?Number(e):"";(s(a)&&!Number.isNaN(a)||""===e)&&A(a),t.userInput=null},controlsAtRight:h,decrease:()=>{if(I.value||u.value)return;const a=e.modelValue||0,n=x(a,-1);A(n)},increase:()=>{if(I.value||o.value)return;const a=e.modelValue||0,n=x(a);A(n)},inputNumberSize:g,inputNumberDisabled:I,maxDisabled:o,minDisabled:u,focus:()=>{var e,a;null==(a=null==(e=n.value)?void 0:e.focus)||a.call(e)},blur:()=>{var e,a;null==(a=null==(e=n.value)?void 0:e.blur)||a.call(e)},handleFocus:e=>{a("focus",e)},handleBlur:e=>{var n;a("blur",e),null==(n=null==l?void 0:l.validate)||n.call(l,"blur").catch((e=>B()))},ns:r}}}),[["render",function(e,a,l,r,u,s){const o=h("arrow-down"),i=h("minus"),d=h("el-icon"),c=h("arrow-up"),p=h("plus"),m=h("el-input"),b=g("repeat-click");return n(),t("div",{class:V([e.ns.b(),e.ns.m(e.inputNumberSize),e.ns.is("disabled",e.inputNumberDisabled),e.ns.is("without-controls",!e.controls),e.ns.is("controls-right",e.controlsAtRight)]),onDragstart:a[2]||(a[2]=k((()=>{}),["prevent"]))},[e.controls?I((n(),t("span",{key:0,role:"button",class:V([e.ns.e("decrease"),e.ns.is("disabled",e.minDisabled)]),onKeydown:a[0]||(a[0]=y(((...a)=>e.decrease&&e.decrease(...a)),["enter"]))},[w(d,null,{default:x((()=>[e.controlsAtRight?(n(),S(o,{key:0})):(n(),S(i,{key:1}))])),_:1})],34)),[[b,e.decrease]]):A("v-if",!0),e.controls?I((n(),t("span",{key:1,role:"button",class:V([e.ns.e("increase"),e.ns.is("disabled",e.maxDisabled)]),onKeydown:a[1]||(a[1]=y(((...a)=>e.increase&&e.increase(...a)),["enter"]))},[w(d,null,{default:x((()=>[e.controlsAtRight?(n(),S(c,{key:0})):(n(),S(p,{key:1}))])),_:1})],34)),[[b,e.increase]]):A("v-if",!0),w(m,{ref:"input",type:"number",step:e.step,"model-value":e.displayValue,placeholder:e.placeholder,disabled:e.inputNumberDisabled,size:e.inputNumberSize,max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onKeydown:[y(k(e.increase,["prevent"]),["up"]),y(k(e.decrease,["prevent"]),["down"])],onBlur:e.handleBlur,onFocus:e.handleFocus,onInput:e.handleInput,onChange:e.handleInputChange},null,8,["step","model-value","placeholder","disabled","size","max","min","name","label","onKeydown","onBlur","onFocus","onInput","onChange"])],34)}],["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]));export{O as E};
