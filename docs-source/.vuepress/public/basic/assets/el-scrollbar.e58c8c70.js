
/**
 * 由 One-step-admin 提供技术支持
 * Powered by One-step-admin
 * https://one-step-admin.netlify.app
 * 代码仓库
 * Gitee  https://gitee.com/hooray/one-step-admin
 * Github https://github.com/hooray/one-step-admin
 */
    
import{A as e,d as l,Z as a,C as t,r as s,D as r,$ as o,aN as n,ae as i,_ as u,aq as c,b as v,i as m,h as d,w as f,v as p,e as h,F as y,H as b,a8 as g,aX as w,c as S,g as z,a2 as x,B as T,af as k,a5 as H,U as E,a1 as L,y as $,V as B,W as X,o as Y,a0 as C,ar as _,G as N,a7 as W,j,I as A}from"./index.eaca9d64.js";import{t as R}from"./error2.8f448c70.js";const M=Symbol("scrollbarContextKey"),q={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},I=e({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),K=l({name:"Thumb",props:I,setup(e){const l=a(M),u=t("scrollbar");l||R("Thumb","can not inject scrollbar context");const v=s(),m=s(),d=s({}),f=s(!1);let p=!1,h=!1,y=c?document.onselectstart:null;const b=r((()=>q[e.vertical?"vertical":"horizontal"])),g=r((()=>(({move:e,size:l,bar:a})=>({[a.size]:l,transform:`translate${a.axis}(${e}%)`}))({size:e.size,move:e.move,bar:b.value}))),w=r((()=>v.value[b.value.offset]**2/l.wrapElement[b.value.scrollSize]/e.ratio/m.value[b.value.offset])),S=e=>{e.stopImmediatePropagation(),p=!0,document.addEventListener("mousemove",z),document.addEventListener("mouseup",x),y=document.onselectstart,document.onselectstart=()=>!1},z=e=>{if(!v.value||!m.value)return;if(!1===p)return;const a=d.value[b.value.axis];if(!a)return;const t=100*(-1*(v.value.getBoundingClientRect()[b.value.direction]-e[b.value.client])-(m.value[b.value.offset]-a))*w.value/v.value[b.value.offset];l.wrapElement[b.value.scroll]=t*l.wrapElement[b.value.scrollSize]/100},x=()=>{p=!1,d.value[b.value.axis]=0,document.removeEventListener("mousemove",z),document.removeEventListener("mouseup",x),T(),h&&(f.value=!1)};o((()=>{T(),document.removeEventListener("mouseup",x)}));const T=()=>{document.onselectstart!==y&&(document.onselectstart=y)};return n(i(l,"scrollbarElement"),"mousemove",(()=>{h=!1,f.value=!!e.size})),n(i(l,"scrollbarElement"),"mouseleave",(()=>{h=!0,f.value=p})),{ns:u,instance:v,thumb:m,bar:b,thumbStyle:g,visible:f,clickTrackHandler:e=>{if(!m.value||!v.value||!l.wrapElement)return;const a=100*(Math.abs(e.target.getBoundingClientRect()[b.value.direction]-e[b.value.client])-m.value[b.value.offset]/2)*w.value/v.value[b.value.offset];l.wrapElement[b.value.scroll]=a*l.wrapElement[b.value.scrollSize]/100},clickThumbHandler:e=>{var l;if(e.stopPropagation(),e.ctrlKey||[1,2].includes(e.button))return;null==(l=window.getSelection())||l.removeAllRanges(),S(e);const a=e.currentTarget;a&&(d.value[b.value.axis]=a[b.value.offset]-(e[b.value.client]-a.getBoundingClientRect()[b.value.direction]))}}}});const O=l({components:{Thumb:u(K,[["render",function(e,l,a,t,s,r){return v(),m(g,{name:e.ns.b("fade")},{default:d((()=>[f(h("div",{ref:"instance",class:y([e.ns.e("bar"),e.ns.is(e.bar.key)]),onMousedown:l[1]||(l[1]=(...l)=>e.clickTrackHandler&&e.clickTrackHandler(...l))},[h("div",{ref:"thumb",class:y(e.ns.e("thumb")),style:b(e.thumbStyle),onMousedown:l[0]||(l[0]=(...l)=>e.clickThumbHandler&&e.clickThumbHandler(...l))},null,38)],34),[[p,e.always||e.visible]])])),_:1},8,["name"])}],["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]])},props:e({always:{type:Boolean,default:!0},width:{type:String,default:""},height:{type:String,default:""},ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),setup(e){const l=s(0),a=s(0);return{handleScroll:t=>{if(t){const s=t.offsetHeight-4,r=t.offsetWidth-4;a.value=100*t.scrollTop/s*e.ratioY,l.value=100*t.scrollLeft/r*e.ratioX}},moveX:l,moveY:a}}});const P=A(u(l({name:"ElScrollbar",components:{Bar:u(O,[["render",function(e,l,a,t,s,r){const o=w("thumb");return v(),S(x,null,[z(o,{move:e.moveX,ratio:e.ratioX,size:e.width,always:e.always},null,8,["move","ratio","size","always"]),z(o,{move:e.moveY,ratio:e.ratioY,size:e.height,vertical:"",always:e.always},null,8,["move","ratio","size","always"])],64)}],["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]])},props:e({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:T([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:{type:Boolean,default:!1},minSize:{type:Number,default:20}}),emits:{scroll:({scrollTop:e,scrollLeft:l})=>k(e)&&k(l)},setup(e,{emit:l}){const a=t("scrollbar");let o,i;const u=s(),c=s(),v=s(),m=s("0"),d=s("0"),f=s(),p=s(0),h=s(0),y=s(1),b=s(1),g=r((()=>{const l={};return e.height&&(l.height=H(e.height)),e.maxHeight&&(l.maxHeight=H(e.maxHeight)),[e.wrapStyle,l]}));const w=()=>{if(!c.value)return;const l=c.value.offsetHeight-4,a=c.value.offsetWidth-4,t=l**2/c.value.scrollHeight,s=a**2/c.value.scrollWidth,r=Math.max(t,e.minSize),o=Math.max(s,e.minSize);y.value=t/(l-t)/(r/(l-r)),b.value=s/(a-s)/(o/(a-o)),d.value=r+4<l?`${r}px`:"",m.value=o+4<a?`${o}px`:""};return E((()=>e.noresize),(e=>{e?(null==o||o(),null==i||i()):(({stop:o}=L(v,w)),i=n("resize",w))}),{immediate:!0}),E((()=>[e.maxHeight,e.height]),(()=>{e.native||$((()=>{var e;w(),c.value&&(null==(e=f.value)||e.handleScroll(c.value))}))})),B(M,X({scrollbarElement:u,wrapElement:c})),Y((()=>{e.native||$((()=>w()))})),C((()=>w())),{ns:a,scrollbar$:u,wrap$:c,resize$:v,barRef:f,moveX:p,moveY:h,ratioX:b,ratioY:y,sizeWidth:m,sizeHeight:d,style:g,update:w,handleScroll:()=>{var e;c.value&&(null==(e=f.value)||e.handleScroll(c.value),l("scroll",{scrollTop:c.value.scrollTop,scrollLeft:c.value.scrollLeft}))},scrollTo:function(e,l){_(e)?c.value.scrollTo(e):k(e)&&k(l)&&c.value.scrollTo(e,l)},setScrollTop:e=>{k(e)&&(c.value.scrollTop=e)},setScrollLeft:e=>{k(e)&&(c.value.scrollLeft=e)}}}}),[["render",function(e,l,a,t,s,r){const o=w("bar");return v(),S("div",{ref:"scrollbar$",class:y(e.ns.b())},[h("div",{ref:"wrap$",class:y([e.wrapClass,e.ns.e("wrap"),{[e.ns.em("wrap","hidden-default")]:!e.native}]),style:b(e.style),onScroll:l[0]||(l[0]=(...l)=>e.handleScroll&&e.handleScroll(...l))},[(v(),m(W(e.tag),{ref:"resize$",class:y([e.ns.e("view"),e.viewClass]),style:b(e.viewStyle)},{default:d((()=>[N(e.$slots,"default")])),_:3},8,["class","style"]))],38),e.native?j("v-if",!0):(v(),m(o,{key:0,ref:"barRef",height:e.sizeHeight,width:e.sizeWidth,always:e.always,"ratio-x":e.ratioX,"ratio-y":e.ratioY},null,8,["height","width","always","ratio-x","ratio-y"]))],2)}],["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]));export{P as E};
