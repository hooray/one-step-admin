
/**
 * 由 One-step-admin 提供技术支持
 * https://hooray.gitee.io/one-step-admin/
 * Powered by One-step-admin
 * https://hooray.github.io/one-step-admin/
 */
    
import{_ as e}from"./index.85da0060.js";import{_ as a}from"./index.246b70e5.js";import{d as l,a as s,r,c as o,e as d,f as u,k as t,l as p,m as n,n as m,x as i,z as c}from"./index.8b6d4e84.js";import"./plugin-vue_export-helper.21dcd24c.js";const w=i("提交"),f=l({name:"PersonalEditPassword"}),g=Object.assign(f,{setup(l){const i=t(),f=p(),{proxy:g}=c(),h=s(),v=r({password:"",newpassword:"",checkpassword:""}),b=r({password:[{required:!0,message:"请输入原密码",trigger:"blur"}],newpassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}],checkpassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{validator:(e,a,l)=>{a!==v.value.newpassword?l(new Error("请确认新密码")):l()}}]});function _(){g.$refs.formRef.validate((e=>{e&&h.editPassword(v.value).then((()=>{g.$message({type:"success",message:"模拟修改成功，请重新登录"}),h.logout().then((()=>{f.push({name:"login",query:{redirect:i.fullPath}})}))})).catch((()=>{}))}))}return(l,s)=>{const r=a,t=n("el-input"),p=n("el-form-item"),i=n("el-form"),c=n("el-col"),f=n("el-row"),g=n("el-button"),h=e;return m(),o("div",null,[d(h,null,{action:u((()=>[d(g,{type:"primary",size:"large",onClick:_},{default:u((()=>[w])),_:1})])),default:u((()=>[d(r,{title:"修改密码",content:"定期修改密码可以提高帐号安全性噢~"}),d(f,null,{default:u((()=>[d(c,{md:24,lg:12},{default:u((()=>[d(i,{ref:"formRef",model:v.value,rules:b.value,"label-width":"120px"},{default:u((()=>[d(p,{label:"原密码",prop:"password"},{default:u((()=>[d(t,{modelValue:v.value.password,"onUpdate:modelValue":s[0]||(s[0]=e=>v.value.password=e),type:"password",placeholder:"请输入原密码"},null,8,["modelValue"])])),_:1}),d(p,{label:"新密码",prop:"newpassword"},{default:u((()=>[d(t,{modelValue:v.value.newpassword,"onUpdate:modelValue":s[1]||(s[1]=e=>v.value.newpassword=e),type:"password",placeholder:"请输入原密码"},null,8,["modelValue"])])),_:1}),d(p,{label:"确认新密码",prop:"checkpassword"},{default:u((()=>[d(t,{modelValue:v.value.checkpassword,"onUpdate:modelValue":s[2]||(s[2]=e=>v.value.checkpassword=e),type:"password",placeholder:"请输入原密码"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1})])),_:1})])}}});export{g as default};
