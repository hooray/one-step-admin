
/**
 * 由 Fantastic-admin-discovery 提供技术支持
 * https://hooray.gitee.io/fantastic-admin-discovery/
 * Powered by Fantastic-admin-discovery
 * https://hooray.github.io/fantastic-admin-discovery/
 */
    
import{_ as U}from"./index.7fb28950.js";import{a1 as D,u as E,a2 as H,a4 as T,h as K,w as B,aa as q,r as z,o as u,I as h,J as s,S as m,l as $,R as g,Y as M,X as V,U as j,i as R,M as A,Q as N,k as x,T as d,O as F,P as J,m as P}from"./vendor.6b4522dc.js";import{_ as Q}from"./plugin-vue_export-helper.5a098b48.js";const C=f=>(F("data-v-f24c6240"),f=f(),J(),f),X={class:"container"},Y={class:"tips"},G=C(()=>s("div",{class:"tip"},[s("span",null,"Alt"),d("+"),s("span",null,"S"),d(" \u5524\u9192\u641C\u7D22\u9762\u677F ")],-1)),W={class:"tip"},Z=d(" \u5207\u6362\u641C\u7D22\u7ED3\u679C "),ee={class:"tip"},se=d(" \u8BBF\u95EE\u9875\u9762 "),te=C(()=>s("div",{class:"tip"},[s("span",null,"ESC"),d(" \u9000\u51FA ")],-1)),ne=["onClick","onMouseover"],ae={class:"icon"},oe={class:"info"},le={class:"title"},ie={class:"breadcrumb"},re=C(()=>s("i",{class:"el-icon-arrow-right"},null,-1)),ce=D({name:"Search"});function ue(f){const{proxy:e}=P(),y=E(),I=H("generateI18nTitle"),i=T(!1),v=T(""),t=T(-1),r=K(()=>{let n=[];return n=Object.values(y.getters["menu/flatMenu"]).filter(o=>{let p=!1;return o.title.indexOf(v.value)>=0&&(p=!0),o.breadcrumbNeste.some(c=>c.title.indexOf(v.value)>=0)&&(p=!0),p}),n});B(()=>i.value,n=>{n?(document.querySelector("body").classList.add("hidden"),e.$refs.search.scrollTop=0,e.$hotkeys("up",b),e.$hotkeys("down",k),e.$hotkeys("enter",w),setTimeout(()=>{e.$refs.input.$el.children[0].focus()},100)):(document.querySelector("body").classList.remove("hidden"),e.$hotkeys.unbind("up",b),e.$hotkeys.unbind("down",k),e.$hotkeys.unbind("enter",w),setTimeout(()=>{v.value="",t.value=-1},500))}),B(()=>r.value,()=>{t.value=-1,S(0)}),q(()=>{e.$eventBus.on("global-search-toggle",()=>{i.value=!i.value}),e.$hotkeys("alt+s",n=>{y.state.settings.enableNavSearch&&y.state.window.list.every(o=>!o.isMaximize)&&(n.preventDefault(),i.value=!0)})});function b(){r.value.length&&(t.value-=1,t.value<0&&(t.value=r.value.length-1),S(e.$refs[`search-item-${t.value}`].offsetTop))}function k(){r.value.length&&(t.value+=1,t.value>r.value.length-1&&(t.value=0),S(e.$refs[`search-item-${t.value}`].offsetTop))}function w(){t.value!==-1&&e.$refs[`search-item-${t.value}`].click()}function S(n){t.value!==-1&&(n+e.$refs[`search-item-${t.value}`].clientHeight>e.$refs.search.scrollTop+e.$refs.search.clientHeight||n+e.$refs[`search-item-${t.value}`].clientHeight<=e.$refs.search.scrollTop)&&e.$refs.search.scrollTo({top:n,behavior:"smooth"})}function O(n){/^(https?:|mailto:|tel:)/.test(n)?window.open(n):e.$window.add(n)}return(n,o)=>{const p=z("el-input"),c=U;return u(),h("div",{id:"search",class:j({searching:i.value}),onClick:o[3]||(o[3]=a=>i.value&&n.$eventBus.emit("global-search-toggle"))},[s("div",X,[s("div",{class:"search-box",onClick:o[2]||(o[2]=m(()=>{},["stop"]))},[$(p,{ref:(a,l)=>{l.input=a},modelValue:v.value,"onUpdate:modelValue":o[0]||(o[0]=a=>v.value=a),"prefix-icon":"el-icon-search",placeholder:"\u641C\u7D22\u9875\u9762\uFF0C\u652F\u6301\u6807\u9898\u3001URL\u6A21\u7CCA\u67E5\u8BE2",clearable:"",onKeydown:[o[1]||(o[1]=g(a=>n.$eventBus.emit("global-search-toggle"),["esc"])),g(m(b,["prevent"]),["up"]),g(m(k,["prevent"]),["down"]),g(m(w,["prevent"]),["enter"])]},null,8,["modelValue","onKeydown"]),s("div",Y,[G,s("div",W,[s("span",null,[$(c,{name:"search-up"})]),s("span",null,[$(c,{name:"search-down"})]),Z]),s("div",ee,[s("span",null,[$(c,{name:"search-enter"})]),se]),te])]),s("div",{ref:(a,l)=>{l.search=a},class:"result"},[(u(!0),h(M,null,V(x(r),(a,l)=>(u(),h("div",{key:a.path,ref:`search-item-${l}`,class:j(["item",{actived:l===t.value}]),onClick:_=>O(a.windowName),onMouseover:_=>t.value=l},[s("div",ae,[a.icon?(u(),R(c,{key:0,name:a.icon},null,8,["name"])):A("v-if",!0)]),s("div",oe,[s("div",le,N(x(I)(a.i18n,a.title)),1),s("div",ie,[(u(!0),h(M,null,V(a.breadcrumbNeste,(_,L)=>(u(),h("span",{key:L},[d(N(x(I)(_.i18n,_.title))+" ",1),re]))),128))])])],42,ne))),128))],512)])],2)}}const de=Object.assign(ce,{setup:ue});var fe=Q(de,[["__scopeId","data-v-f24c6240"]]);export{fe as default};
