
/**
 * 由 One-step-admin 提供技术支持
 * https://hooray.gitee.io/one-step-admin/
 * Powered by One-step-admin
 * https://hooray.github.io/one-step-admin/
 */
    
import{_ as e}from"./index.8868c02f.js";import{A as t,r as i,o as s,C as l,f as r,e as a,b as n,D as o,n as p,O as c,F as u,G as d,H as h,R as g}from"./vendor.2ae12b47.js";import{_ as f}from"./plugin-vue_export-helper.21dcd24c.js";const m={class:"upload-container"},v={class:"image-slot"},y={key:1,class:"image"},w={class:"mask"},x={class:"actions"},b=["onClick"],$=["onClick"],_={key:0,class:"el-upload__tip"},k={style:{display:"inline-block"}};var j=f({props:{action:{type:String,required:!0},headers:{type:Object,default:()=>{}},data:{type:Object,default:()=>{}},name:{type:String,default:"file"},url:{type:String,default:""},size:{type:Number,default:2},width:{type:Number,default:150},height:{type:Number,default:150},placeholder:{type:String,default:""},notip:{type:Boolean,default:!1},ext:{type:Array,default:()=>["jpg","png","gif","bmp"]}},emits:["update:url","on-success"],setup(f,{emit:j}){const V=f,{proxy:z}=g(),C=t({imageViewerVisible:!1,progress:{preview:"",percent:0}});function O(){C.value.imageViewerVisible=!0}function S(){C.value.imageViewerVisible=!1}function B(){j("update:url","")}function M(e){const t=e.name.split("."),i=t[t.length-1],s=V.ext.indexOf(i)>=0,l=e.size/1024/1024<V.size;return s||z.$message.error(`上传图片只支持 ${V.ext.join(" / ")} 格式！`),l||z.$message.error(`上传图片大小不能超过 ${V.size}MB！`),s&&l&&(C.value.progress.preview=URL.createObjectURL(e)),s&&l}function N(e){C.value.progress.percent=~~e.percent}function R(e){C.value.progress.preview="",C.value.progress.percent=0,j("on-success",e)}return(t,g)=>{const j=e,V=i("el-image"),z=i("el-icon-zoom-in"),A=i("el-icon"),L=i("el-icon-delete"),U=i("el-progress"),q=i("el-upload"),D=i("el-alert"),F=i("el-image-viewer");return s(),l("div",m,[r(q,{"show-file-list":!1,headers:f.headers,action:f.action,data:f.data,name:f.name,"before-upload":M,"on-progress":N,"on-success":R,drag:""},{default:a((()=>[""===f.url?(s(),n(V,{key:0,src:""===f.url?f.placeholder:f.url,style:p(`width:${f.width}px;height:${f.height}px;`),fit:"fill"},{error:a((()=>[o("div",v,[r(j,{name:"el-icon-plus"})])])),_:1},8,["src","style"])):(s(),l("div",y,[r(V,{src:f.url,style:p(`width:${f.width}px;height:${f.height}px;`),fit:"fill"},null,8,["src","style"]),o("div",w,[o("div",x,[o("span",{title:"预览",onClick:c(O,["stop"])},[r(A,null,{default:a((()=>[r(z)])),_:1})],8,b),o("span",{title:"移除",onClick:c(B,["stop"])},[r(A,null,{default:a((()=>[r(L)])),_:1})],8,$)])])])),u(o("div",{class:"progress",style:p(`width:${f.width}px;height:${f.height}px;`)},[r(V,{src:C.value.progress.preview,style:p(`width:${f.width}px;height:${f.height}px;`),fit:"fill"},null,8,["src","style"]),r(U,{type:"circle",width:.8*Math.min(f.width,f.height),percentage:C.value.progress.percent},null,8,["width","percentage"])],4),[[d,""===f.url&&C.value.progress.percent]])])),_:1},8,["headers","action","data","name"]),f.notip?h("v-if",!0):(s(),l("div",_,[o("div",k,[r(D,{title:`上传图片支持 ${f.ext.join(" / ")} 格式，且图片大小不超过 ${f.size}MB，建议图片尺寸为 ${f.width}*${f.height}`,type:"info","show-icon":"",closable:!1},null,8,["title"])])])),C.value.imageViewerVisible?(s(),n(F,{key:1,"url-list":[f.url],onClose:S},null,8,["url-list"])):h("v-if",!0)])}}},[["__scopeId","data-v-c67c2356"]]);export{j as _};
