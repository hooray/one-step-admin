
/**
 * 由 One-step-admin 提供技术支持
 * https://hooray.gitee.io/one-step-admin/
 * Powered by One-step-admin
 * https://hooray.github.io/one-step-admin/
 */
    
var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,i=(t,n,l)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[n]=l,r=(e,t)=>{for(var n in t||(t={}))o.call(t,n)&&i(e,n,t[n]);if(l)for(var n of l(t))a.call(t,n)&&i(e,n,t[n]);return e},s=(e,l)=>t(e,n(l));import{a0 as u,r as c,$ as d,bZ as v,am as g,w as b,h as f,v as p,g as m,ac as y,au as x,z as w,X as C,aK as k,av as L,b_ as h,ba as O}from"./index.b046d3e8.js";import{r as A,g as P,a as $}from"./style.3c5afb48.js";let j;const B=function(e={}){if(!x)return;const t=V(e);if(t.fullscreen&&j)return j;const n=function(e){let t;const n=c(!1),l=d(s(r({},e),{originalPosition:"",originalOverflow:"",visible:!1}));function o(){const e=l.parent;if(!e.vLoadingAddClassList){let t=e.getAttribute("loading-number");t=Number.parseInt(t)-1,t?e.setAttribute("loading-number",t.toString()):(A(e,"el-loading-parent--relative"),e.removeAttribute("loading-number")),A(e,"el-loading-parent--hidden")}a(),x.unmount()}function a(){var e,t;null==(t=null==(e=w.$el)?void 0:e.parentNode)||t.removeChild(w.$el)}function i(){n.value&&(n.value=!1,o())}const x=v({name:"ElLoading",setup:()=>()=>{const e=l.spinner||l.svg,t=g("svg",r({class:"circular",viewBox:l.svgViewBox?l.svgViewBox:"25 25 50 50"},e?{innerHTML:e}:{}),[g("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none"})]),n=l.text?g("p",{class:"el-loading-text"},[l.text]):void 0;return g(y,{name:"el-loading-fade",onAfterLeave:i},{default:b((()=>[f(m("div",{style:{backgroundColor:l.background||""},class:["el-loading-mask",l.customClass,l.fullscreen?"is-fullscreen":""]},[g("div",{class:"el-loading-spinner"},[t,n])]),[[p,l.visible]])]))})}}),w=x.mount(document.createElement("div"));return s(r({},u(l)),{setText:function(e){l.text=e},remvoeElLoadingChild:a,close:function(){var a;e.beforeClose&&!e.beforeClose()||(l.parent.vLoadingAddClassList=void 0,n.value=!0,clearTimeout(t),t=window.setTimeout((()=>{n.value&&(n.value=!1,o())}),400),l.visible=!1,null==(a=e.closed)||a.call(e))},handleAfterLeave:i,vm:w,get $el(){return w.$el}})}(s(r({},t),{closed:()=>{var e;null==(e=t.closed)||e.call(t),t.fullscreen&&(j=void 0)}}));E(t,t.parent,n),I(t,t.parent,n),t.parent.vLoadingAddClassList=()=>I(t,t.parent,n);let l=t.parent.getAttribute("loading-number");return l=l?`${Number.parseInt(l)+1}`:"1",t.parent.setAttribute("loading-number",l),t.parent.appendChild(n.$el),w((()=>n.visible.value=t.visible)),t.fullscreen&&(j=n),n},V=e=>{var t,n,l,o;let a;return a=C(e.target)?null!=(t=document.querySelector(e.target))?t:document.body:e.target||document.body,{parent:a===document.body||e.body?document.body:a,background:e.background||"",svg:e.svg||"",svgViewBox:e.svgViewBox||"",spinner:e.spinner||!1,text:e.text||"",fullscreen:a===document.body&&(null==(n=e.fullscreen)||n),lock:null!=(l=e.lock)&&l,customClass:e.customClass||"",visible:null==(o=e.visible)||o,target:a}},E=async(e,t,n)=>{const{nextZIndex:l}=k(),o={};if(e.fullscreen)n.originalPosition.value=P(document.body,"position"),n.originalOverflow.value=P(document.body,"overflow"),o.zIndex=l();else if(e.parent===document.body){n.originalPosition.value=P(document.body,"position"),await w();for(const t of["top","left"]){const n="top"===t?"scrollTop":"scrollLeft";o[t]=e.target.getBoundingClientRect()[t]+document.body[n]+document.documentElement[n]-Number.parseInt(P(document.body,`margin-${t}`),10)+"px"}for(const t of["height","width"])o[t]=`${e.target.getBoundingClientRect()[t]}px`}else n.originalPosition.value=P(t,"position");for(const[a,i]of Object.entries(o))n.$el.style[a]=i},I=(e,t,n)=>{"absolute"!==n.originalPosition.value&&"fixed"!==n.originalPosition.value?$(t,"el-loading-parent--relative"):A(t,"el-loading-parent--relative"),e.fullscreen&&e.lock?$(t,"el-loading-parent--hidden"):A(t,"el-loading-parent--hidden")},T=Symbol("ElLoading"),N=(e,t)=>{var n,l,o,a;const i=t.instance,r=e=>L(t.value)?t.value[e]:void 0,s=t=>(e=>{const t=C(e)&&(null==i?void 0:i[e])||e;return t?c(t):t})(r(t)||e.getAttribute(`element-loading-${h(t)}`)),u=null!=(n=r("fullscreen"))?n:t.modifiers.fullscreen,d={text:s("text"),svg:s("svg"),svgViewBox:s("svgViewBox"),spinner:s("spinner"),background:s("background"),customClass:s("customClass"),fullscreen:u,target:null!=(l=r("target"))?l:u?void 0:e,body:null!=(o=r("body"))?o:t.modifiers.body,lock:null!=(a=r("lock"))?a:t.modifiers.lock};e[T]={options:d,instance:B(d)}},S={mounted(e,t){t.value&&N(e,t)},updated(e,t){const n=e[T];t.oldValue!==t.value&&(t.value&&!t.oldValue?N(e,t):t.value&&t.oldValue?L(t.value)&&((e,t)=>{for(const n of Object.keys(t))O(t[n])&&(t[n].value=e[n])})(t.value,n.options):null==n||n.instance.close())},unmounted(e){var t;null==(t=e[T])||t.instance.close()}};export{B as L,S as v};
