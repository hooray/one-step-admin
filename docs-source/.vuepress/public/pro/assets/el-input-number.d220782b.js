
/**
 * 由 One-step-admin 提供技术支持
 * Powered by One-step-admin
 * https://one-step-admin.netlify.app
 * 代码仓库
 * Gitee  https://gitee.com/hooray/one-step-admin
 * Github https://github.com/hooray/one-step-admin
 */
    
import{d as e,ap as a,n,c as t,e as l,O as r,Q as u,ak as s,E as i,r as o,Y as d,V as m,C as p,aP as c,W as b,o as f,a4 as v,a0 as N,T as h,aA as g,bt as V,g as y,$ as I,q as x,b as w,w as S,i as A,j as F,x as j,ad as k}from"./index.0a5e3bc2.js";import{E}from"./el-input.3dbe719d.js";import{i as C}from"./isNil.aac33454.js";import{R as D}from"./index2.32130bcb.js";import{u as B}from"./index2.6a73fda0.js";import{a as z}from"./index2.fa2fe4ab.js";import{d as M}from"./error2.1d524120.js";import{u as R,c as _}from"./index2.f37a6952.js";import{a as O}from"./arrow-up.72ffa464.js";import{a as P}from"./arrow-down.2c5054c4.js";import{p as T}from"./plus.d444f507.js";const K=e({name:"Minus"}),$={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Y=[l("path",{fill:"currentColor",d:"M128 544h768a32 32 0 1 0 0-64H128a32 32 0 0 0 0 64z"},null,-1)];const q=e({name:"ElInputNumber",components:{ElInput:E,ElIcon:i,ArrowUp:O,ArrowDown:P,Plus:T,Minus:a(K,[["render",function(e,a,l,r,u,s){return n(),t("svg",$,Y)}]])},directives:{RepeatClick:D},props:r({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:{type:Boolean,default:!1},max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:{type:Number},disabled:{type:Boolean,default:!1},size:{type:String,values:u},controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:e=>null===e||s(e)||["min","max"].includes(e),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:e=>e>=0&&e===Number.parseInt(`${e}`,10)}}),emits:{change:(e,a)=>e!==a,blur:e=>e instanceof FocusEvent,focus:e=>e instanceof FocusEvent,input:e=>s(e)||C(e),"update:modelValue":e=>s(e)||C(e)},setup(e,{emit:a}){const n=o(),t=d({currentValue:e.modelValue,userInput:null}),{t:l}=B(),{formItem:r}=z(),u=m("input-number"),i=p((()=>s(e.modelValue)&&A(e.modelValue,-1)<e.min)),N=p((()=>s(e.modelValue)&&A(e.modelValue)>e.max)),g=p((()=>{const a=S(e.step);return c(e.precision)?Math.max(S(e.modelValue),a):(e.precision,e.precision)})),V=p((()=>e.controls&&"right"===e.controlsPosition)),y=R(),I=_(),x=p((()=>{if(null!==t.userInput)return t.userInput;let a=t.currentValue;if(C(a))return"";if(s(a)){if(Number.isNaN(a))return"";c(e.precision)||(a=a.toFixed(e.precision))}return a})),w=(e,a)=>{c(a)&&(a=g.value);const n=e.toString().split(".");if(n.length>1){const e=n[0],t=Math.round(+n[1]/10**(n[1].length-a));return Number.parseFloat(`${e}.${t}`)}return Number.parseFloat(""+Math.round(e*10**a)/10**a)},S=e=>{if(C(e))return 0;const a=e.toString(),n=a.indexOf(".");let t=0;return-1!==n&&(t=a.length-n-1),t},A=(a,n=1)=>s(a)?w(a+e.step*n):t.currentValue,F=(n,t)=>{const{max:l,min:r,step:u,precision:s,stepStrictly:i,valueOnClear:o}=e;let d=Number(n);if(C(n)||Number.isNaN(d))return null;if(""===n){if(null===o)return null;d=h(o)?{min:r,max:l}[o]:o}return i&&(d=Math.round(d/u)*u),c(s)||(d=w(d,s)),(d>l||d<r)&&(d=d>l?l:r,t&&a("update:modelValue",d)),d},j=e=>{var n;const l=t.currentValue,u=F(e);l!==u&&(t.userInput=null,a("update:modelValue",u),a("input",u),a("change",u,l),null==(n=null==r?void 0:r.validate)||n.call(r,"change").catch((e=>M())),t.currentValue=u)};return b((()=>e.modelValue),(e=>{t.currentValue=F(e,!0),t.userInput=null}),{immediate:!0}),f((()=>{var l;const{min:r,max:u,modelValue:i}=e,o=null==(l=n.value)?void 0:l.input;if(o.setAttribute("role","spinbutton"),Number.isFinite(u)?o.setAttribute("aria-valuemax",String(u)):o.removeAttribute("aria-valuemax"),Number.isFinite(r)?o.setAttribute("aria-valuemin",String(r)):o.removeAttribute("aria-valuemin"),o.setAttribute("aria-valuenow",String(t.currentValue)),o.setAttribute("aria-disabled",String(I.value)),!s(i)&&null!=i){let e=Number(i);Number.isNaN(e)&&(e=null),a("update:modelValue",e)}})),v((()=>{var e;const a=null==(e=n.value)?void 0:e.input;null==a||a.setAttribute("aria-valuenow",t.currentValue)})),{t:l,input:n,displayValue:x,handleInput:e=>t.userInput=e,handleInputChange:e=>{const a=""!==e?Number(e):"";(s(a)&&!Number.isNaN(a)||""===e)&&j(a),t.userInput=null},controlsAtRight:V,decrease:()=>{if(I.value||i.value)return;const a=e.modelValue||0,n=A(a,-1);j(n)},increase:()=>{if(I.value||N.value)return;const a=e.modelValue||0,n=A(a);j(n)},inputNumberSize:y,inputNumberDisabled:I,maxDisabled:N,minDisabled:i,focus:()=>{var e,a;null==(a=null==(e=n.value)?void 0:e.focus)||a.call(e)},blur:()=>{var e,a;null==(a=null==(e=n.value)?void 0:e.blur)||a.call(e)},handleFocus:e=>{a("focus",e)},handleBlur:e=>{var n;a("blur",e),null==(n=null==r?void 0:r.validate)||n.call(r,"blur").catch((e=>M()))},ns:u}}}),G=["aria-label"],H=["aria-label"];const Q=k(N(q,[["render",function(e,a,l,r,u,s){const i=g("arrow-down"),o=g("minus"),d=g("el-icon"),m=g("arrow-up"),p=g("plus"),c=g("el-input"),b=V("repeat-click");return n(),t("div",{class:I([e.ns.b(),e.ns.m(e.inputNumberSize),e.ns.is("disabled",e.inputNumberDisabled),e.ns.is("without-controls",!e.controls),e.ns.is("controls-right",e.controlsAtRight)]),onDragstart:a[2]||(a[2]=j((()=>{}),["prevent"]))},[e.controls?y((n(),t("span",{key:0,role:"button","aria-label":e.t("el.inputNumber.decrease"),class:I([e.ns.e("decrease"),e.ns.is("disabled",e.minDisabled)]),onKeydown:a[0]||(a[0]=x(((...a)=>e.decrease&&e.decrease(...a)),["enter"]))},[w(d,null,{default:S((()=>[e.controlsAtRight?(n(),A(i,{key:0})):(n(),A(o,{key:1}))])),_:1})],42,G)),[[b,e.decrease]]):F("v-if",!0),e.controls?y((n(),t("span",{key:1,role:"button","aria-label":e.t("el.inputNumber.increase"),class:I([e.ns.e("increase"),e.ns.is("disabled",e.maxDisabled)]),onKeydown:a[1]||(a[1]=x(((...a)=>e.increase&&e.increase(...a)),["enter"]))},[w(d,null,{default:S((()=>[e.controlsAtRight?(n(),A(m,{key:0})):(n(),A(p,{key:1}))])),_:1})],42,H)),[[b,e.increase]]):F("v-if",!0),w(c,{id:e.id,ref:"input",type:"number",step:e.step,"model-value":e.displayValue,placeholder:e.placeholder,disabled:e.inputNumberDisabled,size:e.inputNumberSize,max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onKeydown:[x(j(e.increase,["prevent"]),["up"]),x(j(e.decrease,["prevent"]),["down"])],onBlur:e.handleBlur,onFocus:e.handleFocus,onInput:e.handleInput,onChange:e.handleInputChange},null,8,["id","step","model-value","placeholder","disabled","size","max","min","name","label","onKeydown","onBlur","onFocus","onInput","onChange"])],34)}],["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]));export{Q as E};
