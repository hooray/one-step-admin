
/**
 * 由 One-step-admin 提供技术支持
 * https://hooray.gitee.io/one-step-admin/
 * Powered by One-step-admin
 * https://hooray.github.io/one-step-admin/
 */
    
var pe=Object.defineProperty,fe=Object.defineProperties;var ge=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var ve=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable;var F=(_,d,c)=>d in _?pe(_,d,{enumerable:!0,configurable:!0,writable:!0,value:c}):_[d]=c,O=(_,d)=>{for(var c in d||(d={}))ve.call(d,c)&&F(_,c,d[c]);if(T)for(var c of T(d))be.call(d,c)&&F(_,c,d[c]);return _},Y=(_,d)=>fe(_,ge(d));import{_ as he}from"./index.9c5003e6.js";import{_ as xe}from"./index.ab111d0f.js";import{_ as ye}from"./index.31e0acad.js";import{_ as we}from"./index.b6506317.js";import{_ as Ve}from"./index.39b8376e.js";import{r as G,T as H,x as i,an as J,U as D,o as h,j as K,A as e,z as a,_ as m,B,t as Q,y as w,u as x,af as W,l as P,ae as X,k as $e,i as Ce,Y as N,V as ke}from"./vendor.a8203abd.js";import{u as Ue}from"./pagination.bf4c7045.js";import{_ as I}from"./index.c3034165.js";const ze=m("\u4FDD\u5BC6"),Me=m("\u7537"),Le=m("\u5973"),Pe={props:{id:{type:[Number,String],default:""}},setup(_,{expose:d}){const c=_,{proxy:v}=B(),l=G({loading:!1,form:{id:c.id,account:"",name:"",mobile:"",sex:"2"},rules:{account:[{required:!0,message:"\u8BF7\u8F93\u5165\u5E10\u53F7",trigger:"blur"}],name:[{required:!0,message:"\u8BF7\u8F93\u5165\u59D3\u540D",trigger:"blur"}],mobile:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7",trigger:"blur"},{validator:(u,o,r)=>{let f={key:"mobile",value:o};l.value.form.id!=""&&(f.id=l.value.form.id),v.$api.get("pages_example/manager/check",{baseURL:"/mock/",params:f}).then(b=>{b.data.exist?r(new Error("\u624B\u673A\u53F7\u5DF2\u5B58\u5728")):r()})},trigger:"blur"}]}});H(()=>{l.value.form.id!=""&&$()});function $(){l.value.loading=!0,v.$api.get("pages_example/manager/detail",{baseURL:"/mock/",params:{id:l.value.form.id}}).then(u=>{l.value.loading=!1,l.value.form.account=u.data.account,l.value.form.name=u.data.name,l.value.form.mobile=u.data.mobile})}return d({submit(u){l.value.form.id==""?v.$refs.form.validate(o=>{o&&v.$api.post("pages_example/manager/create",l.value.form,{baseURL:"/mock/"}).then(()=>{v.$message.success({message:"\u6A21\u62DF\u65B0\u589E\u6210\u529F",center:!0}),u&&u()})}):v.$refs.form.validate(o=>{o&&v.$api.post("pages_example/manager/edit",l.value.form,{baseURL:"/mock/"}).then(()=>{v.$message.success({message:"\u6A21\u62DF\u7F16\u8F91\u6210\u529F",center:!0}),u&&u()})})}}),(u,o)=>{const r=i("el-input"),f=i("el-form-item"),b=i("el-radio-button"),C=i("el-radio-group"),k=i("el-form"),g=J("loading");return D((h(),K("div",null,[e(k,{ref:(p,S)=>{S.form=p},model:l.value.form,rules:l.value.rules,"label-width":"120px","label-suffix":"\uFF1A"},{default:a(()=>[e(f,{label:"\u5E10\u53F7",prop:"account"},{default:a(()=>[e(r,{modelValue:l.value.form.account,"onUpdate:modelValue":o[0]||(o[0]=p=>l.value.form.account=p),placeholder:"\u8BF7\u8F93\u5165\u5E10\u53F7"},null,8,["modelValue"])]),_:1}),e(f,{label:"\u59D3\u540D",prop:"name"},{default:a(()=>[e(r,{modelValue:l.value.form.name,"onUpdate:modelValue":o[1]||(o[1]=p=>l.value.form.name=p),placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D"},null,8,["modelValue"])]),_:1}),e(f,{label:"\u624B\u673A\u53F7",prop:"mobile"},{default:a(()=>[e(r,{modelValue:l.value.form.mobile,"onUpdate:modelValue":o[2]||(o[2]=p=>l.value.form.mobile=p),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"},null,8,["modelValue"])]),_:1}),e(f,{label:"\u6027\u522B",prop:"sex"},{default:a(()=>[e(C,{modelValue:l.value.form.sex,"onUpdate:modelValue":o[3]||(o[3]=p=>l.value.form.sex=p),size:"small"},{default:a(()=>[e(b,{label:"2"},{default:a(()=>[ze]),_:1}),e(b,{label:"1"},{default:a(()=>[Me]),_:1}),e(b,{label:"0"},{default:a(()=>[Le]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])],512)),[[g,l.value.loading]])}}};var E=I(Pe,[["__scopeId","data-v-aa80d99c"]]);const Se=m("\u53D6 \u6D88"),je=m("\u786E \u5B9A"),Re={class:"buttons"},De=m("\u53D6 \u6D88"),Ke=m("\u786E \u5B9A"),Be={props:Y(O({},E.props),{modelValue:{type:Boolean,default:!1},mode:{type:String,default:"dialog",validator:_=>["dialog","drawer"].includes(_)}}),emits:["update:modelValue","success"],setup(_,{emit:d}){const c=_,{proxy:v}=B();let l=Q({get:function(){return c.modelValue},set:function(r){d("update:modelValue",r)}});const $=Q(()=>c.id==""?"\u65B0\u589E\u7BA1\u7406\u5458":"\u7F16\u8F91\u7BA1\u7406\u5458");function u(){v.$refs.form.submit(()=>{d("success"),o()})}function o(){l.value=!1}return(r,f)=>{const b=i("el-button"),C=i("el-dialog"),k=i("el-drawer");return h(),K("div",null,[c.mode==="dialog"?(h(),w(C,{key:0,modelValue:x(l),"onUpdate:modelValue":f[0]||(f[0]=g=>W(l)?l.value=g:l=g),title:x($),width:"600px","close-on-click-modal":!1,"append-to-body":"","destroy-on-close":""},{footer:a(()=>[e(b,{onClick:o},{default:a(()=>[Se]),_:1}),e(b,{type:"primary",onClick:u},{default:a(()=>[je]),_:1})]),default:a(()=>[e(E,X({ref:(g,p)=>{p.form=g}},r.$props),null,16)]),_:1},8,["modelValue","title"])):c.mode==="drawer"?(h(),w(k,{key:1,modelValue:x(l),"onUpdate:modelValue":f[1]||(f[1]=g=>W(l)?l.value=g:l=g),title:x($),size:"600px","close-on-click-modal":!1,"custom-class":"form-mode-drawer","destroy-on-close":""},{default:a(()=>[e(E,X({ref:(g,p)=>{p.form=g}},r.$props,{class:"form-container"}),null,16),$e("div",Re,[e(b,{onClick:o},{default:a(()=>[De]),_:1}),e(b,{type:"primary",onClick:u},{default:a(()=>[Ke]),_:1})])]),_:1},8,["modelValue","title"])):P("v-if",!0)])}}};var Ne=I(Be,[["__scopeId","data-v-192da507"]]);const Ie=m("\u65B0\u589E\u7BA1\u7406\u5458"),Ee=m("\u5168\u90E8"),qe=m("\u7537"),Ae=m("\u5973"),Te=m("\u4FDD\u5BC6"),Fe=m("\u7B5B \u9009"),Oe=m("\u6279\u91CF\u64CD\u4F5C"),Ye=m("\u7537"),Ge=m("\u5973"),He=m("\u4FDD\u5BC6"),Je=m("\u7F16\u8F91"),Qe=m(" \u66F4\u591A\u64CD\u4F5C "),We=m("\u91CD\u7F6E\u5BC6\u7801"),Xe=m("\u5220\u9664"),Ze=Ce({name:"PagesExampleManagerList"});function eo(_){const{pagination:d,getParams:c,onSizeChange:v,onCurrentChange:l,onSortChange:$}=Ue(),{proxy:u}=B(),o=G({loading:!1,formMode:"dialog",formModeProps:{visible:!1,id:""},search:{account:"",name:"",mobile:"",sex:""},searchMore:!1,batch:{enable:!0,selectionDataList:[]},dataList:[]});H(()=>{r()});function r(){o.value.loading=!0;let n=c();o.value.search.account&&(n.account=o.value.search.account),o.value.search.name&&(n.name=o.value.search.name),o.value.search.mobile&&(n.mobile=o.value.search.mobile),o.value.search.sex!=""&&(n.sex=o.value.search.sex),u.$api.get("pages_example/manager/list",{baseURL:"/mock/",params:n}).then(t=>{o.value.loading=!1,o.value.dataList=t.data.list,d.value.total=t.data.total})}function f(n){v(n).then(()=>r())}function b(n){l(n).then(()=>r())}function C(n,t){$(n,t).then(()=>r())}function k(){o.value.formModeProps.id="",o.value.formModeProps.visible=!0}function g(n){o.value.formModeProps.id=n.id,o.value.formModeProps.visible=!0}function p(n,t){u.$confirm(`\u786E\u8BA4${n?"\u542F\u7528":"\u505C\u7528"}\u300C${t.account}\u300D\u5417\uFF1F`,"\u786E\u8BA4\u4FE1\u606F").then(()=>{u.$api.post("pages_example/manager/change/status",{id:t.id,status:n},{baseURL:"/mock/"}).then(()=>{u.$message.success({message:`\u6A21\u62DF${n?"\u542F\u7528":"\u505C\u7528"}\u6210\u529F`,center:!0})})}).catch(()=>{t.status=!n})}function S(n){u.$confirm(`\u786E\u8BA4\u5C06\u300C${n.account}\u300D\u7684\u5BC6\u7801\u91CD\u7F6E\u4E3A \u201C123456\u201D \u5417\uFF1F`,"\u786E\u8BA4\u4FE1\u606F").then(()=>{u.$api.post("pages_example/manager/password/reset",{id:n.id},{baseURL:"/mock/"}).then(()=>{u.$message.success({message:"\u6A21\u62DF\u91CD\u7F6E\u6210\u529F",center:!0})})}).catch(()=>{})}function Z(n){u.$confirm(`\u786E\u8BA4\u5220\u9664\u300C${n.account}\u300D\u7BA1\u7406\u5458\u5417\uFF1F`,"\u786E\u8BA4\u4FE1\u606F").then(()=>{u.$api.post("pages_example/manager/delete",{id:n.id},{baseURL:"/mock/"}).then(()=>{r(),u.$message.success({message:"\u6A21\u62DF\u5220\u9664\u6210\u529F",center:!0})})}).catch(()=>{})}function ee(n,t){switch(n){case"resetPassword":S(t);break;case"delete":Z(t);break}}return(n,t)=>{const oe=Ve,U=i("el-button"),j=i("el-input"),z=i("el-form-item"),M=i("el-col"),q=i("el-row"),L=i("el-radio-button"),ae=i("el-radio-group"),le=i("el-form"),te=we,ne=ye,V=i("el-table-column"),R=i("el-tag"),se=i("el-switch"),re=xe,A=i("el-dropdown-item"),de=i("el-dropdown-menu"),ue=i("el-dropdown"),ie=i("el-table"),me=i("el-pagination"),ce=he,_e=J("loading");return h(),K("div",null,[e(oe,{title:"\u7BA1\u7406\u5458\u7BA1\u7406",content:"\u9875\u9762\u6570\u636E\u4E3A Mock \u793A\u4F8B\u6570\u636E\uFF0C\u975E\u771F\u5B9E\u6570\u636E\u3002"}),e(ce,null,{default:a(()=>[e(U,{type:"primary",icon:"el-icon-plus",onClick:k},{default:a(()=>[Ie]),_:1}),e(te,{"show-more":"",onToggle:t[4]||(t[4]=s=>o.value.searchMore=s)},{default:a(()=>[e(le,{model:o.value.search,size:"small","label-width":"100px","label-suffix":"\uFF1A"},{default:a(()=>[e(q,null,{default:a(()=>[e(M,{md:8},{default:a(()=>[e(z,{label:"\u5E10\u53F7"},{default:a(()=>[e(j,{modelValue:o.value.search.account,"onUpdate:modelValue":t[0]||(t[0]=s=>o.value.search.account=s),placeholder:"\u8BF7\u8F93\u5165\u5E10\u53F7\uFF0C\u652F\u6301\u6A21\u7CCA\u67E5\u8BE2",clearable:"",onKeydown:N(r,["enter"]),onClear:r},null,8,["modelValue","onKeydown"])]),_:1})]),_:1}),e(M,{md:8},{default:a(()=>[e(z,{label:"\u59D3\u540D"},{default:a(()=>[e(j,{modelValue:o.value.search.name,"onUpdate:modelValue":t[1]||(t[1]=s=>o.value.search.name=s),placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D\uFF0C\u652F\u6301\u6A21\u7CCA\u67E5\u8BE2",clearable:"",onKeydown:N(r,["enter"]),onClear:r},null,8,["modelValue","onKeydown"])]),_:1})]),_:1}),e(M,{md:8},{default:a(()=>[e(z,{label:"\u624B\u673A\u53F7"},{default:a(()=>[e(j,{modelValue:o.value.search.mobile,"onUpdate:modelValue":t[2]||(t[2]=s=>o.value.search.mobile=s),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7",clearable:"",onKeydown:N(r,["enter"]),onClear:r},null,8,["modelValue","onKeydown"])]),_:1})]),_:1})]),_:1}),D(e(q,null,{default:a(()=>[e(M,{md:8},{default:a(()=>[e(z,{label:"\u6027\u522B"},{default:a(()=>[e(ae,{modelValue:o.value.search.sex,"onUpdate:modelValue":t[3]||(t[3]=s=>o.value.search.sex=s),onChange:r},{default:a(()=>[e(L,{label:""},{default:a(()=>[Ee]),_:1}),e(L,{label:"1"},{default:a(()=>[qe]),_:1}),e(L,{label:"0"},{default:a(()=>[Ae]),_:1}),e(L,{label:"2"},{default:a(()=>[Te]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},512),[[ke,o.value.searchMore]]),e(z,null,{default:a(()=>[e(U,{type:"primary",icon:"el-icon-search",onClick:r},{default:a(()=>[Fe]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),o.value.batch.enable?(h(),w(ne,{key:0,data:o.value.dataList,"selection-data":o.value.batch.selectionDataList,onCheckAll:t[5]||(t[5]=s=>n.$refs.table.toggleAllSelection()),onCheckNull:t[6]||(t[6]=s=>n.$refs.table.clearSelection())},{default:a(()=>[e(U,{size:"small"},{default:a(()=>[Oe]),_:1})]),_:1},8,["data","selection-data"])):P("v-if",!0),D(e(ie,{ref:(s,y)=>{y.table=s},class:"list-table",data:o.value.dataList,border:"",stripe:"","highlight-current-row":"",onSortChange:C,onSelectionChange:t[7]||(t[7]=s=>o.value.batch.selectionDataList=s)},{default:a(()=>[o.value.batch.enable?(h(),w(V,{key:0,type:"selection",align:"center",fixed:""})):P("v-if",!0),e(V,{prop:"account",sortable:"",label:"\u5E10\u53F7"}),e(V,{prop:"name",label:"\u59D3\u540D",width:"100",align:"center"}),e(V,{prop:"sex",label:"\u6027\u522B",width:"100",align:"center"},{default:a(s=>[s.row.sex==1?(h(),w(R,{key:0,type:"success",size:"small"},{default:a(()=>[Ye]),_:1})):s.row.sex==0?(h(),w(R,{key:1,type:"warning",size:"small"},{default:a(()=>[Ge]),_:1})):(h(),w(R,{key:2,type:"info",size:"small"},{default:a(()=>[He]),_:1}))]),_:1}),e(V,{prop:"mobile",label:"\u624B\u673A\u53F7",width:"150",align:"center"}),e(V,{label:"\u72B6\u6001",width:"100",align:"center"},{default:a(s=>[e(se,{modelValue:s.row.status,"onUpdate:modelValue":y=>s.row.status=y,onChange:y=>p(y,s.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(V,{label:"\u64CD\u4F5C",width:"200",align:"center",fixed:"right"},{default:a(s=>[e(U,{type:"primary",size:"mini",plain:"",onClick:y=>g(s.row)},{default:a(()=>[Je]),_:2},1032,["onClick"]),e(ue,{onCommand:y=>ee(y,s.row)},{dropdown:a(()=>[e(de,null,{default:a(()=>[e(A,{command:"resetPassword"},{default:a(()=>[We]),_:1}),e(A,{command:"delete",divided:""},{default:a(()=>[Xe]),_:1})]),_:1})]),default:a(()=>[e(U,{size:"mini"},{default:a(()=>[Qe,e(re,{name:"el-icon-arrow-down"})]),_:1})]),_:2},1032,["onCommand"])]),_:1})]),_:1},8,["data"]),[[_e,o.value.loading]]),e(me,{"current-page":x(d).page,total:x(d).total,"page-size":x(d).size,"page-sizes":x(d).sizes,layout:x(d).layout,"hide-on-single-page":!1,class:"pagination",background:"",onCurrentChange:b,onSizeChange:f},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),["dialog","drawer"].includes(o.value.formMode)?(h(),w(Ne,{key:0,id:o.value.formModeProps.id,modelValue:o.value.formModeProps.visible,"onUpdate:modelValue":t[8]||(t[8]=s=>o.value.formModeProps.visible=s),mode:o.value.formMode,onSuccess:r},null,8,["id","modelValue","mode"])):P("v-if",!0)])}}const oo=Object.assign(Ze,{setup:eo});var co=I(oo,[["__scopeId","data-v-0c458eee"]]);export{co as default};
