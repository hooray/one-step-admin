
/**
 * 由 One-step-admin 提供技术支持
 * https://hooray.gitee.io/one-step-admin/
 * Powered by One-step-admin
 * https://hooray.github.io/one-step-admin/
 */
    
import{_ as R}from"./index.ef5f4349.js";import{aq as z,r as H,S as T,o as b,k as w,T as U,U as Z,B as G,Y as J,m as K,C as Q,A as p,x as tt}from"./vendor.18c32348.js";import{_ as j}from"./index.5c755cb6.js";import{_ as et}from"./index.da599f69.js";function L(t,o,l,e){return parseFloat((o-e*o/t+l).toFixed(2))}function ot(t){[...t.querySelectorAll("*")].forEach(o=>t.removeChild(o))}function lt(t){return t.value}function x(t,o){const l=document.createElementNS("http://www.w3.org/2000/svg",t);for(let e in o)l.setAttribute(e,o[e]);return l}function W(t,o,l){if(ot(t),o.length<=1)return;l=l||{},typeof o[0]=="number"&&(o=o.map(r=>({value:r})));const e=l.onmousemove,n=l.onmouseout,d="interactive"in l?l.interactive:!!e,c=l.spotRadius||2,a=c*2,C=l.cursorWidth||2,g=parseFloat(t.attributes["stroke-width"].value),B=l.fetch||lt,_=o.map(r=>B(r)),I=parseFloat(t.attributes.width.value)-a*2,y=parseFloat(t.attributes.height.value),E=y-g*2-a,D=Math.max(..._),i=-1e3,F=_.length-1,V=I/F,h=[],Y=L(D,E,g+c,_[0]);let S=`M${a} ${Y}`;_.forEach((r,f)=>{const s=f*V+a,u=L(D,E,g+c,r);h.push(Object.assign({},o[f],{index:f,x:s,y:u})),S+=` L ${s} ${u}`});const q=x("path",{class:"sparkline--line",d:S,fill:"none"});let M=`${S} V ${y} L ${a} ${y} Z`;const P=x("path",{class:"sparkline--fill",d:M,stroke:"none"});if(t.appendChild(P),t.appendChild(q),!d)return;const v=x("line",{class:"sparkline--cursor",x1:i,x2:i,y1:0,y2:y,"stroke-width":C}),k=x("circle",{class:"sparkline--spot",cx:i,cy:i,r:c});t.appendChild(v),t.appendChild(k);const $=x("rect",{width:t.attributes.width.value,height:t.attributes.height.value,style:"fill: transparent; stroke: transparent",class:"sparkline--interaction-layer"});t.appendChild($),$.addEventListener("mouseout",r=>{v.setAttribute("x1",i),v.setAttribute("x2",i),k.setAttribute("cx",i),n&&n(r)}),$.addEventListener("mousemove",r=>{const f=r.offsetX;let s=h.find(O=>O.x>=f);s||(s=h[F]);let u=h[h.indexOf(s)-1],m,N;u?(N=u.x+(s.x-u.x)/2,m=f>=N?s:u):m=s;const A=m.x,X=m.y;k.setAttribute("cx",A),k.setAttribute("cy",X),v.setAttribute("x1",A),v.setAttribute("x2",A),e&&e(r,m)})}const nt={class:"sparkline"},at=["width","height","stroke-width","stroke","fill"],rt={props:{value:{type:Array,require:!0},width:{type:Number,default:100},height:{type:Number,default:30},strokeWidth:{type:Number,default:3},strokeColor:{type:String,default:"#dc2b33"},fillColor:{type:String,default:"transparent"},cursorColor:{type:String,default:"#dc2b33"},spotColor:{type:String,default:"#dc2b33"},tooltip:{type:Boolean,default:!1}},setup(t){const o=t;z(n=>({acce1960:t.cursorColor,"30f3c5e4":t.spotColor}));const{proxy:l}=Q(),e=H({show:!1,content:"",top:0,left:0});return T(()=>{W(l.$refs.sparkline,o.value,o.tooltip&&{onmousemove:(n,d)=>{e.value.show=!0,e.value.content=d.tooltip,e.value.top=n.offsetY,e.value.left=n.offsetX+20},onmouseout:()=>{e.value.show=!1}})}),(n,d)=>(b(),w("div",nt,[(b(),w("svg",{ref_key:"sparkline",ref:W,width:t.width,height:t.height,"stroke-width":t.strokeWidth,stroke:t.strokeColor,fill:t.fillColor},null,8,at)),t.tooltip?U((b(),w("span",{key:0,class:"tooltip",style:G([`left: ${e.value.left}px`,`top: ${e.value.top}px`])},J(e.value.content),5)),[[Z,e.value.show]]):K("v-if",!0)]))}};var st=j(rt,[["__scopeId","data-v-52b2dc50"]]);const it={data(){return{value1:[1,5,2,4,8,3,7],value2:[{tooltip:"\u503C\uFF1A1",value:1},{tooltip:"\u503C\uFF1A3",value:3},{tooltip:"\u503C\uFF1A5",value:5},{tooltip:"\u503C\uFF1A8",value:8},{tooltip:"\u503C\uFF1A4",value:4},{tooltip:"\u503C\uFF1A6",value:6},{tooltip:"\u503C\uFF1A9",value:9}]}}};function ut(t,o,l,e,n,d){const c=et,a=st,C=R;return b(),w("div",null,[p(c,{title:"\u8FF7\u4F60\u56FE",content:"Sparkline"}),p(C,null,{default:tt(()=>[p(a,{value:n.value1},null,8,["value"]),p(a,{value:n.value1,"stroke-color":"#409eff","fill-color":"#b3d8ff"},null,8,["value"]),p(a,{value:n.value2,tooltip:""},null,8,["value"]),p(a,{value:n.value2,tooltip:"","stroke-color":"#409eff","fill-color":"#b3d8ff","cursor-color":"#e6a23c","spot-color":"#909399"},null,8,["value"])]),_:1})])}var ht=j(it,[["render",ut]]);export{ht as default};
