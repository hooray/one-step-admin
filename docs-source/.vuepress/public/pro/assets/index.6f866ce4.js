
/**
 * 由 One-step-admin 提供技术支持
 * https://hooray.gitee.io/one-step-admin/
 * Powered by One-step-admin
 * https://hooray.github.io/one-step-admin/
 */
    
var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,i=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t;import{_ as s}from"./index.fef54795.js";import{_ as u}from"./index.c3a964a2.js";import{_ as n}from"./index.dd537093.js";import{r,s as p,z as f,o as c,k as m,T as v,U as _,t as b,x as g,A as y,m as h,a2 as V,a1 as k,$ as w,Y as x,l as C,u as U,p as z,q as L,C as $,S as j,ap as P,af as O,ae as S,j as M,Z as R}from"./vendor.b0dde714.js";import{u as D}from"./usePagination.8a5b9704.js";import{_ as I}from"./index.6180104e.js";import{_ as A,h as N}from"./index.8d8a4cfe.js";const q=e=>(z("data-v-27d40fec"),e=e(),L(),e),B={key:0},E=w("编 辑"),K={key:0},T={key:0},Y={key:0},Z={key:0},F=w("删 除"),G=q((()=>C("span",null,null,-1))),H={key:0,style:{padding:"10px"}},J=w("新增一条运费模版"),Q=w("为指定地区设置运费模版"),W={class:"filter"},X=w("全部"),ee=w("华北地区"),le=w("东北地区"),ae=w("华东地区"),te=w("华中地区"),oe=w("华南地区"),de=w("西南地区"),ie=w("西北地区"),se=w("自治区"),ue=w("直辖市"),ne=w("确 定");var re=A({props:{readonly:{type:Boolean,default:!1},data:{type:Array,default:function(){return[]}},type:{type:Number,default:1}},emits:["update:data"],setup(e,{emit:l}){const a=e,{proxy:t}=$(),o=r({index:"",visible:!1,filter:"",checkList:[],disableList:[]}),d=p((()=>{let e;switch(o.value.filter){case"":e=N;break;case"autonomousRegion":e=N.filter((e=>e.autonomousRegion));break;case"provinceLevelCity":e=N.filter((e=>e.provinceLevelCity));break;default:e=N.filter((e=>e.region==o.value.filter))}return e}));function i(){o.value.index="",o.value.checkList=[],o.value.disableList=u(),o.value.visible=!0}function s(e){let l="";for(const a in N)N[a].code===e&&(l=N[a].name);return l}function u(e){let l=[];for(let t=0;t<a.data.length;t++)e!==t&&(l=l.concat(a.data[t].list));return l}return(n,r)=>{const p=f("el-tag"),z=f("el-col"),L=f("el-button"),$=f("el-row"),j=f("el-table-column"),P=f("el-input"),O=f("el-table"),S=f("el-radio-button"),M=f("el-radio-group"),R=f("el-checkbox"),D=f("el-checkbox-group"),I=f("el-dialog");return c(),m("div",null,[e.readonly&&0==e.data.length?h("v-if",!0):v((c(),b(O,{key:0,data:e.data,border:"",class:"freight"},{empty:g((()=>[G])),append:g((()=>[e.readonly?h("v-if",!0):(c(),m("div",H,[y(L,{type:"primary",size:"small",plain:"",style:{width:"100%"},onClick:i},{default:g((()=>[J])),_:1})]))])),default:g((()=>[y(j,{label:"运送到"},{default:g((t=>[e.readonly?(c(),m("div",B,[(c(!0),m(V,null,k(t.row.list,((e,l)=>(c(),b(p,{key:l,type:"info"},{default:g((()=>[w(x(s(e)),1)])),_:2},1024)))),128))])):(c(),b($,{key:1,type:"flex",align:"middle"},{default:g((()=>[y(z,null,{default:g((()=>[(c(!0),m(V,null,k(t.row.list,((e,o)=>(c(),b(p,{key:o,"disable-transitions":!0,type:"info",closable:"",onClose:o=>function(e,t){let o=a.data;o[e].list.splice(o[e].list.indexOf(t),1),0===o[e].list.length&&o.splice(e,1),l("update:data",o)}(t.$index,e)},{default:g((()=>[w(x(s(e)),1)])),_:2},1032,["onClose"])))),128))])),_:2},1024),y(z,{style:{width:"100px","text-align":"right"}},{default:g((()=>[y(L,{size:"small",plain:"",onClick:e=>{return l=t.$index,o.value.index=l,o.value.checkList=a.data[l].list,o.value.disableList=u(l),void(o.value.visible=!0);var l}},{default:g((()=>[E])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024))])),_:1}),y(j,{label:1==e.type?"首件数（件）":"首重量（kg）",width:"150",align:"center"},{default:g((l=>[e.readonly?(c(),m("span",K,x(l.row.first_step),1)):(c(),b(P,{key:1,modelValue:l.row.first_step,"onUpdate:modelValue":e=>l.row.first_step=e,size:"small"},null,8,["modelValue","onUpdate:modelValue"]))])),_:1},8,["label"]),y(j,{label:"首费（元）",width:"150",align:"center"},{default:g((l=>[e.readonly?(c(),m("span",T,x(l.row.first_price),1)):(c(),b(P,{key:1,modelValue:l.row.first_price,"onUpdate:modelValue":e=>l.row.first_price=e,size:"small"},null,8,["modelValue","onUpdate:modelValue"]))])),_:1}),y(j,{label:1==e.type?"续件数（件）":"续重量（kg）",width:"150",align:"center"},{default:g((l=>[e.readonly?(c(),m("span",Y,x(l.row.continued_step),1)):(c(),b(P,{key:1,modelValue:l.row.continued_step,"onUpdate:modelValue":e=>l.row.continued_step=e,size:"small"},null,8,["modelValue","onUpdate:modelValue"]))])),_:1},8,["label"]),y(j,{label:"续费（元）",width:"150",align:"center"},{default:g((l=>[e.readonly?(c(),m("span",Z,x(l.row.continued_price),1)):(c(),b(P,{key:1,modelValue:l.row.continued_price,"onUpdate:modelValue":e=>l.row.continued_price=e,size:"small"},null,8,["modelValue","onUpdate:modelValue"]))])),_:1}),e.readonly?h("v-if",!0):(c(),b(j,{key:0,label:"操作",width:"100",align:"center"},{default:g((e=>[y(L,{type:"danger",size:"small",plain:"",onClick:t=>function(e){let t=a.data;t.splice(e,1),l("update:data",t)}(e.$index)},{default:g((()=>[F])),_:2},1032,["onClick"])])),_:1}))])),_:1},8,["data"])),[[_,0!=e.data.length]]),e.readonly?h("v-if",!0):v((c(),b(L,{key:1,type:"primary",size:"small",plain:"",onClick:i},{default:g((()=>[Q])),_:1},512)),[[_,0==e.data.length]]),y(I,{modelValue:o.value.visible,"onUpdate:modelValue":r[3]||(r[3]=e=>o.value.visible=e),title:"选择地区",width:"800px",class:"freight-dialog","append-to-body":"",onClosed:r[4]||(r[4]=e=>o.value.filter="")},{footer:g((()=>[y(L,{type:"primary",onClick:r[2]||(r[2]=e=>function(e){if(0===o.value.checkList.length)t.$message({message:"请勾选区域",type:"warning"});else{let t=a.data;""!==e?t[e].list=o.value.checkList:t.push({list:o.value.checkList,first_step:"",first_price:"",continued_step:"",continued_price:""}),l("update:data",t),o.value.visible=!1}}(o.value.index))},{default:g((()=>[ne])),_:1})])),default:g((()=>[C("div",W,[y(M,{modelValue:o.value.filter,"onUpdate:modelValue":r[0]||(r[0]=e=>o.value.filter=e),size:"small"},{default:g((()=>[y(S,{label:""},{default:g((()=>[X])),_:1}),y(S,{label:"north"},{default:g((()=>[ee])),_:1}),y(S,{label:"northeast"},{default:g((()=>[le])),_:1}),y(S,{label:"east"},{default:g((()=>[ae])),_:1}),y(S,{label:"central"},{default:g((()=>[te])),_:1}),y(S,{label:"south"},{default:g((()=>[oe])),_:1}),y(S,{label:"southwest"},{default:g((()=>[de])),_:1}),y(S,{label:"northwest"},{default:g((()=>[ie])),_:1}),y(S,{label:"autonomousRegion"},{default:g((()=>[se])),_:1}),y(S,{label:"provinceLevelCity"},{default:g((()=>[ue])),_:1})])),_:1},8,["modelValue"])]),y(D,{modelValue:o.value.checkList,"onUpdate:modelValue":r[1]||(r[1]=e=>o.value.checkList=e),style:{"margin-left":"50px"}},{default:g((()=>[y($,null,{default:g((()=>[(c(!0),m(V,null,k(U(d),((e,l)=>(c(),b(z,{key:l,span:6},{default:g((()=>[y(R,{label:e.code,disabled:o.value.disableList.includes(e.code)},{default:g((()=>[w(x(e.name),1)])),_:2},1032,["label","disabled"])])),_:2},1024)))),128))])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-27d40fec"]]);const pe=w("按件数"),fe=w("按重量"),ce={class:"freight"},me=w("默认运费"),ve=w("首费"),_e=w("元"),be=w("续费"),ge=w("元"),ye=w("启用"),he=w("停用");var Ve=A({props:{id:{type:[Number,String],default:""}},setup(e,{expose:l}){const a=e,{proxy:t}=$(),o=r({loading:!1,form:{id:a.id,title:"",address:[],type:1,status:!0,first_step:"",first_price:"",continued_step:"",continued_price:"",infos:[]},rules:{title:[{required:!0,message:"请输入名称",trigger:"blur"}]}});return j((()=>{""!=o.value.form.id&&(o.value.loading=!0,t.$api.get("pages_example/delivery/detail",{baseURL:"/mock/",params:{id:o.value.form.id}}).then((e=>{o.value.loading=!1,Object.assign(o.value.form,e.data)})))})),l({submit(e){""==o.value.form.id?t.$refs.form.validate((l=>{l&&t.$api.post("pages_example/delivery/create",o.value.form,{baseURL:"/mock/"}).then((()=>{t.$message.success({message:"模拟新增成功",center:!0}),e&&e()}))})):t.$refs.form.validate((l=>{l&&t.$api.post("pages_example/delivery/edit",o.value.form,{baseURL:"/mock/"}).then((()=>{t.$message.success({message:"模拟编辑成功",center:!0}),e&&e()}))}))}}),(e,l)=>{const a=f("el-input"),t=f("el-form-item"),d=I,i=f("el-radio-button"),s=f("el-radio-group"),u=f("el-col"),n=f("el-row"),r=f("el-card"),p=f("el-form"),_=P("loading");return v((c(),m("div",null,[y(p,{ref:"form",model:o.value.form,rules:o.value.rules,"label-width":"120px","label-suffix":"："},{default:g((()=>[y(t,{label:"名称",prop:"title"},{default:g((()=>[y(a,{modelValue:o.value.form.title,"onUpdate:modelValue":l[0]||(l[0]=e=>o.value.form.title=e),placeholder:"请输入名称"},null,8,["modelValue"])])),_:1}),y(t,{label:"发货地址",prop:"address"},{default:g((()=>[y(d,{modelValue:o.value.form.address,"onUpdate:modelValue":l[1]||(l[1]=e=>o.value.form.address=e)},null,8,["modelValue"])])),_:1}),y(t,{label:"计价方式"},{default:g((()=>[y(s,{modelValue:o.value.form.type,"onUpdate:modelValue":l[2]||(l[2]=e=>o.value.form.type=e)},{default:g((()=>[y(i,{label:1},{default:g((()=>[pe])),_:1}),y(i,{label:2},{default:g((()=>[fe])),_:1})])),_:1},8,["modelValue"])])),_:1}),y(t,{label:"运费模版"},{default:g((()=>[C("div",ce,[y(r,{shadow:"never"},{header:g((()=>[me])),default:g((()=>[y(n,{gutter:20},{default:g((()=>[y(u,{md:6},{default:g((()=>[y(a,{modelValue:o.value.form.first_step,"onUpdate:modelValue":l[3]||(l[3]=e=>o.value.form.first_step=e),size:"small"},{prepend:g((()=>[w(x(1==o.value.form.type?"首件":"首重"),1)])),append:g((()=>[w(x(1==o.value.form.type?"件":"kg"),1)])),_:1},8,["modelValue"])])),_:1}),y(u,{md:6},{default:g((()=>[y(a,{modelValue:o.value.form.first_price,"onUpdate:modelValue":l[4]||(l[4]=e=>o.value.form.first_price=e),size:"small"},{prepend:g((()=>[ve])),append:g((()=>[_e])),_:1},8,["modelValue"])])),_:1}),y(u,{md:6},{default:g((()=>[y(a,{modelValue:o.value.form.continued_step,"onUpdate:modelValue":l[5]||(l[5]=e=>o.value.form.continued_step=e),size:"small"},{prepend:g((()=>[w(x(1==o.value.form.type?"续件":"续重"),1)])),append:g((()=>[w(x(1==o.value.form.type?"件":"kg"),1)])),_:1},8,["modelValue"])])),_:1}),y(u,{md:6},{default:g((()=>[y(a,{modelValue:o.value.form.continued_price,"onUpdate:modelValue":l[6]||(l[6]=e=>o.value.form.continued_price=e),size:"small"},{prepend:g((()=>[be])),append:g((()=>[ge])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),y(n,null,{default:g((()=>[y(u,{span:24},{default:g((()=>[y(re,{data:o.value.form.infos,type:o.value.form.type},null,8,["data","type"])])),_:1})])),_:1})])])),_:1}),y(t,{label:"是否启用"},{default:g((()=>[y(s,{modelValue:o.value.form.status,"onUpdate:modelValue":l[7]||(l[7]=e=>o.value.form.status=e)},{default:g((()=>[y(i,{label:!0},{default:g((()=>[ye])),_:1}),y(i,{label:!1},{default:g((()=>[he])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),[[_,o.value.loading]])}}},[["__scopeId","data-v-4a7779a5"]]);const ke=w("取 消"),we=w("确 定"),xe={class:"buttons"},Ce=w("取 消"),Ue=w("确 定"),ze={props:(Le=((e,l)=>{for(var a in l||(l={}))o.call(l,a)&&i(e,a,l[a]);if(t)for(var a of t(l))d.call(l,a)&&i(e,a,l[a]);return e})({},Ve.props),$e={modelValue:{type:Boolean,default:!1},mode:{type:String,default:"dialog",validator:e=>["dialog","drawer"].includes(e)}},l(Le,a($e))),emits:["update:modelValue","success"],setup(e,{emit:l}){const a=e,{proxy:t}=$();let o=p({get:function(){return a.modelValue},set:function(e){l("update:modelValue",e)}});const d=p((()=>""==a.id?"新增运费模板":"编辑运费模板"));function i(){t.$refs.form.submit((()=>{l("success"),s()}))}function s(){o.value=!1}return(e,l)=>{const t=f("el-button"),u=f("el-dialog"),n=f("el-drawer");return c(),m("div",null,["dialog"===a.mode?(c(),b(u,{key:0,modelValue:U(o),"onUpdate:modelValue":l[0]||(l[0]=e=>O(o)?o.value=e:o=e),title:U(d),width:"1000px","close-on-click-modal":!1,"append-to-body":"","destroy-on-close":""},{footer:g((()=>[y(t,{onClick:s},{default:g((()=>[ke])),_:1}),y(t,{type:"primary",onClick:i},{default:g((()=>[we])),_:1})])),default:g((()=>[y(Ve,S({ref:"form"},e.$props),null,16)])),_:1},8,["modelValue","title"])):"drawer"===a.mode?(c(),b(n,{key:1,modelValue:U(o),"onUpdate:modelValue":l[1]||(l[1]=e=>O(o)?o.value=e:o=e),title:U(d),size:"1000px","close-on-click-modal":!1,"custom-class":"form-mode-drawer","destroy-on-close":""},{default:g((()=>[y(Ve,S({ref:"form"},e.$props,{class:"form-container"}),null,16),C("div",xe,[y(t,{onClick:s},{default:g((()=>[Ce])),_:1}),y(t,{type:"primary",onClick:i},{default:g((()=>[Ue])),_:1})])])),_:1},8,["modelValue","title"])):h("v-if",!0)])}}};var Le,$e,je=A(ze,[["__scopeId","data-v-329ed57b"]]);const Pe=w("新增运费模版"),Oe=w("筛 选"),Se=w("单个批量操作按钮"),Me=w("批量操作按钮组1"),Re=w("批量操作按钮组2"),De=w("编辑"),Ie=w("删除"),Ae=M({name:"PagesExampleDeliveryList"});var Ne=A(Object.assign(Ae,{setup(e){const{pagination:l,getParams:a,onSizeChange:t,onCurrentChange:o,onSortChange:d}=D(),{proxy:i}=$(),p=r({loading:!1,formMode:"dialog",formModeProps:{visible:!1,id:""},search:{title:""},batch:{enable:!1,selectionDataList:[]},dataList:[]});function _(){p.value.loading=!0;let e=a();p.value.search.title&&(e.title=p.value.search.title),i.$api.get("pages_example/delivery/list",{baseURL:"/mock/",params:e}).then((e=>{p.value.loading=!1,p.value.dataList=e.data.list,l.value.total=e.data.total}))}function V(e){t(e).then((()=>_()))}function k(e){o(e).then((()=>_()))}function w(e,l){d(e,l).then((()=>_()))}function x(){p.value.formModeProps.id="",p.value.formModeProps.visible=!0}return j((()=>{_()})),(e,a)=>{const t=f("el-button"),o=f("el-input"),d=f("el-form-item"),r=f("el-col"),C=f("el-row"),z=f("el-form"),L=n,$=f("el-button-group"),j=u,O=f("el-table-column"),S=f("el-switch"),M=f("el-table"),D=f("el-pagination"),I=s,A=P("loading");return c(),m("div",null,[y(I,null,{default:g((()=>[y(t,{type:"primary",icon:"el-icon-plus",onClick:x},{default:g((()=>[Pe])),_:1}),y(L,null,{default:g((()=>[y(z,{model:p.value.search,size:"small","label-width":"100px","label-suffix":"："},{default:g((()=>[y(C,null,{default:g((()=>[y(r,{span:12},{default:g((()=>[y(d,{label:"模版名称"},{default:g((()=>[y(o,{modelValue:p.value.search.title,"onUpdate:modelValue":a[0]||(a[0]=e=>p.value.search.title=e),placeholder:"请输入模版名称，支持模糊查询",clearable:"",onKeydown:R(_,["enter"]),onClear:_},null,8,["modelValue","onKeydown"])])),_:1})])),_:1})])),_:1}),y(d,null,{default:g((()=>[y(t,{type:"primary",icon:"el-icon-search",onClick:_},{default:g((()=>[Oe])),_:1})])),_:1})])),_:1},8,["model"])])),_:1}),p.value.batch.enable?(c(),b(j,{key:0,data:e.dataList,"selection-data":p.value.batch.selectionDataList,onCheckAll:a[1]||(a[1]=l=>e.$refs.table.toggleAllSelection()),onCheckNull:a[2]||(a[2]=l=>e.$refs.table.clearSelection())},{default:g((()=>[y(t,{size:"small"},{default:g((()=>[Se])),_:1}),y($,null,{default:g((()=>[y(t,{size:"small"},{default:g((()=>[Me])),_:1}),y(t,{size:"small"},{default:g((()=>[Re])),_:1})])),_:1})])),_:1},8,["data","selection-data"])):h("v-if",!0),v((c(),b(M,{ref:"table",class:"list-table",data:p.value.dataList,border:"",stripe:"","highlight-current-row":"",onSortChange:w,onSelectionChange:a[3]||(a[3]=e=>p.value.batch.selectionDataList=e)},{default:g((()=>[p.value.batch.enable?(c(),b(O,{key:0,type:"selection",width:"40"})):h("v-if",!0),y(O,{prop:"title",label:"模版名称"}),y(O,{label:"开启状态",width:"100",align:"center"},{default:g((e=>[y(S,{modelValue:e.row.status,"onUpdate:modelValue":l=>e.row.status=l,onChange:l=>{return a=l,t=e.row,void i.$confirm(`确认${a?"启用":"停用"}「${t.title}」运费模版吗？`,"确认信息").then((()=>{i.$api.post("pages_example/delivery/change/status",{id:t.id,status:a},{baseURL:"/mock/"}).then((()=>{i.$message.success({message:`模拟${a?"启用":"停用"}成功`,center:!0})}))})).catch((()=>{t.status=!a}));var a,t}},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:1}),y(O,{label:"操作",width:"250",align:"center"},{default:g((e=>[y(t,{type:"primary",size:"small",plain:"",onClick:l=>{return a=e.row,p.value.formModeProps.id=a.id,void(p.value.formModeProps.visible=!0);var a}},{default:g((()=>[De])),_:2},1032,["onClick"]),y(t,{type:"danger",size:"small",plain:"",onClick:l=>{return a=e.row,void i.$confirm(`确认删除「${a.title}」吗？`,"确认信息").then((()=>{i.$api.post("pages_example/delivery/delete",{id:a.id},{baseURL:"/mock/"}).then((()=>{_(),i.$message.success({message:"模拟删除成功",center:!0})}))})).catch((()=>{}));var a}},{default:g((()=>[Ie])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[A,p.value.loading]]),y(D,{"current-page":U(l).page,total:U(l).total,"page-size":U(l).size,"page-sizes":U(l).sizes,layout:U(l).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:V,onCurrentChange:k},null,8,["current-page","total","page-size","page-sizes","layout"])])),_:1}),["dialog","drawer"].includes(p.value.formMode)?(c(),b(je,{key:0,id:p.value.formModeProps.id,modelValue:p.value.formModeProps.visible,"onUpdate:modelValue":a[4]||(a[4]=e=>p.value.formModeProps.visible=e),mode:p.value.formMode,onSuccess:_},null,8,["id","modelValue","mode"])):h("v-if",!0)])}}}),[["__scopeId","data-v-0483ab78"]]);export{Ne as default};
