
/**
 * 由 One-step-admin 提供技术支持
 * https://hooray.gitee.io/one-step-admin/
 * Powered by One-step-admin
 * https://hooray.github.io/one-step-admin/
 */
    
var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,i=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t;import{_ as s}from"./index.84a18d1d.js";import{_ as u}from"./index.1fa1849e.js";import{_ as n}from"./index.1a97140c.js";import{_ as r,r as p,B as f,a5 as c,m,n as v,c as _,f as b,v as g,h as y,w as h,b as V,i as k,F as w,D as x,y as C,t as U,e as L,g as z,p as $,j as P,A as j,o as O,aa as M,V as S,U as R,d as D,q as I}from"./index.93ad63e3.js";import{u as A}from"./usePagination.07ebaf3f.js";import{_ as B}from"./index.4897b818.js";const N=e=>($("data-v-27d40fec"),e=e(),P(),e),q={key:0},E=C("编 辑"),K={key:0},F={key:0},G={key:0},H={key:0},J=C("删 除"),Q=N((()=>L("span",null,null,-1))),T={key:0,style:{padding:"10px"}},W=C("新增一条运费模版"),X=C("为指定地区设置运费模版"),Y={class:"filter"},Z=C("全部"),ee=C("华北地区"),le=C("东北地区"),ae=C("华东地区"),te=C("华中地区"),oe=C("华南地区"),de=C("西南地区"),ie=C("西北地区"),se=C("自治区"),ue=C("直辖市"),ne=C("确 定");var re=r({props:{readonly:{type:Boolean,default:!1},data:{type:Array,default:function(){return[]}},type:{type:Number,default:1}},emits:["update:data"],setup(e,{emit:l}){const a=e,{proxy:t}=j(),o=p({index:"",visible:!1,filter:"",checkList:[],disableList:[]}),d=f((()=>{let e;switch(o.value.filter){case"":e=c;break;case"autonomousRegion":e=c.filter((e=>e.autonomousRegion));break;case"provinceLevelCity":e=c.filter((e=>e.provinceLevelCity));break;default:e=c.filter((e=>e.region==o.value.filter))}return e}));function i(){o.value.index="",o.value.checkList=[],o.value.disableList=u(),o.value.visible=!0}function s(e){let l="";for(const a in c)c[a].code===e&&(l=c[a].name);return l}function u(e){let l=[];for(let t=0;t<a.data.length;t++)e!==t&&(l=l.concat(a.data[t].list));return l}return(n,r)=>{const p=m("el-tag"),f=m("el-col"),c=m("el-button"),$=m("el-row"),P=m("el-table-column"),j=m("el-input"),O=m("el-table"),M=m("el-radio-button"),S=m("el-radio-group"),R=m("el-checkbox"),D=m("el-checkbox-group"),I=m("el-dialog");return v(),_("div",null,[e.readonly&&0==e.data.length?k("v-if",!0):b((v(),y(O,{key:0,data:e.data,border:"",class:"freight"},{empty:h((()=>[Q])),append:h((()=>[e.readonly?k("v-if",!0):(v(),_("div",T,[V(c,{type:"primary",size:"small",plain:"",style:{width:"100%"},onClick:i},{default:h((()=>[W])),_:1})]))])),default:h((()=>[V(P,{label:"运送到"},{default:h((t=>[e.readonly?(v(),_("div",q,[(v(!0),_(w,null,x(t.row.list,((e,l)=>(v(),y(p,{key:l,type:"info"},{default:h((()=>[C(U(s(e)),1)])),_:2},1024)))),128))])):(v(),y($,{key:1,type:"flex",align:"middle"},{default:h((()=>[V(f,null,{default:h((()=>[(v(!0),_(w,null,x(t.row.list,((e,o)=>(v(),y(p,{key:o,"disable-transitions":!0,type:"info",closable:"",onClose:o=>function(e,t){let o=a.data;o[e].list.splice(o[e].list.indexOf(t),1),0===o[e].list.length&&o.splice(e,1),l("update:data",o)}(t.$index,e)},{default:h((()=>[C(U(s(e)),1)])),_:2},1032,["onClose"])))),128))])),_:2},1024),V(f,{style:{width:"100px","text-align":"right"}},{default:h((()=>[V(c,{size:"small",plain:"",onClick:e=>{return l=t.$index,o.value.index=l,o.value.checkList=a.data[l].list,o.value.disableList=u(l),void(o.value.visible=!0);var l}},{default:h((()=>[E])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024))])),_:1}),V(P,{label:1==e.type?"首件数（件）":"首重量（kg）",width:"150",align:"center"},{default:h((l=>[e.readonly?(v(),_("span",K,U(l.row.first_step),1)):(v(),y(j,{key:1,modelValue:l.row.first_step,"onUpdate:modelValue":e=>l.row.first_step=e,size:"small"},null,8,["modelValue","onUpdate:modelValue"]))])),_:1},8,["label"]),V(P,{label:"首费（元）",width:"150",align:"center"},{default:h((l=>[e.readonly?(v(),_("span",F,U(l.row.first_price),1)):(v(),y(j,{key:1,modelValue:l.row.first_price,"onUpdate:modelValue":e=>l.row.first_price=e,size:"small"},null,8,["modelValue","onUpdate:modelValue"]))])),_:1}),V(P,{label:1==e.type?"续件数（件）":"续重量（kg）",width:"150",align:"center"},{default:h((l=>[e.readonly?(v(),_("span",G,U(l.row.continued_step),1)):(v(),y(j,{key:1,modelValue:l.row.continued_step,"onUpdate:modelValue":e=>l.row.continued_step=e,size:"small"},null,8,["modelValue","onUpdate:modelValue"]))])),_:1},8,["label"]),V(P,{label:"续费（元）",width:"150",align:"center"},{default:h((l=>[e.readonly?(v(),_("span",H,U(l.row.continued_price),1)):(v(),y(j,{key:1,modelValue:l.row.continued_price,"onUpdate:modelValue":e=>l.row.continued_price=e,size:"small"},null,8,["modelValue","onUpdate:modelValue"]))])),_:1}),e.readonly?k("v-if",!0):(v(),y(P,{key:0,label:"操作",width:"100",align:"center"},{default:h((e=>[V(c,{type:"danger",size:"small",plain:"",onClick:t=>function(e){let t=a.data;t.splice(e,1),l("update:data",t)}(e.$index)},{default:h((()=>[J])),_:2},1032,["onClick"])])),_:1}))])),_:1},8,["data"])),[[g,0!=e.data.length]]),e.readonly?k("v-if",!0):b((v(),y(c,{key:1,type:"primary",size:"small",plain:"",onClick:i},{default:h((()=>[X])),_:1},512)),[[g,0==e.data.length]]),V(I,{modelValue:o.value.visible,"onUpdate:modelValue":r[3]||(r[3]=e=>o.value.visible=e),title:"选择地区",width:"800px",class:"freight-dialog","append-to-body":"",onClosed:r[4]||(r[4]=e=>o.value.filter="")},{footer:h((()=>[V(c,{type:"primary",onClick:r[2]||(r[2]=e=>function(e){if(0===o.value.checkList.length)t.$message({message:"请勾选区域",type:"warning"});else{let t=a.data;""!==e?t[e].list=o.value.checkList:t.push({list:o.value.checkList,first_step:"",first_price:"",continued_step:"",continued_price:""}),l("update:data",t),o.value.visible=!1}}(o.value.index))},{default:h((()=>[ne])),_:1})])),default:h((()=>[L("div",Y,[V(S,{modelValue:o.value.filter,"onUpdate:modelValue":r[0]||(r[0]=e=>o.value.filter=e),size:"small"},{default:h((()=>[V(M,{label:""},{default:h((()=>[Z])),_:1}),V(M,{label:"north"},{default:h((()=>[ee])),_:1}),V(M,{label:"northeast"},{default:h((()=>[le])),_:1}),V(M,{label:"east"},{default:h((()=>[ae])),_:1}),V(M,{label:"central"},{default:h((()=>[te])),_:1}),V(M,{label:"south"},{default:h((()=>[oe])),_:1}),V(M,{label:"southwest"},{default:h((()=>[de])),_:1}),V(M,{label:"northwest"},{default:h((()=>[ie])),_:1}),V(M,{label:"autonomousRegion"},{default:h((()=>[se])),_:1}),V(M,{label:"provinceLevelCity"},{default:h((()=>[ue])),_:1})])),_:1},8,["modelValue"])]),V(D,{modelValue:o.value.checkList,"onUpdate:modelValue":r[1]||(r[1]=e=>o.value.checkList=e),style:{"margin-left":"50px"}},{default:h((()=>[V($,null,{default:h((()=>[(v(!0),_(w,null,x(z(d),((e,l)=>(v(),y(f,{key:l,span:6},{default:h((()=>[V(R,{label:e.code,disabled:o.value.disableList.includes(e.code)},{default:h((()=>[C(U(e.name),1)])),_:2},1032,["label","disabled"])])),_:2},1024)))),128))])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-27d40fec"]]);const pe=C("按件数"),fe=C("按重量"),ce={class:"freight"},me=C("默认运费"),ve=C("首费"),_e=C("元"),be=C("续费"),ge=C("元"),ye=C("启用"),he=C("停用");var Ve=r({props:{id:{type:[Number,String],default:""}},setup(e,{expose:l}){const a=e,{proxy:t}=j(),o=p({loading:!1,form:{id:a.id,title:"",address:[],type:1,status:!0,first_step:"",first_price:"",continued_step:"",continued_price:"",infos:[]},rules:{title:[{required:!0,message:"请输入名称",trigger:"blur"}]}});return O((()=>{""!=o.value.form.id&&(o.value.loading=!0,t.$api.get("pages_example/delivery/detail",{baseURL:"/mock/",params:{id:o.value.form.id}}).then((e=>{o.value.loading=!1,Object.assign(o.value.form,e.data)})))})),l({submit(e){""==o.value.form.id?t.$refs.form.validate((l=>{l&&t.$api.post("pages_example/delivery/create",o.value.form,{baseURL:"/mock/"}).then((()=>{t.$message.success({message:"模拟新增成功",center:!0}),e&&e()}))})):t.$refs.form.validate((l=>{l&&t.$api.post("pages_example/delivery/edit",o.value.form,{baseURL:"/mock/"}).then((()=>{t.$message.success({message:"模拟编辑成功",center:!0}),e&&e()}))}))}}),(e,l)=>{const a=m("el-input"),t=m("el-form-item"),d=B,i=m("el-radio-button"),s=m("el-radio-group"),u=m("el-col"),n=m("el-row"),r=m("el-card"),p=m("el-form"),f=M("loading");return b((v(),_("div",null,[V(p,{ref:"form",model:o.value.form,rules:o.value.rules,"label-width":"120px","label-suffix":"："},{default:h((()=>[V(t,{label:"名称",prop:"title"},{default:h((()=>[V(a,{modelValue:o.value.form.title,"onUpdate:modelValue":l[0]||(l[0]=e=>o.value.form.title=e),placeholder:"请输入名称"},null,8,["modelValue"])])),_:1}),V(t,{label:"发货地址",prop:"address"},{default:h((()=>[V(d,{modelValue:o.value.form.address,"onUpdate:modelValue":l[1]||(l[1]=e=>o.value.form.address=e)},null,8,["modelValue"])])),_:1}),V(t,{label:"计价方式"},{default:h((()=>[V(s,{modelValue:o.value.form.type,"onUpdate:modelValue":l[2]||(l[2]=e=>o.value.form.type=e)},{default:h((()=>[V(i,{label:1},{default:h((()=>[pe])),_:1}),V(i,{label:2},{default:h((()=>[fe])),_:1})])),_:1},8,["modelValue"])])),_:1}),V(t,{label:"运费模版"},{default:h((()=>[L("div",ce,[V(r,{shadow:"never"},{header:h((()=>[me])),default:h((()=>[V(n,{gutter:20},{default:h((()=>[V(u,{md:6},{default:h((()=>[V(a,{modelValue:o.value.form.first_step,"onUpdate:modelValue":l[3]||(l[3]=e=>o.value.form.first_step=e),size:"small"},{prepend:h((()=>[C(U(1==o.value.form.type?"首件":"首重"),1)])),append:h((()=>[C(U(1==o.value.form.type?"件":"kg"),1)])),_:1},8,["modelValue"])])),_:1}),V(u,{md:6},{default:h((()=>[V(a,{modelValue:o.value.form.first_price,"onUpdate:modelValue":l[4]||(l[4]=e=>o.value.form.first_price=e),size:"small"},{prepend:h((()=>[ve])),append:h((()=>[_e])),_:1},8,["modelValue"])])),_:1}),V(u,{md:6},{default:h((()=>[V(a,{modelValue:o.value.form.continued_step,"onUpdate:modelValue":l[5]||(l[5]=e=>o.value.form.continued_step=e),size:"small"},{prepend:h((()=>[C(U(1==o.value.form.type?"续件":"续重"),1)])),append:h((()=>[C(U(1==o.value.form.type?"件":"kg"),1)])),_:1},8,["modelValue"])])),_:1}),V(u,{md:6},{default:h((()=>[V(a,{modelValue:o.value.form.continued_price,"onUpdate:modelValue":l[6]||(l[6]=e=>o.value.form.continued_price=e),size:"small"},{prepend:h((()=>[be])),append:h((()=>[ge])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),V(n,null,{default:h((()=>[V(u,{span:24},{default:h((()=>[V(re,{data:o.value.form.infos,type:o.value.form.type},null,8,["data","type"])])),_:1})])),_:1})])])),_:1}),V(t,{label:"是否启用"},{default:h((()=>[V(s,{modelValue:o.value.form.status,"onUpdate:modelValue":l[7]||(l[7]=e=>o.value.form.status=e)},{default:h((()=>[V(i,{label:!0},{default:h((()=>[ye])),_:1}),V(i,{label:!1},{default:h((()=>[he])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),[[f,o.value.loading]])}}},[["__scopeId","data-v-4a7779a5"]]);const ke=C("取 消"),we=C("确 定"),xe={class:"buttons"},Ce=C("取 消"),Ue=C("确 定"),Le={props:(ze=((e,l)=>{for(var a in l||(l={}))o.call(l,a)&&i(e,a,l[a]);if(t)for(var a of t(l))d.call(l,a)&&i(e,a,l[a]);return e})({},Ve.props),$e={modelValue:{type:Boolean,default:!1},mode:{type:String,default:"dialog",validator:e=>["dialog","drawer"].includes(e)}},l(ze,a($e))),emits:["update:modelValue","success"],setup(e,{emit:l}){const a=e,{proxy:t}=j();let o=f({get:function(){return a.modelValue},set:function(e){l("update:modelValue",e)}});const d=f((()=>""==a.id?"新增运费模板":"编辑运费模板"));function i(){t.$refs.form.submit((()=>{l("success"),s()}))}function s(){o.value=!1}return(e,l)=>{const t=m("el-button"),u=m("el-dialog"),n=m("el-drawer");return v(),_("div",null,["dialog"===a.mode?(v(),y(u,{key:0,modelValue:z(o),"onUpdate:modelValue":l[0]||(l[0]=e=>S(o)?o.value=e:o=e),title:z(d),width:"1000px","close-on-click-modal":!1,"append-to-body":"","destroy-on-close":""},{footer:h((()=>[V(t,{onClick:s},{default:h((()=>[ke])),_:1}),V(t,{type:"primary",onClick:i},{default:h((()=>[we])),_:1})])),default:h((()=>[V(Ve,R({ref:"form"},e.$props),null,16)])),_:1},8,["modelValue","title"])):"drawer"===a.mode?(v(),y(n,{key:1,modelValue:z(o),"onUpdate:modelValue":l[1]||(l[1]=e=>S(o)?o.value=e:o=e),title:z(d),size:"1000px","close-on-click-modal":!1,"custom-class":"form-mode-drawer","destroy-on-close":""},{default:h((()=>[V(Ve,R({ref:"form"},e.$props,{class:"form-container"}),null,16),L("div",xe,[V(t,{onClick:s},{default:h((()=>[Ce])),_:1}),V(t,{type:"primary",onClick:i},{default:h((()=>[Ue])),_:1})])])),_:1},8,["modelValue","title"])):k("v-if",!0)])}}};var ze,$e,Pe=r(Le,[["__scopeId","data-v-329ed57b"]]);const je=C("新增运费模版"),Oe=C("筛 选"),Me=C("单个批量操作按钮"),Se=C("批量操作按钮组1"),Re=C("批量操作按钮组2"),De=C("编辑"),Ie=C("删除"),Ae=D({name:"PagesExampleDeliveryList"});var Be=r(Object.assign(Ae,{setup(e){const{pagination:l,getParams:a,onSizeChange:t,onCurrentChange:o,onSortChange:d}=A(),{proxy:i}=j(),r=p({loading:!1,formMode:"dialog",formModeProps:{visible:!1,id:""},search:{title:""},batch:{enable:!1,selectionDataList:[]},dataList:[]});function f(){r.value.loading=!0;let e=a();r.value.search.title&&(e.title=r.value.search.title),i.$api.get("pages_example/delivery/list",{baseURL:"/mock/",params:e}).then((e=>{r.value.loading=!1,r.value.dataList=e.data.list,l.value.total=e.data.total}))}function c(e){t(e).then((()=>f()))}function g(e){o(e).then((()=>f()))}function w(e,l){d(e,l).then((()=>f()))}function x(){r.value.formModeProps.id="",r.value.formModeProps.visible=!0}return O((()=>{f()})),(e,a)=>{const t=m("el-button"),o=m("el-input"),d=m("el-form-item"),p=m("el-col"),C=m("el-row"),U=m("el-form"),L=n,$=m("el-button-group"),P=u,j=m("el-table-column"),O=m("el-switch"),S=m("el-table"),R=m("el-pagination"),D=s,A=M("loading");return v(),_("div",null,[V(D,null,{default:h((()=>[V(t,{type:"primary",icon:"el-icon-plus",onClick:x},{default:h((()=>[je])),_:1}),V(L,null,{default:h((()=>[V(U,{model:r.value.search,size:"small","label-width":"100px","label-suffix":"："},{default:h((()=>[V(C,null,{default:h((()=>[V(p,{span:12},{default:h((()=>[V(d,{label:"模版名称"},{default:h((()=>[V(o,{modelValue:r.value.search.title,"onUpdate:modelValue":a[0]||(a[0]=e=>r.value.search.title=e),placeholder:"请输入模版名称，支持模糊查询",clearable:"",onKeydown:I(f,["enter"]),onClear:f},null,8,["modelValue","onKeydown"])])),_:1})])),_:1})])),_:1}),V(d,null,{default:h((()=>[V(t,{type:"primary",icon:"el-icon-search",onClick:f},{default:h((()=>[Oe])),_:1})])),_:1})])),_:1},8,["model"])])),_:1}),r.value.batch.enable?(v(),y(P,{key:0,data:e.dataList,"selection-data":r.value.batch.selectionDataList,onCheckAll:a[1]||(a[1]=l=>e.$refs.table.toggleAllSelection()),onCheckNull:a[2]||(a[2]=l=>e.$refs.table.clearSelection())},{default:h((()=>[V(t,{size:"small"},{default:h((()=>[Me])),_:1}),V($,null,{default:h((()=>[V(t,{size:"small"},{default:h((()=>[Se])),_:1}),V(t,{size:"small"},{default:h((()=>[Re])),_:1})])),_:1})])),_:1},8,["data","selection-data"])):k("v-if",!0),b((v(),y(S,{ref:"table",class:"list-table",data:r.value.dataList,border:"",stripe:"","highlight-current-row":"",onSortChange:w,onSelectionChange:a[3]||(a[3]=e=>r.value.batch.selectionDataList=e)},{default:h((()=>[r.value.batch.enable?(v(),y(j,{key:0,type:"selection",width:"40"})):k("v-if",!0),V(j,{prop:"title",label:"模版名称"}),V(j,{label:"开启状态",width:"100",align:"center"},{default:h((e=>[V(O,{modelValue:e.row.status,"onUpdate:modelValue":l=>e.row.status=l,onChange:l=>{return a=l,t=e.row,void i.$confirm(`确认${a?"启用":"停用"}「${t.title}」运费模版吗？`,"确认信息").then((()=>{i.$api.post("pages_example/delivery/change/status",{id:t.id,status:a},{baseURL:"/mock/"}).then((()=>{i.$message.success({message:`模拟${a?"启用":"停用"}成功`,center:!0})}))})).catch((()=>{t.status=!a}));var a,t}},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:1}),V(j,{label:"操作",width:"250",align:"center"},{default:h((e=>[V(t,{type:"primary",size:"small",plain:"",onClick:l=>{return a=e.row,r.value.formModeProps.id=a.id,void(r.value.formModeProps.visible=!0);var a}},{default:h((()=>[De])),_:2},1032,["onClick"]),V(t,{type:"danger",size:"small",plain:"",onClick:l=>{return a=e.row,void i.$confirm(`确认删除「${a.title}」吗？`,"确认信息").then((()=>{i.$api.post("pages_example/delivery/delete",{id:a.id},{baseURL:"/mock/"}).then((()=>{f(),i.$message.success({message:"模拟删除成功",center:!0})}))})).catch((()=>{}));var a}},{default:h((()=>[Ie])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[A,r.value.loading]]),V(R,{"current-page":z(l).page,total:z(l).total,"page-size":z(l).size,"page-sizes":z(l).sizes,layout:z(l).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:c,onCurrentChange:g},null,8,["current-page","total","page-size","page-sizes","layout"])])),_:1}),["dialog","drawer"].includes(r.value.formMode)?(v(),y(Pe,{key:0,id:r.value.formModeProps.id,modelValue:r.value.formModeProps.visible,"onUpdate:modelValue":a[4]||(a[4]=e=>r.value.formModeProps.visible=e),mode:r.value.formMode,onSuccess:f},null,8,["id","modelValue","mode"])):k("v-if",!0)])}}}),[["__scopeId","data-v-0483ab78"]]);export{Be as default};
