
/**
 * 由 One-step-admin 提供技术支持
 * Powered by One-step-admin
 * https://one-step-admin.netlify.app
 * 代码仓库
 * Gitee  https://gitee.com/hooray/one-step-admin
 * Github https://github.com/hooray/one-step-admin
 */
    
var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l;import{E as r}from"./el-input-number.d220782b.js";import{E as s}from"./el-popper.807071fe.js";import{a2 as u,r as d,C as m,W as p,A as v,ay as c,d as g,V as f,Y as b,Z as y,a0 as V,aA as h,n as w,c as S,b as x,w as k,e as B,t as L,$ as D,aa as E,ao as P,ar as M,X as I,o as C,a3 as T,i as F,j as z,G as j,F as N}from"./index.0a5e3bc2.js";import{U as W,I as X,C as Y}from"./event2.27558ffe.js";import{d as A}from"./debounce.527fb442.js";import{f as O,a as U,u as K}from"./index2.f37a6952.js";import{i as _}from"./validator2.66f5dd98.js";import{u as $}from"./index2.6a73fda0.js";import{b as R}from"./index2.fa2fe4ab.js";import{t as G,d as H}from"./error2.1d524120.js";const{left:Z,down:q,right:J,up:Q,home:ee,end:ae,pageUp:te,pageDown:le}=c,ne=(e,a,t)=>{const{disabled:l,min:n,max:o,step:i,showTooltip:r,precision:s,sliderSize:c,formatTooltip:g,emitChange:f,resetSize:b,updateDragging:y}=u("SliderProvider"),{tooltip:V,tooltipVisible:h,formatValue:w,displayTooltip:S,hideTooltip:x}=((e,a,t)=>{const l=d(),n=d(!1),o=m((()=>a.value instanceof Function)),i=m((()=>o.value&&a.value(e.modelValue)||e.modelValue)),r=A((()=>{t.value&&(n.value=!0)}),50),s=A((()=>{t.value&&(n.value=!1)}),50);return{tooltip:l,tooltipVisible:n,formatValue:i,displayTooltip:r,hideTooltip:s}})(e,g,r),k=d(),B=m((()=>(e.modelValue-n.value)/(o.value-n.value)*100+"%")),L=m((()=>e.vertical?{bottom:B.value}:{left:B.value})),D=e=>{l.value||(a.newPosition=Number.parseFloat(B.value)+e/(o.value-n.value)*100,C(a.newPosition),f())},E=e=>{let a,t;return e.type.startsWith("touch")?(t=e.touches[0].clientY,a=e.touches[0].clientX):(t=e.clientY,a=e.clientX),{clientX:a,clientY:t}},P=t=>{a.dragging=!0,a.isClick=!0;const{clientX:l,clientY:n}=E(t);e.vertical?a.startY=n:a.startX=l,a.startPosition=Number.parseFloat(B.value),a.newPosition=a.startPosition},M=t=>{if(a.dragging){let l;a.isClick=!1,S(),b();const{clientX:n,clientY:o}=E(t);e.vertical?(a.currentY=o,l=(a.startY-a.currentY)/c.value*100):(a.currentX=n,l=(a.currentX-a.startX)/c.value*100),a.newPosition=a.startPosition+l,C(a.newPosition)}},I=()=>{a.dragging&&(setTimeout((()=>{a.dragging=!1,a.hovering||x(),a.isClick||(C(a.newPosition),f())}),0),window.removeEventListener("mousemove",M),window.removeEventListener("touchmove",M),window.removeEventListener("mouseup",I),window.removeEventListener("touchend",I),window.removeEventListener("contextmenu",I))},C=async l=>{if(null===l||Number.isNaN(+l))return;l<0?l=0:l>100&&(l=100);const r=100/((o.value-n.value)/i.value);let u=Math.round(l/r)*r*(o.value-n.value)*.01+n.value;u=Number.parseFloat(u.toFixed(s.value)),t(W,u),a.dragging||e.modelValue===a.oldValue||(a.oldValue=e.modelValue),await v(),a.dragging&&S(),V.value.updatePopper()};return p((()=>a.dragging),(e=>{y(e)})),{button:k,tooltip:V,tooltipVisible:h,showTooltip:r,wrapperStyle:L,formatValue:w,handleMouseEnter:()=>{a.hovering=!0,S()},handleMouseLeave:()=>{a.hovering=!1,a.dragging||x()},onButtonDown:e=>{l.value||(e.preventDefault(),P(e),window.addEventListener("mousemove",M),window.addEventListener("touchmove",M),window.addEventListener("mouseup",I),window.addEventListener("touchend",I),window.addEventListener("contextmenu",I),k.value.focus())},onKeyDown:e=>{let a=!0;[Z,q].includes(e.key)?D(-i.value):[J,Q].includes(e.key)?D(i.value):e.key===ee?l.value||(C(0),f()):e.key===ae?l.value||(C(100),f()):e.key===le?D(4*-i.value):e.key===te?D(4*i.value):a=!1,a&&e.preventDefault()},setPosition:C}};var oe=V(g({name:"ElSliderButton",components:{ElTooltip:s},props:{modelValue:{type:Number,default:0},vertical:{type:Boolean,default:!1},tooltipClass:{type:String,default:""}},emits:[W],setup(e,{emit:a}){const t=f("slider"),l=b({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:e.modelValue}),{button:n,tooltip:o,showTooltip:i,tooltipVisible:r,wrapperStyle:s,formatValue:u,handleMouseEnter:d,handleMouseLeave:m,onButtonDown:p,onKeyDown:v,setPosition:c}=ne(e,l,a),{hovering:g,dragging:V}=y(l);return{ns:t,button:n,tooltip:o,tooltipVisible:r,showTooltip:i,wrapperStyle:s,formatValue:u,handleMouseEnter:d,handleMouseLeave:m,onButtonDown:p,onKeyDown:v,setPosition:c,hovering:g,dragging:V}}}),[["render",function(e,a,t,l,n,o){const i=h("el-tooltip");return w(),S("div",{ref:"button",class:D([e.ns.e("button-wrapper"),{hover:e.hovering,dragging:e.dragging}]),style:E(e.wrapperStyle),tabindex:"0",onMouseenter:a[1]||(a[1]=(...a)=>e.handleMouseEnter&&e.handleMouseEnter(...a)),onMouseleave:a[2]||(a[2]=(...a)=>e.handleMouseLeave&&e.handleMouseLeave(...a)),onMousedown:a[3]||(a[3]=(...a)=>e.onButtonDown&&e.onButtonDown(...a)),onTouchstart:a[4]||(a[4]=(...a)=>e.onButtonDown&&e.onButtonDown(...a)),onFocus:a[5]||(a[5]=(...a)=>e.handleMouseEnter&&e.handleMouseEnter(...a)),onBlur:a[6]||(a[6]=(...a)=>e.handleMouseLeave&&e.handleMouseLeave(...a)),onKeydown:a[7]||(a[7]=(...a)=>e.onKeyDown&&e.onKeyDown(...a))},[x(i,{ref:"tooltip",visible:e.tooltipVisible,"onUpdate:visible":a[0]||(a[0]=a=>e.tooltipVisible=a),placement:"top","stop-popper-mouse-event":!1,"popper-class":e.tooltipClass,disabled:!e.showTooltip,persistent:""},{content:k((()=>[B("span",null,L(e.formatValue),1)])),default:k((()=>[B("div",{class:D([e.ns.e("button"),{hover:e.hovering,dragging:e.dragging}])},null,2)])),_:1},8,["visible","popper-class","disabled"])],38)}],["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/button.vue"]]);const ie=g({name:"ElMarker",props:{mark:{type:[String,Object],default:()=>{}}},setup:e=>({ns:f("slider"),label:m((()=>"string"==typeof e.mark?e.mark:e.mark.label))}),render(){var e;return P("div",{class:this.ns.e("marks-text"),style:null==(e=this.mark)?void 0:e.style},this.label)}});const re=(e,a,t)=>{const l=u(O,{}),n=u(U,{}),o=M(),i=d(),r=d(),s={firstButton:i,secondButton:r},p=m((()=>e.disabled||l.disabled||!1)),c=m((()=>Math.min(a.firstValue,a.secondValue))),g=m((()=>Math.max(a.firstValue,a.secondValue))),f=m((()=>e.range?100*(g.value-c.value)/(e.max-e.min)+"%":100*(a.firstValue-e.min)/(e.max-e.min)+"%")),b=m((()=>e.range?100*(c.value-e.min)/(e.max-e.min)+"%":"0%")),y=m((()=>e.vertical?{height:e.height}:{})),V=m((()=>e.vertical?{height:f.value,bottom:b.value}:{width:f.value,left:b.value})),h=()=>{o.value&&(a.sliderSize=o.value["client"+(e.vertical?"Height":"Width")])},w=t=>{const l=(t=>{const l=e.min+t*(e.max-e.min)/100;if(!e.range)return i;let n;return n=Math.abs(c.value-l)<Math.abs(g.value-l)?a.firstValue<a.secondValue?"firstButton":"secondButton":a.firstValue>a.secondValue?"firstButton":"secondButton",s[n]})(t);return l.value.setPosition(t),l},S=e=>{t(W,e),t(X,e)},x=async()=>{await v(),t(Y,e.range?[c.value,g.value]:e.modelValue)},k=t=>{var l,n,i,r,s,u;if(p.value||a.dragging)return;h();let d=0;if(e.vertical){const e=null!=(i=null==(n=null==(l=t.touches)?void 0:l.item(0))?void 0:n.clientY)?i:t.clientY;d=(o.value.getBoundingClientRect().bottom-e)/a.sliderSize*100}else{d=((null!=(u=null==(s=null==(r=t.touches)?void 0:r.item(0))?void 0:s.clientX)?u:t.clientX)-o.value.getBoundingClientRect().left)/a.sliderSize*100}return d<0||d>100?void 0:w(d)};return{elFormItem:n,slider:o,firstButton:i,secondButton:r,sliderDisabled:p,minValue:c,maxValue:g,runwayStyle:y,barStyle:V,resetSize:h,setPosition:w,emitChange:x,onSliderWrapperPrevent:e=>{var a,t;((null==(a=s.firstButton.value)?void 0:a.dragging)||(null==(t=s.secondButton.value)?void 0:t.dragging))&&e.preventDefault()},onSliderClick:e=>{k(e)&&x()},onSliderDown:async e=>{const a=k(e);a&&(await v(),a.value.onButtonDown(e))},setFirstValue:t=>{a.firstValue=t,S(e.range?[c.value,g.value]:t)},setSecondValue:t=>{a.secondValue=t,e.range&&S([c.value,g.value])}}},se=g({name:"ElSlider",components:{ElInputNumber:r,SliderButton:oe,SliderMarker:V(ie,[["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/marker.vue"]])},props:{modelValue:{type:[Number,Array],default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:{type:Boolean,default:!1},showInputControls:{type:Boolean,default:!0},size:{type:String,validator:_},inputSize:{type:String,validator:_},showStops:{type:Boolean,default:!1},showTooltip:{type:Boolean,default:!0},formatTooltip:{type:Function,default:void 0},disabled:{type:Boolean,default:!1},range:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},height:{type:String,default:""},debounce:{type:Number,default:300},label:{type:String,default:void 0},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:Function,default:void 0},tooltipClass:{type:String,default:void 0},marks:Object},emits:[W,Y,X],setup(e,{emit:r}){const s=f("slider"),{t:u}=$(),d=b({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:p,slider:v,firstButton:c,secondButton:g,sliderDisabled:V,minValue:h,maxValue:w,runwayStyle:S,barStyle:x,resetSize:k,emitChange:B,onSliderWrapperPrevent:L,onSliderClick:D,onSliderDown:E,setFirstValue:P,setSecondValue:M}=re(e,d,r),{stops:C,getStopStyle:T}=((e,a,t,l)=>({stops:m((()=>{if(!e.showStops||e.min>e.max)return[];if(0===e.step)return[];const n=(e.max-e.min)/e.step,o=100*e.step/(e.max-e.min),i=Array.from({length:n-1}).map(((e,a)=>(a+1)*o));return e.range?i.filter((a=>a<100*(t.value-e.min)/(e.max-e.min)||a>100*(l.value-e.min)/(e.max-e.min))):i.filter((t=>t>100*(a.firstValue-e.min)/(e.max-e.min)))})),getStopStyle:a=>e.vertical?{bottom:`${a}%`}:{left:`${a}%`}}))(e,d,h,w),{inputId:F,isLabeledByFormItem:z}=R(e,{formItemContext:p}),j=K(),N=m((()=>e.inputSize||j.value)),W=m((()=>e.label||u("el.slider.defaultLabel",{min:e.min,max:e.max}))),X=m((()=>e.range?e.rangeStartLabel||u("el.slider.defaultRangeStartLabel"):W.value)),Y=m((()=>e.formatValueText?e.formatValueText(Z.value):`${Z.value}`)),A=m((()=>e.rangeEndLabel||u("el.slider.defaultRangeEndLabel"))),O=m((()=>e.formatValueText?e.formatValueText(q.value):`${q.value}`)),U=m((()=>[s.b(),s.m(j.value),s.is("vertical",e.vertical),{[s.m("with-input")]:e.showInput}])),_=(e=>m((()=>e.marks?Object.keys(e.marks).map(parseFloat).sort(((e,a)=>e-a)).filter((a=>a<=e.max&&a>=e.min)).map((a=>({point:a,position:100*(a-e.min)/(e.max-e.min),mark:e.marks[a]}))):[])))(e);ue(e,d,h,w,r,p);const G=m((()=>{const a=[e.min,e.max,e.step].map((e=>{const a=`${e}`.split(".")[1];return a?a.length:0}));return Math.max.apply(null,a)})),{sliderWrapper:H}=de(e,d,k),{firstValue:Z,secondValue:q,oldValue:J,dragging:Q,sliderSize:ee}=y(d);var ae;return I("SliderProvider",(ae=((e,a)=>{for(var t in a||(a={}))n.call(a,t)&&i(e,t,a[t]);if(l)for(var t of l(a))o.call(a,t)&&i(e,t,a[t]);return e})({},y(e)),a(ae,t({sliderSize:ee,disabled:V,precision:G,emitChange:B,resetSize:k,updateDragging:e=>{d.dragging=e}})))),{ns:s,firstValue:Z,secondValue:q,oldValue:J,dragging:Q,sliderSize:ee,inputId:F,isLabeledByFormItem:z,elFormItem:p,slider:v,groupLabel:W,firstButton:c,firstButtonLabel:X,firstValueText:Y,secondButton:g,secondButtonLabel:A,secondValueText:O,sliderDisabled:V,runwayStyle:S,barStyle:x,emitChange:B,onSliderClick:D,onSliderWrapperPrevent:L,onSliderDown:E,getStopStyle:T,setFirstValue:P,setSecondValue:M,stops:C,markList:_,sliderWrapper:H,sliderWrapperSize:j,sliderInputSize:N,sliderKls:U}}}),ue=(e,a,t,l,n,o)=>{const i=e=>{n(W,e),n(X,e)},r=()=>e.range?![t.value,l.value].every(((e,t)=>e===a.oldValue[t])):e.modelValue!==a.oldValue,s=()=>{var t,l;if(e.min>e.max)return void G("Slider","min should not be greater than max.");const n=e.modelValue;e.range&&Array.isArray(n)?n[1]<e.min?i([e.min,e.min]):n[0]>e.max?i([e.max,e.max]):n[0]<e.min?i([e.min,n[1]]):n[1]>e.max?i([n[0],e.max]):(a.firstValue=n[0],a.secondValue=n[1],r()&&(null==(t=o.validate)||t.call(o,"change").catch((e=>H())),a.oldValue=n.slice())):e.range||"number"!=typeof n||Number.isNaN(n)||(n<e.min?i(e.min):n>e.max?i(e.max):(a.firstValue=n,r()&&(null==(l=o.validate)||l.call(o,"change").catch((e=>H())),a.oldValue=n)))};s(),p((()=>a.dragging),(e=>{e||s()})),p((()=>e.modelValue),((e,t)=>{a.dragging||Array.isArray(e)&&Array.isArray(t)&&e.every(((e,a)=>e===t[a]))&&a.firstValue===e[0]&&a.secondValue===e[1]||s()}),{deep:!0}),p((()=>[e.min,e.max]),(()=>{s()}))},de=(e,a,t)=>{const l=d();return C((async()=>{e.range?(Array.isArray(e.modelValue)?(a.firstValue=Math.max(e.min,e.modelValue[0]),a.secondValue=Math.min(e.max,e.modelValue[1])):(a.firstValue=e.min,a.secondValue=e.max),a.oldValue=[a.firstValue,a.secondValue]):("number"!=typeof e.modelValue||Number.isNaN(e.modelValue)?a.firstValue=e.min:a.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),a.oldValue=a.firstValue),window.addEventListener("resize",t),await v(),t()})),T((()=>{window.removeEventListener("resize",t)})),{sliderWrapper:l}},me=["id","role","aria-label","aria-labelledby"],pe={key:1};var ve=V(se,[["render",function(e,a,t,l,n,o){const i=h("slider-button"),r=h("slider-marker"),s=h("el-input-number");return w(),S("div",{id:e.range?e.inputId:void 0,ref:"sliderWrapper",class:D(e.sliderKls),role:e.range?"group":void 0,"aria-label":e.range&&!e.isLabeledByFormItem?e.groupLabel:void 0,"aria-labelledby":e.range&&e.isLabeledByFormItem?e.elFormItem.labelId:void 0,onTouchstart:a[2]||(a[2]=(...a)=>e.onSliderWrapperPrevent&&e.onSliderWrapperPrevent(...a)),onTouchmove:a[3]||(a[3]=(...a)=>e.onSliderWrapperPrevent&&e.onSliderWrapperPrevent(...a))},[B("div",{ref:"slider",class:D([e.ns.e("runway"),{"show-input":e.showInput&&!e.range},e.ns.is("disabled",e.sliderDisabled)]),style:E(e.runwayStyle),onMousedown:a[0]||(a[0]=(...a)=>e.onSliderDown&&e.onSliderDown(...a)),onTouchstart:a[1]||(a[1]=(...a)=>e.onSliderDown&&e.onSliderDown(...a))},[B("div",{class:D(e.ns.e("bar")),style:E(e.barStyle)},null,6),x(i,{id:e.range?void 0:e.inputId,ref:"firstButton","model-value":e.firstValue,vertical:e.vertical,"tooltip-class":e.tooltipClass,role:"slider","aria-label":e.range||!e.isLabeledByFormItem?e.firstButtonLabel:void 0,"aria-labelledby":!e.range&&e.isLabeledByFormItem?e.elFormItem.labelId:void 0,"aria-valuemin":e.min,"aria-valuemax":e.range?e.secondValue:e.max,"aria-valuenow":e.firstValue,"aria-valuetext":e.firstValueText,"aria-orientation":e.vertical?"vertical":"horizontal","aria-disabled":e.sliderDisabled,"onUpdate:modelValue":e.setFirstValue},null,8,["id","model-value","vertical","tooltip-class","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),e.range?(w(),F(i,{key:0,ref:"secondButton","model-value":e.secondValue,vertical:e.vertical,"tooltip-class":e.tooltipClass,role:"slider","aria-label":e.secondButtonLabel,"aria-valuemin":e.firstValue,"aria-valuemax":e.max,"aria-valuenow":e.secondValue,"aria-valuetext":e.secondValueText,"aria-orientation":e.vertical?"vertical":"horizontal","aria-disabled":e.sliderDisabled,"onUpdate:modelValue":e.setSecondValue},null,8,["model-value","vertical","tooltip-class","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):z("v-if",!0),e.showStops?(w(),S("div",pe,[(w(!0),S(j,null,N(e.stops,((a,t)=>(w(),S("div",{key:t,class:D(e.ns.e("stop")),style:E(e.getStopStyle(a))},null,6)))),128))])):z("v-if",!0),e.markList.length>0?(w(),S(j,{key:2},[B("div",null,[(w(!0),S(j,null,N(e.markList,((a,t)=>(w(),S("div",{key:t,style:E(e.getStopStyle(a.position)),class:D([e.ns.e("stop"),e.ns.e("marks-stop")])},null,6)))),128))]),B("div",{class:D(e.ns.e("marks"))},[(w(!0),S(j,null,N(e.markList,((a,t)=>(w(),F(r,{key:t,mark:a.mark,style:E(e.getStopStyle(a.position))},null,8,["mark","style"])))),128))],2)],64)):z("v-if",!0)],38),e.showInput&&!e.range?(w(),F(s,{key:0,ref:"input","model-value":e.firstValue,class:D(e.ns.e("input")),step:e.step,disabled:e.sliderDisabled,controls:e.showInputControls,min:e.min,max:e.max,debounce:e.debounce,size:e.sliderInputSize,"onUpdate:modelValue":e.setFirstValue,onChange:e.emitChange},null,8,["model-value","class","step","disabled","controls","min","max","debounce","size","onUpdate:modelValue","onChange"])):z("v-if",!0)],42,me)}],["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/index.vue"]]);ve.install=e=>{e.component(ve.name,ve)};const ce=ve;export{ce as E};
