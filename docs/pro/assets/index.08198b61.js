
/**
 * 由 Fantastic-admin 提供技术支持
 * https://hooray.gitee.io/fantastic-admin/
 * Powered by Fantastic-admin
 * https://hooray.github.io/fantastic-admin/
 */
    
import{_ as H}from"./index.55ffcc18.js";import{$ as K,u as U,a0 as D,a2 as x,h as E,w as V,a8 as q,r as z,o as u,G as h,H as s,Q as m,l as $,P as g,V as B,U as M,S as j,i as R,K as A,O as L,k as C,R as d,L as F,M as G,m as P}from"./vendor.e2abc40b.js";import{_ as Q}from"./plugin-vue_export-helper.5a098b48.js";const T=f=>(F("data-v-f24c6240"),f=f(),G(),f),J={class:"container"},W={class:"tips"},X=T(()=>s("div",{class:"tip"},[s("span",null,"Alt"),d("+"),s("span",null,"S"),d(" \u5524\u9192\u641C\u7D22\u9762\u677F ")],-1)),Y={class:"tip"},Z=d(" \u5207\u6362\u641C\u7D22\u7ED3\u679C "),ee={class:"tip"},se=d(" \u8BBF\u95EE\u9875\u9762 "),te=T(()=>s("div",{class:"tip"},[s("span",null,"ESC"),d(" \u9000\u51FA ")],-1)),ne=["onClick","onMouseover"],ae={class:"icon"},oe={class:"info"},le={class:"title"},ie={class:"breadcrumb"},re=T(()=>s("i",{class:"el-icon-arrow-right"},null,-1)),ce=K({name:"Search"});function ue(f){const{proxy:e}=P(),y=U(),I=D("generateI18nTitle"),i=x(!1),v=x(""),t=x(-1),r=E(()=>{let n=[];return n=Object.values(y.getters["menu/flatMenu"]).filter(o=>{let p=!1;return o.title.indexOf(v.value)>=0&&(p=!0),o.breadcrumbNeste.some(c=>c.title.indexOf(v.value)>=0)&&(p=!0),p}),n});V(()=>i.value,n=>{n?(document.querySelector("body").classList.add("hidden"),e.$refs.search.scrollTop=0,e.$hotkeys("up",b),e.$hotkeys("down",k),e.$hotkeys("enter",w),setTimeout(()=>{e.$refs.input.$el.children[0].focus()},100)):(document.querySelector("body").classList.remove("hidden"),e.$hotkeys.unbind("up",b),e.$hotkeys.unbind("down",k),e.$hotkeys.unbind("enter",w),setTimeout(()=>{v.value="",t.value=-1},500))}),V(()=>r.value,()=>{t.value=-1,S(0)}),q(()=>{e.$eventBus.on("global-search-toggle",()=>{i.value=!i.value}),e.$hotkeys("alt+s",n=>{y.state.settings.enableNavSearch&&y.state.window.list.every(o=>!o.isMaximize)&&(n.preventDefault(),i.value=!0)})});function b(){r.value.length&&(t.value-=1,t.value<0&&(t.value=r.value.length-1),S(e.$refs[`search-item-${t.value}`].offsetTop))}function k(){r.value.length&&(t.value+=1,t.value>r.value.length-1&&(t.value=0),S(e.$refs[`search-item-${t.value}`].offsetTop))}function w(){t.value!==-1&&e.$refs[`search-item-${t.value}`].click()}function S(n){t.value!==-1&&(n+e.$refs[`search-item-${t.value}`].clientHeight>e.$refs.search.scrollTop+e.$refs.search.clientHeight||n+e.$refs[`search-item-${t.value}`].clientHeight<=e.$refs.search.scrollTop)&&e.$refs.search.scrollTo({top:n,behavior:"smooth"})}function N(n){/^(https?:|mailto:|tel:)/.test(n)?window.open(n):e.$window.add(n)}return(n,o)=>{const p=z("el-input"),c=H;return u(),h("div",{id:"search",class:j({searching:i.value}),onClick:o[3]||(o[3]=a=>i.value&&n.$eventBus.emit("global-search-toggle"))},[s("div",J,[s("div",{class:"search-box",onClick:o[2]||(o[2]=m(()=>{},["stop"]))},[$(p,{ref:(a,l)=>{l.input=a},modelValue:v.value,"onUpdate:modelValue":o[0]||(o[0]=a=>v.value=a),"prefix-icon":"el-icon-search",placeholder:"\u641C\u7D22\u9875\u9762\uFF0C\u652F\u6301\u6807\u9898\u3001URL\u6A21\u7CCA\u67E5\u8BE2",clearable:"",onKeydown:[o[1]||(o[1]=g(a=>n.$eventBus.emit("global-search-toggle"),["esc"])),g(m(b,["prevent"]),["up"]),g(m(k,["prevent"]),["down"]),g(m(w,["prevent"]),["enter"])]},null,8,["modelValue","onKeydown"]),s("div",W,[X,s("div",Y,[s("span",null,[$(c,{name:"search-up"})]),s("span",null,[$(c,{name:"search-down"})]),Z]),s("div",ee,[s("span",null,[$(c,{name:"search-enter"})]),se]),te])]),s("div",{ref:(a,l)=>{l.search=a},class:"result"},[(u(!0),h(B,null,M(C(r),(a,l)=>(u(),h("div",{key:a.path,ref:`search-item-${l}`,class:j(["item",{actived:l===t.value}]),onClick:_=>N(a.windowName),onMouseover:_=>t.value=l},[s("div",ae,[a.icon?(u(),R(c,{key:0,name:a.icon},null,8,["name"])):A("v-if",!0)]),s("div",oe,[s("div",le,L(C(I)(a.i18n,a.title)),1),s("div",ie,[(u(!0),h(B,null,M(a.breadcrumbNeste,(_,O)=>(u(),h("span",{key:O},[d(L(C(I)(_.i18n,_.title))+" ",1),re]))),128))])])],42,ne))),128))],512)])],2)}}const de=Object.assign(ce,{setup:ue});var fe=Q(de,[["__scopeId","data-v-f24c6240"]]);export{fe as default};
