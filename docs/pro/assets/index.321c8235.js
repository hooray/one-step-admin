
/**
 * 由 One-step-admin 提供技术支持
 * https://hooray.gitee.io/one-step-admin/
 * Powered by One-step-admin
 * https://hooray.github.io/one-step-admin/
 */
    
var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t;import{_ as s}from"./index.8346cdbe.js";import{_ as n}from"./index.4601591e.js";import{_ as d}from"./index.0528e494.js";import{_ as u}from"./index.8b7064ca.js";import{_ as p,r as m,o as c,m as f,aa as g,f as v,n as b,c as h,b as _,w as y,A as k,B as w,h as C,g as x,V as z,i as V,U as $,e as P,y as j,d as L,q as M}from"./index.d26282ba.js";import{u as S}from"./usePagination.aa91806e.js";var U=p({props:{id:{type:[Number,String],default:""}},setup(e,{expose:a}){const l=e,{proxy:t}=k(),o=m({loading:!1,form:{id:l.id,title:""},rules:{title:[{required:!0,message:"请输入部门名称",trigger:"blur"}]}});return c((()=>{""!=o.value.form.id&&(o.value.loading=!0,t.$api.get("pages_example/department/detail",{baseURL:"/mock/",params:{id:o.value.form.id}}).then((e=>{o.value.loading=!1,o.value.form.title=e.data.title})))})),a({submit(e){""==o.value.form.id?t.$refs.form.validate((a=>{a&&t.$api.post("pages_example/department/create",o.value.form,{baseURL:"/mock/"}).then((()=>{t.$message.success({message:"模拟新增成功",center:!0}),e&&e()}))})):t.$refs.form.validate((a=>{a&&t.$api.post("pages_example/department/edit",o.value.form,{baseURL:"/mock/"}).then((()=>{t.$message.success({message:"模拟编辑成功",center:!0}),e&&e()}))}))}}),(e,a)=>{const l=f("el-input"),t=f("el-form-item"),i=f("el-form"),r=g("loading");return v((b(),h("div",null,[_(i,{ref:"form",model:o.value.form,rules:o.value.rules,"label-width":"120px","label-suffix":"："},{default:y((()=>[_(t,{label:"部门",prop:"title"},{default:y((()=>[_(l,{modelValue:o.value.form.title,"onUpdate:modelValue":a[0]||(a[0]=e=>o.value.form.title=e),placeholder:"请输入部门名称"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),[[r,o.value.loading]])}}},[["__scopeId","data-v-7b150428"]]);const O=j("取 消"),D=j("确 定"),R={class:"buttons"},I=j("取 消"),A=j("确 定"),E={props:(q=((e,a)=>{for(var l in a||(a={}))o.call(a,l)&&r(e,l,a[l]);if(t)for(var l of t(a))i.call(a,l)&&r(e,l,a[l]);return e})({},U.props),B={modelValue:{type:Boolean,default:!1},mode:{type:String,default:"dialog",validator:e=>["dialog","drawer"].includes(e)}},a(q,l(B))),emits:["update:modelValue","success"],setup(e,{emit:a}){const l=e,{proxy:t}=k();let o=w({get:function(){return l.modelValue},set:function(e){a("update:modelValue",e)}});const i=w((()=>""==l.id?"新增部门":"编辑部门"));function r(){t.$refs.form.submit((()=>{a("success"),s()}))}function s(){o.value=!1}return(e,a)=>{const t=f("el-button"),n=f("el-dialog"),d=f("el-drawer");return b(),h("div",null,["dialog"===l.mode?(b(),C(n,{key:0,modelValue:x(o),"onUpdate:modelValue":a[0]||(a[0]=e=>z(o)?o.value=e:o=e),title:x(i),width:"600px","close-on-click-modal":!1,"append-to-body":"","destroy-on-close":""},{footer:y((()=>[_(t,{size:"large",onClick:s},{default:y((()=>[O])),_:1}),_(t,{type:"primary",size:"large",onClick:r},{default:y((()=>[D])),_:1})])),default:y((()=>[_(U,$({ref:"form"},e.$props),null,16)])),_:1},8,["modelValue","title"])):"drawer"===l.mode?(b(),C(d,{key:1,modelValue:x(o),"onUpdate:modelValue":a[1]||(a[1]=e=>z(o)?o.value=e:o=e),title:x(i),size:"600px","close-on-click-modal":!1,"custom-class":"form-mode-drawer","destroy-on-close":""},{default:y((()=>[_(U,$({ref:"form"},e.$props,{class:"form-container"}),null,16),P("div",R,[_(t,{size:"large",onClick:s},{default:y((()=>[I])),_:1}),_(t,{type:"primary",size:"large",onClick:r},{default:y((()=>[A])),_:1})])])),_:1},8,["modelValue","title"])):V("v-if",!0)])}}};var q,B,K=p(E,[["__scopeId","data-v-c2b79976"]]);const N=j("新增部门"),G=j("筛 选"),J=j("单个批量操作按钮"),F=j("批量操作按钮组1"),H=j("批量操作按钮组2"),Q=j("查看职位"),T=j("编辑"),W=j("删除"),X=L({name:"PagesExampleDepartmentList"});var Y=p(Object.assign(X,{setup(e){const{pagination:a,getParams:l,onSizeChange:t,onCurrentChange:o,onSortChange:i}=S(),{proxy:r}=k(),p=m({loading:!1,formMode:"dialog",formModeProps:{visible:!1,id:""},search:{title:""},batch:{enable:!1,selectionDataList:[]},dataList:[]});function w(){p.value.loading=!0;let e=l();p.value.search.title&&(e.title=p.value.search.title),r.$api.get("pages_example/department/list",{baseURL:"/mock/",params:e}).then((e=>{p.value.loading=!1,p.value.dataList=e.data.list,a.value.total=e.data.total}))}function z(e){t(e).then((()=>w()))}function $(e){o(e).then((()=>w()))}function P(e,a){i(e,a).then((()=>w()))}function j(){p.value.formModeProps.id="",p.value.formModeProps.visible=!0}return c((()=>{w()})),(e,l)=>{const t=u,o=f("el-button"),i=f("el-input"),m=f("el-form-item"),c=f("el-col"),k=f("el-row"),L=f("el-form"),S=d,U=f("el-button-group"),O=n,D=f("el-table-column"),R=f("el-table"),I=f("el-pagination"),A=s,E=g("loading");return b(),h("div",null,[_(t,{title:"部门管理",content:"页面数据为 Mock 示例数据，非真实数据。"}),_(A,null,{default:y((()=>[_(o,{type:"primary",size:"large",icon:"el-icon-plus",onClick:j},{default:y((()=>[N])),_:1}),_(S,null,{default:y((()=>[_(L,{model:p.value.search,size:"default","label-width":"100px","label-suffix":"："},{default:y((()=>[_(k,null,{default:y((()=>[_(c,{span:12},{default:y((()=>[_(m,{label:"部门"},{default:y((()=>[_(i,{modelValue:p.value.search.title,"onUpdate:modelValue":l[0]||(l[0]=e=>p.value.search.title=e),placeholder:"请输入部门，支持模糊查询",clearable:"",onKeydown:M(w,["enter"]),onClear:w},null,8,["modelValue","onKeydown"])])),_:1})])),_:1})])),_:1}),_(m,null,{default:y((()=>[_(o,{type:"primary",icon:"el-icon-search",onClick:w},{default:y((()=>[G])),_:1})])),_:1})])),_:1},8,["model"])])),_:1}),p.value.batch.enable?(b(),C(O,{key:0,data:p.value.dataList,"selection-data":p.value.batch.selectionDataList,onCheckAll:l[1]||(l[1]=a=>e.$refs.table.toggleAllSelection()),onCheckNull:l[2]||(l[2]=a=>e.$refs.table.clearSelection())},{default:y((()=>[_(o,{size:"default"},{default:y((()=>[J])),_:1}),_(U,null,{default:y((()=>[_(o,{size:"default"},{default:y((()=>[F])),_:1}),_(o,{size:"default"},{default:y((()=>[H])),_:1})])),_:1})])),_:1},8,["data","selection-data"])):V("v-if",!0),v((b(),C(R,{ref:"table",class:"list-table",data:p.value.dataList,border:"",stripe:"","highlight-current-row":"",onSortChange:P,onSelectionChange:l[3]||(l[3]=e=>p.value.batch.selectionDataList=e)},{default:y((()=>[p.value.batch.enable?(b(),C(D,{key:0,type:"selection",width:"40"})):V("v-if",!0),_(D,{prop:"title",label:"部门"}),_(D,{label:"操作",width:"250",align:"center"},{default:y((e=>[_(o,{type:"info",size:"small",plain:"",onClick:a=>{return l=e.row,void r.$window.add({title:"职位管理",name:"PagesExampleGeneralDepartmentJob",params:{department_id:l.id}});var l}},{default:y((()=>[Q])),_:2},1032,["onClick"]),_(o,{type:"primary",size:"small",plain:"",onClick:a=>{return l=e.row,p.value.formModeProps.id=l.id,void(p.value.formModeProps.visible=!0);var l}},{default:y((()=>[T])),_:2},1032,["onClick"]),_(o,{type:"danger",size:"small",plain:"",onClick:a=>{return l=e.row,void r.$confirm(`确认删除「${l.title}」吗？`,"确认信息").then((()=>{r.$api.post("pages_example/department/delete",{id:l.id},{baseURL:"/mock/"}).then((()=>{w(),r.$message.success({message:"模拟删除成功",center:!0})}))})).catch((()=>{}));var l}},{default:y((()=>[W])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[E,p.value.loading]]),_(I,{"current-page":x(a).page,total:x(a).total,"page-size":x(a).size,"page-sizes":x(a).sizes,layout:x(a).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:z,onCurrentChange:$},null,8,["current-page","total","page-size","page-sizes","layout"])])),_:1}),["dialog","drawer"].includes(p.value.formMode)?(b(),C(K,{key:0,id:p.value.formModeProps.id,modelValue:p.value.formModeProps.visible,"onUpdate:modelValue":l[4]||(l[4]=e=>p.value.formModeProps.visible=e),mode:p.value.formMode,onSuccess:w},null,8,["id","modelValue","mode"])):V("v-if",!0)])}}}),[["__scopeId","data-v-7efaa048"]]);export{Y as default};
