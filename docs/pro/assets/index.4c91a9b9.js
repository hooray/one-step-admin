
/**
 * 由 One-step-admin 提供技术支持
 * https://hooray.gitee.io/one-step-admin/
 * Powered by One-step-admin
 * https://hooray.github.io/one-step-admin/
 */
    
var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t;import{_ as s}from"./index.e5c277f9.js";import{_ as n}from"./index.990826c2.js";import{_ as d}from"./index.2b1c54ad.js";import{_ as u}from"./index.e3b25878.js";import{r as p,S as m,z as c,ap as f,T as g,o as v,k as b,A as _,x as h,C as y,s as k,t as C,u as x,af as w,m as z,ae as V,l as $,$ as P,j,Z as L}from"./vendor.6ae38f98.js";import{u as M}from"./usePagination.dec420f4.js";import{_ as S}from"./index.9dc02013.js";var O=S({props:{id:{type:[Number,String],default:""}},setup(e,{expose:a}){const l=e,{proxy:t}=y(),o=p({loading:!1,form:{id:l.id,title:""},rules:{title:[{required:!0,message:"请输入部门名称",trigger:"blur"}]}});return m((()=>{""!=o.value.form.id&&(o.value.loading=!0,t.$api.get("pages_example/department/detail",{baseURL:"/mock/",params:{id:o.value.form.id}}).then((e=>{o.value.loading=!1,o.value.form.title=e.data.title})))})),a({submit(e){""==o.value.form.id?t.$refs.form.validate((a=>{a&&t.$api.post("pages_example/department/create",o.value.form,{baseURL:"/mock/"}).then((()=>{t.$message.success({message:"模拟新增成功",center:!0}),e&&e()}))})):t.$refs.form.validate((a=>{a&&t.$api.post("pages_example/department/edit",o.value.form,{baseURL:"/mock/"}).then((()=>{t.$message.success({message:"模拟编辑成功",center:!0}),e&&e()}))}))}}),(e,a)=>{const l=c("el-input"),t=c("el-form-item"),r=c("el-form"),i=f("loading");return g((v(),b("div",null,[_(r,{ref:"form",model:o.value.form,rules:o.value.rules,"label-width":"120px","label-suffix":"："},{default:h((()=>[_(t,{label:"部门",prop:"title"},{default:h((()=>[_(l,{modelValue:o.value.form.title,"onUpdate:modelValue":a[0]||(a[0]=e=>o.value.form.title=e),placeholder:"请输入部门名称"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),[[i,o.value.loading]])}}},[["__scopeId","data-v-7b150428"]]);const U=P("取 消"),D=P("确 定"),R={class:"buttons"},I=P("取 消"),A=P("确 定"),E={props:(K=((e,a)=>{for(var l in a||(a={}))o.call(a,l)&&i(e,l,a[l]);if(t)for(var l of t(a))r.call(a,l)&&i(e,l,a[l]);return e})({},O.props),N={modelValue:{type:Boolean,default:!1},mode:{type:String,default:"dialog",validator:e=>["dialog","drawer"].includes(e)}},a(K,l(N))),emits:["update:modelValue","success"],setup(e,{emit:a}){const l=e,{proxy:t}=y();let o=k({get:function(){return l.modelValue},set:function(e){a("update:modelValue",e)}});const r=k((()=>""==l.id?"新增部门":"编辑部门"));function i(){t.$refs.form.submit((()=>{a("success"),s()}))}function s(){o.value=!1}return(e,a)=>{const t=c("el-button"),n=c("el-dialog"),d=c("el-drawer");return v(),b("div",null,["dialog"===l.mode?(v(),C(n,{key:0,modelValue:x(o),"onUpdate:modelValue":a[0]||(a[0]=e=>w(o)?o.value=e:o=e),title:x(r),width:"600px","close-on-click-modal":!1,"append-to-body":"","destroy-on-close":""},{footer:h((()=>[_(t,{size:"large",onClick:s},{default:h((()=>[U])),_:1}),_(t,{type:"primary",size:"large",onClick:i},{default:h((()=>[D])),_:1})])),default:h((()=>[_(O,V({ref:"form"},e.$props),null,16)])),_:1},8,["modelValue","title"])):"drawer"===l.mode?(v(),C(d,{key:1,modelValue:x(o),"onUpdate:modelValue":a[1]||(a[1]=e=>w(o)?o.value=e:o=e),title:x(r),size:"600px","close-on-click-modal":!1,"custom-class":"form-mode-drawer","destroy-on-close":""},{default:h((()=>[_(O,V({ref:"form"},e.$props,{class:"form-container"}),null,16),$("div",R,[_(t,{size:"large",onClick:s},{default:h((()=>[I])),_:1}),_(t,{type:"primary",size:"large",onClick:i},{default:h((()=>[A])),_:1})])])),_:1},8,["modelValue","title"])):z("v-if",!0)])}}};var K,N,q=S(E,[["__scopeId","data-v-28bd0fdc"]]);const B=P("新增部门"),G=P("筛 选"),J=P("单个批量操作按钮"),T=P("批量操作按钮组1"),Z=P("批量操作按钮组2"),F=P("查看职位"),H=P("编辑"),Q=P("删除"),W=j({name:"PagesExampleDepartmentList"});var X=S(Object.assign(W,{setup(e){const{pagination:a,getParams:l,onSizeChange:t,onCurrentChange:o,onSortChange:r}=M(),{proxy:i}=y(),k=p({loading:!1,formMode:"dialog",formModeProps:{visible:!1,id:""},search:{title:""},batch:{enable:!1,selectionDataList:[]},dataList:[]});function w(){k.value.loading=!0;let e=l();k.value.search.title&&(e.title=k.value.search.title),i.$api.get("pages_example/department/list",{baseURL:"/mock/",params:e}).then((e=>{k.value.loading=!1,k.value.dataList=e.data.list,a.value.total=e.data.total}))}function V(e){t(e).then((()=>w()))}function $(e){o(e).then((()=>w()))}function P(e,a){r(e,a).then((()=>w()))}function j(){k.value.formModeProps.id="",k.value.formModeProps.visible=!0}return m((()=>{w()})),(e,l)=>{const t=u,o=c("el-button"),r=c("el-input"),p=c("el-form-item"),m=c("el-col"),y=c("el-row"),M=c("el-form"),S=d,O=c("el-button-group"),U=n,D=c("el-table-column"),R=c("el-table"),I=c("el-pagination"),A=s,E=f("loading");return v(),b("div",null,[_(t,{title:"部门管理",content:"页面数据为 Mock 示例数据，非真实数据。"}),_(A,null,{default:h((()=>[_(o,{type:"primary",size:"large",icon:"el-icon-plus",onClick:j},{default:h((()=>[B])),_:1}),_(S,null,{default:h((()=>[_(M,{model:k.value.search,size:"default","label-width":"100px","label-suffix":"："},{default:h((()=>[_(y,null,{default:h((()=>[_(m,{span:12},{default:h((()=>[_(p,{label:"部门"},{default:h((()=>[_(r,{modelValue:k.value.search.title,"onUpdate:modelValue":l[0]||(l[0]=e=>k.value.search.title=e),placeholder:"请输入部门，支持模糊查询",clearable:"",onKeydown:L(w,["enter"]),onClear:w},null,8,["modelValue","onKeydown"])])),_:1})])),_:1})])),_:1}),_(p,null,{default:h((()=>[_(o,{type:"primary",icon:"el-icon-search",onClick:w},{default:h((()=>[G])),_:1})])),_:1})])),_:1},8,["model"])])),_:1}),k.value.batch.enable?(v(),C(U,{key:0,data:k.value.dataList,"selection-data":k.value.batch.selectionDataList,onCheckAll:l[1]||(l[1]=a=>e.$refs.table.toggleAllSelection()),onCheckNull:l[2]||(l[2]=a=>e.$refs.table.clearSelection())},{default:h((()=>[_(o,{size:"default"},{default:h((()=>[J])),_:1}),_(O,null,{default:h((()=>[_(o,{size:"default"},{default:h((()=>[T])),_:1}),_(o,{size:"default"},{default:h((()=>[Z])),_:1})])),_:1})])),_:1},8,["data","selection-data"])):z("v-if",!0),g((v(),C(R,{ref:"table",class:"list-table",data:k.value.dataList,border:"",stripe:"","highlight-current-row":"",onSortChange:P,onSelectionChange:l[3]||(l[3]=e=>k.value.batch.selectionDataList=e)},{default:h((()=>[k.value.batch.enable?(v(),C(D,{key:0,type:"selection",width:"40"})):z("v-if",!0),_(D,{prop:"title",label:"部门"}),_(D,{label:"操作",width:"250",align:"center"},{default:h((e=>[_(o,{type:"info",size:"small",plain:"",onClick:a=>{return l=e.row,void i.$window.add({title:"职位管理",name:"PagesExampleGeneralDepartmentJob",params:{department_id:l.id}});var l}},{default:h((()=>[F])),_:2},1032,["onClick"]),_(o,{type:"primary",size:"small",plain:"",onClick:a=>{return l=e.row,k.value.formModeProps.id=l.id,void(k.value.formModeProps.visible=!0);var l}},{default:h((()=>[H])),_:2},1032,["onClick"]),_(o,{type:"danger",size:"small",plain:"",onClick:a=>{return l=e.row,void i.$confirm(`确认删除「${l.title}」吗？`,"确认信息").then((()=>{i.$api.post("pages_example/department/delete",{id:l.id},{baseURL:"/mock/"}).then((()=>{w(),i.$message.success({message:"模拟删除成功",center:!0})}))})).catch((()=>{}));var l}},{default:h((()=>[Q])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[E,k.value.loading]]),_(I,{"current-page":x(a).page,total:x(a).total,"page-size":x(a).size,"page-sizes":x(a).sizes,layout:x(a).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:V,onCurrentChange:$},null,8,["current-page","total","page-size","page-sizes","layout"])])),_:1}),["dialog","drawer"].includes(k.value.formMode)?(v(),C(q,{key:0,id:k.value.formModeProps.id,modelValue:k.value.formModeProps.visible,"onUpdate:modelValue":l[4]||(l[4]=e=>k.value.formModeProps.visible=e),mode:k.value.formMode,onSuccess:w},null,8,["id","modelValue","mode"])):z("v-if",!0)])}}}),[["__scopeId","data-v-8e521bc4"]]);export{X as default};
