
/**
 * 由 One-step-admin 提供技术支持
 * https://hooray.gitee.io/one-step-admin/
 * Powered by One-step-admin
 * https://hooray.github.io/one-step-admin/
 */
    
import{_ as e}from"./index.9c1fa942.js";import{r as a,C as l,c as o,e as t,w as i,n as m,h as n,y as d,t as u,G as r,F as s,i as p}from"./index.05e4ed9f.js";import{E as h,a as c}from"./el-form.48a75487.js";import{E as f,a as b}from"./el-table-column.26ce5f01.js";import{E as _,a as j}from"./el-checkbox.b635827d.js";/* empty css               */import"./el-tooltip.586473e3.js";import"./el-popper.f565a276.js";/* empty css                     *//* empty css                          */import"./el-form-item.e866842d.js";import{E as v}from"./el-input.93d8033e.js";import{_ as z}from"./index.abd93cee.js";/* empty css                */import"./index.dd2c42e8.js";import"./index.48c8fc0e.js";import"./error.76088f19.js";import"./isEqual.dd51095a.js";import"./index.80697eb7.js";import"./event.bca3aed8.js";import"./debounce.c94dc814.js";import"./index.3b5c7952.js";import"./index.5e52605c.js";import"./arrow-down.0a07a387.js";import"./arrow-up.14ab1877.js";import"./style.4190b2a5.js";import"./resize-event.af3ea841.js";import"./browser.28049e2c.js";import"./arrow-right.566166be.js";import"./event.e7ca8317.js";import"./validator.ce3b7d6b.js";import"./typescript.14beffb5.js";import"./index.bebbe66d.js";import"./index.aa8c6f3e.js";import"./isNil.aac33454.js";const g={setup(g){const x=a([{name:"站点管理",module:"station",authorization_list:[{name:"查看列表",module:"list"},{name:"查看详情",module:"info"},{name:"停用",module:"disabled"},{name:"编辑",module:"edit"},{name:"启用",module:"enable"}]},{name:"部门管理",module:"department",authorization_list:[{name:"查看列表",module:"list"},{name:"查看详情",module:"info"},{name:"删除",module:"delete"},{name:"编辑",module:"edit"},{name:"新增",module:"new"}]},{name:"职位管理",module:"department_job",authorization_list:[{name:"查看列表",module:"list"},{name:"查看详情",module:"info"},{name:"新增",module:"new"},{name:"编辑",module:"edit"},{name:"删除",module:"delete"}]},{name:"角色管理",module:"role",authorization_list:[{name:"查看列表",module:"list"},{name:"查看详情",module:"info"},{name:"删除",module:"delete"},{name:"编辑",module:"edit"},{name:"新增",module:"new"}]},{name:"管理员管理",module:"admin_manager",authorization_list:[{name:"查看列表",module:"list"},{name:"查看详情",module:"info"},{name:"编辑权限",module:"authorization_edit"},{name:"查看权限详情",module:"authorization_info"},{name:"删除",module:"delete"},{name:"停用",module:"disabled"},{name:"编辑",module:"edit"},{name:"启用",module:"enable"},{name:"新增",module:"new"},{name:"重置密码",module:"reset"}]}]),w=a({name:"",brief:"",authorization_list:[]}),$=a({name:[{required:!0,message:"请输入名称",trigger:"blur"}],authorization_list:[{validator:(e,a,l)=>{0==a.length?l(new Error("至少选择一个权限")):l()},trigger:"change"}]}),V=l((()=>{let e=[];return x.value.forEach((a=>{let l=[];a.authorization_list.forEach((e=>{w.value.authorization_list.includes(`${a.module}.${e.module}`)&&l.push(`${a.module}.${e.module}`)})),e.push({checkAll:l.length==a.authorization_list.length,indeterminate:l.length>0&&l.length<a.authorization_list.length})})),e}));return(a,l)=>{const g=z,E=v,k=h,y=_,U=f,A=j,C=b,q=c,R=e;return m(),o("div",null,[t(g,{title:"权限",content:"该页面生成的权限格式，可直接用于本项目的权限模式"}),t(R,null,{default:i((()=>[t(q,{model:w.value,rules:$.value,"label-width":"80px","label-suffix":"："},{default:i((()=>[t(k,{label:"名称",prop:"name"},{default:i((()=>[t(E,{modelValue:w.value.name,"onUpdate:modelValue":l[0]||(l[0]=e=>w.value.name=e),placeholder:"请输入角色名称"},null,8,["modelValue"])])),_:1}),t(k,{label:"简介"},{default:i((()=>[t(E,{modelValue:w.value.brief,"onUpdate:modelValue":l[1]||(l[1]=e=>w.value.brief=e),type:"textarea",autosize:{minRows:2,maxRows:6},placeholder:"请输入角色简介"},null,8,["modelValue"])])),_:1}),t(k,{label:"权限",prop:"authorization_list"},{default:i((()=>[t(C,{data:x.value,border:"",stripe:"","highlight-current-row":"",style:{"line-height":"normal"}},{default:i((()=>[t(U,{prop:"name",width:"200",label:"模块"},{default:i((e=>[t(y,{modelValue:n(V)[e.$index].checkAll,"onUpdate:modelValue":a=>n(V)[e.$index].checkAll=a,indeterminate:n(V)[e.$index].indeterminate,onChange:a=>{return l=a,o=e.$index,void(l?x.value[o].authorization_list.forEach((e=>{w.value.authorization_list.includes(`${x.value[o].module}.${e.module}`)||w.value.authorization_list.push(`${x.value[o].module}.${e.module}`)})):x.value[o].authorization_list.forEach((e=>{w.value.authorization_list=w.value.authorization_list.filter((a=>a!=`${x.value[o].module}.${e.module}`))})));var l,o}},{default:i((()=>[d(u(e.row.name),1)])),_:2},1032,["modelValue","onUpdate:modelValue","indeterminate","onChange"])])),_:1}),t(U,{label:"权限"},{default:i((e=>[t(A,{modelValue:w.value.authorization_list,"onUpdate:modelValue":l[2]||(l[2]=e=>w.value.authorization_list=e)},{default:i((()=>[(m(!0),o(r,null,s(e.row.authorization_list,(a=>(m(),p(y,{key:`${e.row.module}.${a.module}`,label:`${e.row.module}.${a.module}`},{default:i((()=>[d(u(a.name),1)])),_:2},1032,["label"])))),128))])),_:2},1032,["modelValue"])])),_:1})])),_:1},8,["data"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])}}};export{g as default};
