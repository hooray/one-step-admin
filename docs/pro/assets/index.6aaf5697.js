
/**
 * 由 One-step-admin 提供技术支持
 * https://hooray.gitee.io/one-step-admin/
 * Powered by One-step-admin
 * https://hooray.github.io/one-step-admin/
 */
    
import{_ as e}from"./index.3a8d78a1.js";import{_ as a}from"./index.b11652ae.js";import{j as l,r as s,k as r,A as o,x as d,V as t,X as u,z as p,o as n,$ as m,C as i}from"./vendor.b0dde714.js";import{a as w}from"./index.8d8a4cfe.js";const c=m("提交"),f=l({name:"PersonalEditPassword"}),g=Object.assign(f,{setup(l){const m=t(),f=u(),{proxy:g}=i(),h=w(),v=s({password:"",newpassword:"",checkpassword:""}),b=s({password:[{required:!0,message:"请输入原密码",trigger:"blur"}],newpassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}],checkpassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{validator:(e,a,l)=>{a!==v.value.newpassword?l(new Error("请确认新密码")):l()}}]});function _(){g.$refs.formRef.validate((e=>{e&&h.editPassword(v.value).then((()=>{g.$message({type:"success",message:"模拟修改成功，请重新登录"}),h.logout().then((()=>{f.push({name:"login",query:{redirect:m.fullPath}})}))})).catch((()=>{}))}))}return(l,s)=>{const t=a,u=p("el-input"),m=p("el-form-item"),i=p("el-form"),w=p("el-col"),f=p("el-row"),g=p("el-button"),h=e;return n(),r("div",null,[o(h,null,{action:d((()=>[o(g,{type:"primary",size:"small",onClick:_},{default:d((()=>[c])),_:1})])),default:d((()=>[o(t,{title:"修改密码",content:"定期修改密码可以提高帐号安全性噢~"}),o(f,null,{default:d((()=>[o(w,{md:24,lg:12},{default:d((()=>[o(i,{ref_key:"form",ref:v,model:v.value,rules:b.value,"label-width":"120px"},{default:d((()=>[o(m,{label:"原密码",prop:"password"},{default:d((()=>[o(u,{modelValue:v.value.password,"onUpdate:modelValue":s[0]||(s[0]=e=>v.value.password=e),type:"password",placeholder:"请输入原密码"},null,8,["modelValue"])])),_:1}),o(m,{label:"新密码",prop:"newpassword"},{default:d((()=>[o(u,{modelValue:v.value.newpassword,"onUpdate:modelValue":s[1]||(s[1]=e=>v.value.newpassword=e),type:"password",placeholder:"请输入原密码"},null,8,["modelValue"])])),_:1}),o(m,{label:"确认新密码",prop:"checkpassword"},{default:d((()=>[o(u,{modelValue:v.value.checkpassword,"onUpdate:modelValue":s[2]||(s[2]=e=>v.value.checkpassword=e),type:"password",placeholder:"请输入原密码"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1})])),_:1})])}}});export{g as default};
