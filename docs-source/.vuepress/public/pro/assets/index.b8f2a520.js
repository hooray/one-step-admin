
/**
 * 由 One-step-admin 提供技术支持
 * https://hooray.gitee.io/one-step-admin/
 * Powered by One-step-admin
 * https://hooray.github.io/one-step-admin/
 */
    
var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,s=(a,l,o)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[l]=o;import{_ as i,r as d,f as n,A as u,h as m,o as c,c as p,g as f,w as b,y as g,B as v,C as h,j as _,i as j,ba as y,k as w,as as x,a as V,d as k,E as C,q as z,v as U}from"./index.b046d3e8.js";import{v as $}from"./el-loading.6c4fb8ac.js";import{_ as E}from"./index.e4264495.js";import{E as P}from"./el-pagination.59d8beda.js";import{E as L}from"./el-input.33bb8256.js";/* empty css               */import"./el-select.e072e51c.js";/* empty css                     */import"./el-popper.f248985f.js";import{E as M,a as S}from"./el-table-column.45f81e02.js";import"./el-checkbox.004327db.js";import"./el-tooltip.586473e3.js";import{E as O,a as R,b as K}from"./el-dropdown-item.a1a5a66e.js";import{E as q}from"./el-button.12f8eb95.js";import{E as D}from"./el-switch.ee336242.js";import{_ as I}from"./index.c3a3d397.js";import{_ as A}from"./index.ece65aa1.js";import{E as N,a as B}from"./el-form.16cffb05.js";/* empty css                       *//* empty css                        */import{E as T}from"./el-row.d9220e4c.js";import{E as F}from"./el-col.62e05cfa.js";import"./el-form-item.e866842d.js";/* empty css                */import{_ as G}from"./index.f1e68254.js";import{_ as H}from"./index.f15ab100.js";import{a as J,E as Q}from"./el-drawer.57549ac9.js";import"./el-overlay.dc466e10.js";import{u as W}from"./usePagination.97f1249b.js";import{E as X}from"./el-dialog.53e91533.js";import{E as Y,a as Z}from"./index.613dd961.js";import{E as ee}from"./index.aa27bd74.js";import"./style.3c5afb48.js";import"./arrow-left.e56cde29.js";import"./arrow-right.361e9889.js";import"./typescript.14beffb5.js";import"./index.a1803c34.js";import"./isEqual.7dffa8e0.js";import"./d-arrow-right.3f7b73eb.js";import"./error.76088f19.js";import"./index.2b0c4341.js";import"./event.e7ca8317.js";import"./index.b8b1886a.js";import"./index.16ef6f7e.js";import"./isNil.aac33454.js";import"./index.56c2243e.js";import"./resize-event.8982dae9.js";import"./scroll.df30964b.js";import"./debounce.b773226e.js";import"./index.fe49fc4b.js";import"./validator.b6b6feae.js";import"./deprecation.56e2aeee.js";import"./index.a16a43f7.js";import"./arrow-up.fa4eb789.js";import"./event.bca3aed8.js";import"./arrow-down.190c6c2a.js";import"./browser.32092e0d.js";import"./caret-bottom.2299f793.js";import"./caret-top.574ecaea.js";import"./aria.366529e4.js";const ae=g("保密"),le=g("男"),oe=g("女");var te=i({props:{id:{type:[Number,String],default:""}},setup(e,{expose:a}){const l=e,{proxy:o}=v(),t=d({loading:!1,form:{id:l.id,account:"",name:"",mobile:"",sex:"2"},rules:{account:[{required:!0,message:"请输入帐号",trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:(e,a,l)=>{let r={key:"mobile",value:a};""!=t.value.form.id&&(r.id=t.value.form.id),o.$api.get("pages_example/manager/check",{baseURL:"/mock/",params:r}).then((e=>{e.data.exist?l(new Error("手机号已存在")):l()}))},trigger:"blur"}]}});return n((()=>{""!=t.value.form.id&&(t.value.loading=!0,o.$api.get("pages_example/manager/detail",{baseURL:"/mock/",params:{id:t.value.form.id}}).then((e=>{t.value.loading=!1,t.value.form.account=e.data.account,t.value.form.name=e.data.name,t.value.form.mobile=e.data.mobile})))})),a({submit(e){""==t.value.form.id?o.$refs.form.validate((a=>{a&&o.$api.post("pages_example/manager/create",t.value.form,{baseURL:"/mock/"}).then((()=>{u.success({message:"模拟新增成功",center:!0}),e&&e()}))})):o.$refs.form.validate((a=>{a&&o.$api.post("pages_example/manager/edit",t.value.form,{baseURL:"/mock/"}).then((()=>{u.success({message:"模拟编辑成功",center:!0}),e&&e()}))}))}}),(e,a)=>{const l=L,o=N,r=Y,s=Z,i=B,d=$;return m((c(),p("div",null,[f(i,{ref:"form",model:t.value.form,rules:t.value.rules,"label-width":"120px","label-suffix":"："},{default:b((()=>[f(o,{label:"帐号",prop:"account"},{default:b((()=>[f(l,{modelValue:t.value.form.account,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value.form.account=e),placeholder:"请输入帐号"},null,8,["modelValue"])])),_:1}),f(o,{label:"姓名",prop:"name"},{default:b((()=>[f(l,{modelValue:t.value.form.name,"onUpdate:modelValue":a[1]||(a[1]=e=>t.value.form.name=e),placeholder:"请输入姓名"},null,8,["modelValue"])])),_:1}),f(o,{label:"手机号",prop:"mobile"},{default:b((()=>[f(l,{modelValue:t.value.form.mobile,"onUpdate:modelValue":a[2]||(a[2]=e=>t.value.form.mobile=e),placeholder:"请输入手机号"},null,8,["modelValue"])])),_:1}),f(o,{label:"性别",prop:"sex"},{default:b((()=>[f(s,{modelValue:t.value.form.sex,"onUpdate:modelValue":a[3]||(a[3]=e=>t.value.form.sex=e),size:"small"},{default:b((()=>[f(r,{label:"2"},{default:b((()=>[ae])),_:1}),f(r,{label:"1"},{default:b((()=>[le])),_:1}),f(r,{label:"0"},{default:b((()=>[oe])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),[[d,t.value.loading]])}}},[["__scopeId","data-v-7bd26ffc"]]);const re=g("取 消"),se=g("确 定"),ie={class:"buttons"},de=g("取 消"),ne=g("确 定"),ue={props:(me=((e,a)=>{for(var l in a||(a={}))t.call(a,l)&&s(e,l,a[l]);if(o)for(var l of o(a))r.call(a,l)&&s(e,l,a[l]);return e})({},te.props),ce={modelValue:{type:Boolean,default:!1},mode:{type:String,default:"dialog",validator:e=>["dialog","drawer"].includes(e)}},a(me,l(ce))),emits:["update:modelValue","success"],setup(e,{emit:a}){const l=e,{proxy:o}=v();let t=h({get:function(){return l.modelValue},set:function(e){a("update:modelValue",e)}});const r=h((()=>""==l.id?"新增管理员":"编辑管理员"));function s(){o.$refs.form.submit((()=>{a("success"),i()}))}function i(){t.value=!1}return(e,a)=>{const o=q,d=X,n=J;return c(),p("div",null,["dialog"===l.mode?(c(),_(d,{key:0,modelValue:j(t),"onUpdate:modelValue":a[0]||(a[0]=e=>y(t)?t.value=e:t=e),title:j(r),width:"600px","close-on-click-modal":!1,"append-to-body":"","destroy-on-close":""},{footer:b((()=>[f(o,{size:"large",onClick:i},{default:b((()=>[re])),_:1}),f(o,{type:"primary",size:"large",onClick:s},{default:b((()=>[se])),_:1})])),default:b((()=>[f(te,x({ref:"form"},e.$props),null,16)])),_:1},8,["modelValue","title"])):"drawer"===l.mode?(c(),_(n,{key:1,modelValue:j(t),"onUpdate:modelValue":a[1]||(a[1]=e=>y(t)?t.value=e:t=e),title:j(r),size:"600px","close-on-click-modal":!1,"custom-class":"form-mode-drawer","destroy-on-close":""},{default:b((()=>[f(te,x({ref:"form"},e.$props,{class:"form-container"}),null,16),V("div",ie,[f(o,{size:"large",onClick:i},{default:b((()=>[de])),_:1}),f(o,{type:"primary",size:"large",onClick:s},{default:b((()=>[ne])),_:1})])])),_:1},8,["modelValue","title"])):w("v-if",!0)])}}};var me,ce,pe=i(ue,[["__scopeId","data-v-3815ce8f"]]);const fe=g(" 新增管理员 "),be=g("全部"),ge=g("男"),ve=g("女"),he=g("保密"),_e=g(" 筛选 "),je=g("批量操作"),ye=g("男"),we=g("女"),xe=g("保密"),Ve=g("编辑"),ke=g(" 更多操作 "),Ce=g("重置密码"),ze=g("删除"),Ue=k({name:"PagesExampleManagerList"});var $e=i(Object.assign(Ue,{setup(e){const{pagination:a,getParams:l,onSizeChange:o,onCurrentChange:t,onSortChange:r}=W(),{proxy:s}=v(),i=d({loading:!1,formMode:"dialog",formModeProps:{visible:!1,id:""},search:{account:"",name:"",mobile:"",sex:""},searchMore:!1,batch:{enable:!0,selectionDataList:[]},dataList:[]});function g(){i.value.loading=!0;let e=l();i.value.search.account&&(e.account=i.value.search.account),i.value.search.name&&(e.name=i.value.search.name),i.value.search.mobile&&(e.mobile=i.value.search.mobile),""!=i.value.search.sex&&(e.sex=i.value.search.sex),s.$api.get("pages_example/manager/list",{baseURL:"/mock/",params:e}).then((e=>{i.value.loading=!1,i.value.dataList=e.data.list,a.value.total=e.data.total}))}function h(e){o(e).then((()=>g()))}function y(e){t(e).then((()=>g()))}function x(e,a){r(e,a).then((()=>g()))}function V(){i.value.formModeProps.id="",i.value.formModeProps.visible=!0}function k(e,a){switch(e){case"resetPassword":!function(e){Q.confirm(`确认将「${e.account}」的密码重置为 “123456” 吗？`,"确认信息").then((()=>{s.$api.post("pages_example/manager/password/reset",{id:e.id},{baseURL:"/mock/"}).then((()=>{u.success({message:"模拟重置成功",center:!0})}))})).catch((()=>{}))}(a);break;case"delete":!function(e){Q.confirm(`确认删除「${e.account}」管理员吗？`,"确认信息").then((()=>{s.$api.post("pages_example/manager/delete",{id:e.id},{baseURL:"/mock/"}).then((()=>{g(),u.success({message:"模拟删除成功",center:!0})}))})).catch((()=>{}))}(a)}}return n((()=>{g()})),(e,l)=>{const o=H,t=G,r=C,d=q,n=L,v=N,J=F,W=T,X=Y,ae=Z,le=B,oe=A,te=I,re=M,se=ee,ie=D,de=O,ne=R,ue=K,me=S,ce=P,Ue=E,$e=$;return c(),p("div",null,[f(o,{title:"管理员管理",content:"页面数据为 Mock 示例数据，非真实数据。"}),f(Ue,null,{default:b((()=>[f(d,{type:"primary",size:"large",onClick:V},{icon:b((()=>[f(r,null,{default:b((()=>[f(t,{name:"ep:plus"})])),_:1})])),default:b((()=>[fe])),_:1}),f(oe,{"show-more":"",onToggle:l[4]||(l[4]=e=>i.value.searchMore=e)},{default:b((()=>[f(le,{model:i.value.search,size:"default","label-width":"100px","label-suffix":"："},{default:b((()=>[f(W,null,{default:b((()=>[f(J,{md:12},{default:b((()=>[f(v,{label:"帐号"},{default:b((()=>[f(n,{modelValue:i.value.search.account,"onUpdate:modelValue":l[0]||(l[0]=e=>i.value.search.account=e),placeholder:"请输入帐号，支持模糊查询",clearable:"",onKeydown:z(g,["enter"]),onClear:g},null,8,["modelValue","onKeydown"])])),_:1})])),_:1}),f(J,{md:12},{default:b((()=>[f(v,{label:"姓名"},{default:b((()=>[f(n,{modelValue:i.value.search.name,"onUpdate:modelValue":l[1]||(l[1]=e=>i.value.search.name=e),placeholder:"请输入姓名，支持模糊查询",clearable:"",onKeydown:z(g,["enter"]),onClear:g},null,8,["modelValue","onKeydown"])])),_:1})])),_:1})])),_:1}),m(f(W,null,{default:b((()=>[f(J,{md:12},{default:b((()=>[f(v,{label:"手机号"},{default:b((()=>[f(n,{modelValue:i.value.search.mobile,"onUpdate:modelValue":l[2]||(l[2]=e=>i.value.search.mobile=e),placeholder:"请输入手机号",clearable:"",onKeydown:z(g,["enter"]),onClear:g},null,8,["modelValue","onKeydown"])])),_:1})])),_:1}),f(J,{md:12},{default:b((()=>[f(v,{label:"性别"},{default:b((()=>[f(ae,{modelValue:i.value.search.sex,"onUpdate:modelValue":l[3]||(l[3]=e=>i.value.search.sex=e),onChange:g},{default:b((()=>[f(X,{label:""},{default:b((()=>[be])),_:1}),f(X,{label:"1"},{default:b((()=>[ge])),_:1}),f(X,{label:"0"},{default:b((()=>[ve])),_:1}),f(X,{label:"2"},{default:b((()=>[he])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},512),[[U,i.value.searchMore]]),f(v,null,{default:b((()=>[f(d,{type:"primary",onClick:g},{icon:b((()=>[f(r,null,{default:b((()=>[f(t,{name:"ep:search"})])),_:1})])),default:b((()=>[_e])),_:1})])),_:1})])),_:1},8,["model"])])),_:1}),i.value.batch.enable?(c(),_(te,{key:0,data:i.value.dataList,"selection-data":i.value.batch.selectionDataList,onCheckAll:l[5]||(l[5]=a=>e.$refs.table.toggleAllSelection()),onCheckNull:l[6]||(l[6]=a=>e.$refs.table.clearSelection())},{default:b((()=>[f(d,{size:"default"},{default:b((()=>[je])),_:1})])),_:1},8,["data","selection-data"])):w("v-if",!0),m((c(),_(me,{ref:"table",class:"list-table",data:i.value.dataList,border:"",stripe:"","highlight-current-row":"",onSortChange:x,onSelectionChange:l[7]||(l[7]=e=>i.value.batch.selectionDataList=e)},{default:b((()=>[i.value.batch.enable?(c(),_(re,{key:0,type:"selection",align:"center",fixed:""})):w("v-if",!0),f(re,{prop:"account",sortable:"",label:"帐号"}),f(re,{prop:"name",label:"姓名",width:"100",align:"center"}),f(re,{prop:"sex",label:"性别",width:"100",align:"center"},{default:b((e=>[1==e.row.sex?(c(),_(se,{key:0,type:"success",size:"small"},{default:b((()=>[ye])),_:1})):0==e.row.sex?(c(),_(se,{key:1,type:"warning",size:"small"},{default:b((()=>[we])),_:1})):(c(),_(se,{key:2,type:"info",size:"small"},{default:b((()=>[xe])),_:1}))])),_:1}),f(re,{prop:"mobile",label:"手机号",width:"150",align:"center"}),f(re,{label:"状态",width:"100",align:"center"},{default:b((e=>[f(ie,{modelValue:e.row.status,"onUpdate:modelValue":a=>e.row.status=a,onChange:a=>{return l=a,o=e.row,void Q.confirm(`确认${l?"启用":"停用"}「${o.account}」吗？`,"确认信息").then((()=>{s.$api.post("pages_example/manager/change/status",{id:o.id,status:l},{baseURL:"/mock/"}).then((()=>{u.success({message:`模拟${l?"启用":"停用"}成功`,center:!0})}))})).catch((()=>{o.status=!l}));var l,o}},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:1}),f(re,{label:"操作",width:"200",align:"center",fixed:"right"},{default:b((e=>[f(d,{type:"primary",size:"small",plain:"",onClick:a=>{return l=e.row,i.value.formModeProps.id=l.id,void(i.value.formModeProps.visible=!0);var l}},{default:b((()=>[Ve])),_:2},1032,["onClick"]),f(ue,{onCommand:a=>k(a,e.row)},{dropdown:b((()=>[f(ne,null,{default:b((()=>[f(de,{command:"resetPassword"},{default:b((()=>[Ce])),_:1}),f(de,{command:"delete",divided:""},{default:b((()=>[ze])),_:1})])),_:1})])),default:b((()=>[f(d,{size:"small"},{default:b((()=>[ke,f(r,{class:"el-icon--right"},{default:b((()=>[f(t,{name:"ep:arrow-down"})])),_:1})])),_:1})])),_:2},1032,["onCommand"])])),_:1})])),_:1},8,["data"])),[[$e,i.value.loading]]),f(ce,{"current-page":j(a).page,total:j(a).total,"page-size":j(a).size,"page-sizes":j(a).sizes,layout:j(a).layout,"hide-on-single-page":!1,class:"pagination",background:"",onCurrentChange:y,onSizeChange:h},null,8,["current-page","total","page-size","page-sizes","layout"])])),_:1}),["dialog","drawer"].includes(i.value.formMode)?(c(),_(pe,{key:0,id:i.value.formModeProps.id,modelValue:i.value.formModeProps.visible,"onUpdate:modelValue":l[8]||(l[8]=e=>i.value.formModeProps.visible=e),mode:i.value.formMode,onSuccess:g},null,8,["id","modelValue","mode"])):w("v-if",!0)])}}}),[["__scopeId","data-v-7265d160"]]);export{$e as default};
