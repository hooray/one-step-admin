
/**
 * 由 One-step-admin 提供技术支持
 * https://hooray.gitee.io/one-step-admin/
 * Powered by One-step-admin
 * https://hooray.github.io/one-step-admin/
 */
    
import{_ as e}from"./index.58128ebe.js";import{d as s,a,r,c as l,e as o,f as d,k as t,l as p,m,s as u,y as i,z as n}from"./index.cc1bbbc5.js";import{E as c}from"./el-button.1491974b.js";import{E as f}from"./el-row.f4ab295e.js";import{E as w}from"./el-col.2d1207dc.js";import{E as b,a as j}from"./el-form.59851de3.js";import"./el-form-item.e866842d.js";import{E as g}from"./el-input.aeca5281.js";import{_ as h}from"./index.7d2f4006.js";/* empty css                   */import"./el-scrollbar.9a2c9297.js";import"./error.b438369f.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./index.b70656fd.js";import"./index.b88bc1db.js";import"./typescript.b0ac2d0c.js";import"./isEqual.6d21abe3.js";import"./event.75bf56a9.js";import"./index.5dd31558.js";import"./isNil.aac33454.js";const v=u("提交"),x=s({name:"PersonalEditPassword"}),_=Object.assign(x,{setup(s){const u=t(),x=p(),{proxy:_}=n(),y=a(),V=r({password:"",newpassword:"",checkpassword:""}),E=r({password:[{required:!0,message:"请输入原密码",trigger:"blur"}],newpassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}],checkpassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{validator:(e,s,a)=>{s!==V.value.newpassword?a(new Error("请确认新密码")):a()}}]});function k(){_.$refs.formRef.validate((e=>{e&&y.editPassword(V.value).then((()=>{i({type:"success",message:"模拟修改成功，请重新登录"}),y.logout().then((()=>{x.push({name:"login",query:{redirect:u.fullPath}})}))})).catch((()=>{}))}))}return(s,a)=>{const r=h,t=g,p=b,u=j,i=w,n=f,x=c,_=e;return m(),l("div",null,[o(_,null,{action:d((()=>[o(x,{type:"primary",size:"large",onClick:k},{default:d((()=>[v])),_:1})])),default:d((()=>[o(r,{title:"修改密码",content:"定期修改密码可以提高帐号安全性噢~"}),o(n,null,{default:d((()=>[o(i,{md:24,lg:12},{default:d((()=>[o(u,{ref:"formRef",model:V.value,rules:E.value,"label-width":"120px"},{default:d((()=>[o(p,{label:"原密码",prop:"password"},{default:d((()=>[o(t,{modelValue:V.value.password,"onUpdate:modelValue":a[0]||(a[0]=e=>V.value.password=e),type:"password",placeholder:"请输入原密码"},null,8,["modelValue"])])),_:1}),o(p,{label:"新密码",prop:"newpassword"},{default:d((()=>[o(t,{modelValue:V.value.newpassword,"onUpdate:modelValue":a[1]||(a[1]=e=>V.value.newpassword=e),type:"password",placeholder:"请输入原密码"},null,8,["modelValue"])])),_:1}),o(p,{label:"确认新密码",prop:"checkpassword"},{default:d((()=>[o(t,{modelValue:V.value.checkpassword,"onUpdate:modelValue":a[2]||(a[2]=e=>V.value.checkpassword=e),type:"password",placeholder:"请输入原密码"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1})])),_:1})])}}});export{_ as default};
