
/**
 * 由 One-step-admin 提供技术支持
 * https://hooray.gitee.io/one-step-admin/
 * Powered by One-step-admin
 * https://hooray.github.io/one-step-admin/
 */
    
var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t;import{_ as d}from"./index.e5c277f9.js";import{_ as s}from"./index.990826c2.js";import{_ as n}from"./index.2b1c54ad.js";import{_ as u}from"./index.e3b25878.js";import{r as p,S as m,z as c,ap as f,T as g,o as v,k as b,A as _,x as h,C as y,s as k,t as x,u as w,af as C,m as z,ae as $,l as j,$ as V,j as P,Z as L}from"./vendor.6ae38f98.js";import{u as S}from"./usePagination.dec420f4.js";import{_ as M}from"./index.9dc02013.js";var O=M({props:{id:{type:[Number,String],default:""},departmentId:{type:[Number,String],default:""}},setup(e,{expose:a}){const l=e,{proxy:t}=y(),o=p({loading:!1,form:{id:l.id,department_id:l.departmentId,title:""},rules:{title:[{required:!0,message:"请输入职位名称",trigger:"blur"}]}});return m((()=>{""!=o.value.form.id&&(o.value.loading=!0,t.$api.get("pages_example/job/detail",{baseURL:"/mock/",params:{id:o.value.form.id,department_id:o.value.form.department_id}}).then((e=>{o.value.loading=!1,o.value.form.title=e.data.title})))})),a({submit(e){""==o.value.form.id?t.$refs.form.validate((a=>{a&&t.$api.post("pages_example/job/create",o.value.form,{baseURL:"/mock/"}).then((()=>{t.$message.success({message:"模拟新增成功",center:!0}),e&&e()}))})):t.$refs.form.validate((a=>{a&&t.$api.post("pages_example/job/edit",o.value.form,{baseURL:"/mock/"}).then((()=>{t.$message.success({message:"模拟编辑成功",center:!0}),e&&e()}))}))}}),(e,a)=>{const l=c("el-input"),t=c("el-form-item"),r=c("el-form"),i=f("loading");return g((v(),b("div",null,[_(r,{ref:"form",model:o.value.form,rules:o.value.rules,"label-width":"120px","label-suffix":"："},{default:h((()=>[_(t,{label:"职位",prop:"title"},{default:h((()=>[_(l,{modelValue:o.value.form.title,"onUpdate:modelValue":a[0]||(a[0]=e=>o.value.form.title=e),placeholder:"请输入职位名称"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),[[i,o.value.loading]])}}},[["__scopeId","data-v-25293d11"]]);const U=V("取 消"),D=V("确 定"),I={class:"buttons"},R=V("取 消"),E=V("确 定"),A={props:(N=((e,a)=>{for(var l in a||(a={}))o.call(a,l)&&i(e,l,a[l]);if(t)for(var l of t(a))r.call(a,l)&&i(e,l,a[l]);return e})({},O.props),G={modelValue:{type:Boolean,default:!1},mode:{type:String,default:"dialog",validator:e=>["dialog","drawer"].includes(e)}},a(N,l(G))),emits:["update:modelValue","success"],setup(e,{emit:a}){const l=e,{proxy:t}=y();let o=k({get:function(){return l.modelValue},set:function(e){a("update:modelValue",e)}});const r=k((()=>""==l.id?"新增职位":"编辑职位"));function i(){t.$refs.form.submit((()=>{a("success"),d()}))}function d(){o.value=!1}return(e,a)=>{const t=c("el-button"),s=c("el-dialog"),n=c("el-drawer");return v(),b("div",null,["dialog"===l.mode?(v(),x(s,{key:0,modelValue:w(o),"onUpdate:modelValue":a[0]||(a[0]=e=>C(o)?o.value=e:o=e),title:w(r),width:"600px","close-on-click-modal":!1,"append-to-body":"","destroy-on-close":""},{footer:h((()=>[_(t,{size:"large",onClick:d},{default:h((()=>[U])),_:1}),_(t,{type:"primary",size:"large",onClick:i},{default:h((()=>[D])),_:1})])),default:h((()=>[_(O,$({ref:"form"},e.$props),null,16)])),_:1},8,["modelValue","title"])):"drawer"===l.mode?(v(),x(n,{key:1,modelValue:w(o),"onUpdate:modelValue":a[1]||(a[1]=e=>C(o)?o.value=e:o=e),title:w(r),size:"600px","close-on-click-modal":!1,"custom-class":"form-mode-drawer","destroy-on-close":""},{default:h((()=>[_(O,$({ref:"form"},e.$props,{class:"form-container"}),null,16),j("div",I,[_(t,{size:"large",onClick:d},{default:h((()=>[R])),_:1}),_(t,{type:"primary",size:"large",onClick:i},{default:h((()=>[E])),_:1})])])),_:1},8,["modelValue","title"])):z("v-if",!0)])}}};var N,G,J=M(A,[["__scopeId","data-v-febe6de6"]]);const K=V("返回"),q=V("新增职位"),B=V("筛 选"),T=V("单个批量操作按钮"),Z=V("批量操作按钮组1"),F=V("批量操作按钮组2"),H=V("编辑"),Q=V("删除"),W=P({name:"PagesExampleDepartmentJobList"});var X=M(Object.assign(W,{props:{params:{type:Object}},setup(e){const a=e,{pagination:l,getParams:t,onSizeChange:o,onCurrentChange:r,onSortChange:i}=S(),{proxy:k}=y(),C=p({loading:!1,formMode:"dialog",formModeProps:{visible:!1,id:""},search:{title:""},batch:{enable:!1,selectionDataList:[]},dataList:[],department:""});function $(){C.value.loading=!0;let e=t();e.department_id=a.params.department_id,C.value.search.title&&(e.title=C.value.search.title),k.$api.get("pages_example/job/list",{baseURL:"/mock/",params:e}).then((e=>{C.value.loading=!1,C.value.dataList=e.data.list,l.value.total=e.data.total}))}function j(e){o(e).then((()=>$()))}function V(e){r(e).then((()=>$()))}function P(e,a){i(e,a).then((()=>$()))}function M(){C.value.formModeProps.id="",C.value.formModeProps.visible=!0}return m((()=>{k.$api.get("pages_example/department/detail",{baseURL:"/mock/",params:{id:a.params.department_id}}).then((e=>{C.value.department=e.data.title})),$()})),(e,t)=>{const o=c("el-button"),r=u,i=c("el-input"),p=c("el-form-item"),m=c("el-col"),y=c("el-row"),S=c("el-form"),O=n,U=c("el-button-group"),D=s,I=c("el-table-column"),R=c("el-table"),E=c("el-pagination"),A=d,N=f("loading");return v(),b("div",null,[_(r,{title:`「${C.value.department}」职位管理`,content:"页面数据为 Mock 示例数据，非真实数据。"},{default:h((()=>[_(o,{icon:"el-icon-arrow-left",size:"default",round:"",onClick:t[0]||(t[0]=a=>{e.$window.add("PagesExampleGeneralDepartment"),e.$window.remove("PagesExampleGeneralDepartmentJob")})},{default:h((()=>[K])),_:1})])),_:1},8,["title"]),_(A,null,{default:h((()=>[_(o,{type:"primary",size:"large",icon:"el-icon-plus",onClick:M},{default:h((()=>[q])),_:1}),_(O,null,{default:h((()=>[_(S,{model:C.value.search,size:"default","label-width":"100px","label-suffix":"："},{default:h((()=>[_(y,null,{default:h((()=>[_(m,{span:12},{default:h((()=>[_(p,{label:"职位"},{default:h((()=>[_(i,{modelValue:C.value.search.title,"onUpdate:modelValue":t[1]||(t[1]=e=>C.value.search.title=e),placeholder:"请输入职位名称，支持模糊查询",clearable:"",onKeydown:L($,["enter"]),onClear:$},null,8,["modelValue","onKeydown"])])),_:1})])),_:1})])),_:1}),_(p,null,{default:h((()=>[_(o,{type:"primary",icon:"el-icon-search",onClick:$},{default:h((()=>[B])),_:1})])),_:1})])),_:1},8,["model"])])),_:1}),C.value.batch.enable?(v(),x(D,{key:0,data:C.value.dataList,"selection-data":C.value.batch.selectionDataList,onCheckAll:t[2]||(t[2]=a=>e.$refs.table.toggleAllSelection()),onCheckNull:t[3]||(t[3]=a=>e.$refs.table.clearSelection())},{default:h((()=>[_(o,{size:"default"},{default:h((()=>[T])),_:1}),_(U,null,{default:h((()=>[_(o,{size:"default"},{default:h((()=>[Z])),_:1}),_(o,{size:"default"},{default:h((()=>[F])),_:1})])),_:1})])),_:1},8,["data","selection-data"])):z("v-if",!0),g((v(),x(R,{ref:"table",class:"list-table",data:C.value.dataList,border:"",stripe:"","highlight-current-row":"",onSortChange:P,onSelectionChange:t[4]||(t[4]=e=>C.value.batch.selectionDataList=e)},{default:h((()=>[C.value.batch.enable?(v(),x(I,{key:0,type:"selection",width:"40"})):z("v-if",!0),_(I,{prop:"title",label:"职位"}),_(I,{label:"操作",width:"250",align:"center"},{default:h((e=>[_(o,{type:"primary",size:"small",plain:"",onClick:a=>{return l=e.row,C.value.formModeProps.id=l.id,void(C.value.formModeProps.visible=!0);var l}},{default:h((()=>[H])),_:2},1032,["onClick"]),_(o,{type:"danger",size:"small",plain:"",onClick:a=>{return l=e.row,void k.$confirm(`确认删除「${l.title}」吗？`,"确认信息").then((()=>{k.$api.post("pages_example/job/delete",{id:l.id},{baseURL:"/mock/"}).then((()=>{$(),k.$message.success({message:"模拟删除成功",center:!0})}))})).catch((()=>{}));var l}},{default:h((()=>[Q])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[N,C.value.loading]]),_(E,{"current-page":w(l).page,total:w(l).total,"page-size":w(l).size,"page-sizes":w(l).sizes,layout:w(l).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:j,onCurrentChange:V},null,8,["current-page","total","page-size","page-sizes","layout"])])),_:1}),["dialog","drawer"].includes(C.value.formMode)?(v(),x(J,{key:0,id:C.value.formModeProps.id,modelValue:C.value.formModeProps.visible,"onUpdate:modelValue":t[5]||(t[5]=e=>C.value.formModeProps.visible=e),"department-id":a.params.department_id,mode:C.value.formMode,onSuccess:$},null,8,["id","modelValue","department-id","mode"])):z("v-if",!0)])}}}),[["__scopeId","data-v-fabc7014"]]);export{X as default};
