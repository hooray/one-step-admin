
/**
 * 由 One-step-admin 提供技术支持
 * Powered by One-step-admin
 * https://one-step-admin.netlify.app
 * 代码仓库
 * Gitee  https://gitee.com/hooray/one-step-admin
 * Github https://github.com/hooray/one-step-admin
 */
    
var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,n=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l;import{_ as r}from"./index.15becada.js";import{O as i,P as u,aH as p,T as c,aw as d,d as f,V as g,aq as m,r as v,C as h,R as b,aN as y,o as x,n as w,i as $,w as j,e as A,b as _,f as k,c as S,E as O,$ as E,ag as F,F as C,H as M,y as B,t as T,G as V,aa as P,aD as I,at as K,q as R,x as U,an as N,a0 as q,A as H,ad as L,_ as W,j as D}from"./index.0a5e3bc2.js";import{E as z}from"./el-input.3dbe719d.js";/* empty css                     */import{a as G,g as J,E as Q}from"./el-popper.807071fe.js";/* empty css                */import{_ as X}from"./index.5fef9d7d.js";import{E as Y}from"./index2.5834ab0d.js";import{U as Z}from"./event2.27558ffe.js";import{u as ee}from"./index2.0c75c32d.js";import{t as te}from"./error2.1d524120.js";import{d as ae}from"./debounce.527fb442.js";import"./index2.f37a6952.js";import"./typescript2.7477ece2.js";import"./index2.fa2fe4ab.js";import"./isNil.aac33454.js";import"./focus-trap2.8b38c312.js";import"./event2.3b438cf1.js";const le=i({valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:u(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:u([Function,Array]),default:p},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},label:{type:String},teleported:G.teleported,highlightFirstItem:{type:Boolean,default:!1}}),oe={[Z]:e=>c(e),input:e=>c(e),change:e=>c(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,select:e=>d(e)},se=["aria-expanded","aria-owns"],ne={key:0},re=["id","aria-selected","onClick"],ie=f((ue=((e,t)=>{for(var a in t||(t={}))o.call(t,a)&&n(e,a,t[a]);if(l)for(var a of l(t))s.call(t,a)&&n(e,a,t[a]);return e})({},{name:"ElAutocomplete",inheritAttrs:!1}),t(ue,a({props:le,emits:oe,setup(e,{expose:t,emit:a}){const l=e,o=g("autocomplete");let s=!1;const n=ee(),r=m(),i=v([]),u=v(-1),p=v(""),c=v(!1),d=v(!1),f=v(!1),q=v(),L=v(),W=v(),D=v(),G=h((()=>o.b(String(J())))),X=h((()=>r.style)),le=h((()=>(b(i.value)&&i.value.length>0||f.value)&&c.value)),oe=h((()=>!l.hideLoading&&f.value)),ie=()=>{H((()=>{le.value&&(p.value=`${q.value.$el.offsetWidth}px`)}))},ue=ae((async e=>{if(d.value)return;f.value=!0;const t=e=>{f.value=!1,d.value||(b(e)?(i.value=e,u.value=l.highlightFirstItem?0:-1):te("ElAutocomplete","autocomplete suggestions must be an array"))};if(b(l.fetchSuggestions))t(l.fetchSuggestions);else{const a=await l.fetchSuggestions(e,t);b(a)&&t(a)}}),l.debounce),pe=e=>{const t=Boolean(e);if(a("input",e),a(Z,e),d.value=!1,c.value||(c.value=s&&t),!l.triggerOnFocus&&!e)return d.value=!0,void(i.value=[]);s&&t&&(s=!1),ue(e)},ce=e=>{a("change",e)},de=e=>{c.value=!0,a("focus",e),l.triggerOnFocus&&ue(String(l.modelValue))},fe=e=>{a("blur",e)},ge=()=>{c.value=!1,s=!0,a(Z,""),a("clear")},me=()=>{le.value&&u.value>=0&&u.value<i.value.length?be(i.value[u.value]):l.selectWhenUnmatched&&(a("select",{value:l.modelValue}),H((()=>{i.value=[],u.value=-1})))},ve=e=>{le.value&&(e.preventDefault(),e.stopPropagation(),he())},he=()=>{c.value=!1},be=e=>{a("input",e[l.valueKey]),a(Z,e[l.valueKey]),a("select",e),H((()=>{i.value=[],u.value=-1}))},ye=e=>{if(!le.value||f.value)return;if(e<0)return void(u.value=-1);e>=i.value.length&&(e=i.value.length-1);const t=L.value.querySelector(`.${o.be("suggestion","wrap")}`),a=t.querySelectorAll(`.${o.be("suggestion","list")} li`)[e],l=t.scrollTop,{offsetTop:s,scrollHeight:n}=a;s+n>l+t.clientHeight&&(t.scrollTop+=n),s<l&&(t.scrollTop-=n),u.value=e,q.value.ref.setAttribute("aria-activedescendant",`${G.value}-item-${u.value}`)};return y(D,he),x((()=>{q.value.ref.setAttribute("role","textbox"),q.value.ref.setAttribute("aria-autocomplete","list"),q.value.ref.setAttribute("aria-controls","id"),q.value.ref.setAttribute("aria-activedescendant",`${G.value}-item-${u.value}`)})),t({highlightedIndex:u,activated:c,loading:f,inputRef:q,popperRef:W,suggestions:i,handleSelect:be,handleKeyEnter:me,focus:()=>{var e;null==(e=q.value)||e.focus()},close:he,highlight:ye}),(e,t)=>(w(),$(k(Q),{ref_key:"popperRef",ref:W,visible:k(le),"onUpdate:visible":t[2]||(t[2]=e=>N(le)?le.value=e:null),placement:e.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[k(o).e("popper"),e.popperClass],teleported:e.teleported,"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${k(o).namespace.value}-zoom-in-top`,persistent:"",onBeforeShow:ie},{content:j((()=>[A("div",{ref_key:"regionRef",ref:L,class:E([k(o).b("suggestion"),k(o).is("loading",k(oe))]),style:P({minWidth:p.value,outline:"none"}),role:"region"},[_(k(Y),{id:k(G),tag:"ul","wrap-class":k(o).be("suggestion","wrap"),"view-class":k(o).be("suggestion","list"),role:"listbox"},{default:j((()=>[k(oe)?(w(),S("li",ne,[_(k(O),{class:E(k(o).is("loading"))},{default:j((()=>[_(k(F))])),_:1},8,["class"])])):(w(!0),S(V,{key:1},C(i.value,((t,a)=>(w(),S("li",{id:`${k(G)}-item-${a}`,key:a,class:E({highlighted:u.value===a}),role:"option","aria-selected":u.value===a,onClick:e=>be(t)},[M(e.$slots,"default",{item:t},(()=>[B(T(t[e.valueKey]),1)]))],10,re)))),128))])),_:3},8,["id","wrap-class","view-class"])],6)])),default:j((()=>[A("div",{ref_key:"listboxRef",ref:D,class:E([k(o).b(),e.$attrs.class]),style:P(k(X)),role:"combobox","aria-haspopup":"listbox","aria-expanded":k(le),"aria-owns":k(G)},[_(k(z),K({ref_key:"inputRef",ref:q},k(n),{"model-value":e.modelValue,onInput:pe,onChange:ce,onFocus:de,onBlur:fe,onClear:ge,onKeydown:[t[0]||(t[0]=R(U((e=>ye(u.value-1)),["prevent"]),["up"])),t[1]||(t[1]=R(U((e=>ye(u.value+1)),["prevent"]),["down"])),R(me,["enter"]),R(he,["tab"]),R(ve,["esc"])]}),I({_:2},[e.$slots.prepend?{name:"prepend",fn:j((()=>[M(e.$slots,"prepend")]))}:void 0,e.$slots.append?{name:"append",fn:j((()=>[M(e.$slots,"append")]))}:void 0,e.$slots.prefix?{name:"prefix",fn:j((()=>[M(e.$slots,"prefix")]))}:void 0,e.$slots.suffix?{name:"suffix",fn:j((()=>[M(e.$slots,"suffix")]))}:void 0]),1040,["model-value","onKeydown"])],14,se)])),_:3},8,["visible","placement","popper-class","teleported","transition"]))}}))));var ue;const pe=L(q(ie,[["__file","/home/runner/work/element-plus/element-plus/packages/components/autocomplete/src/autocomplete.vue"]]));const ce={class:"map"},de={class:"search-name"},fe=["title"];var ge=W({props:{v:{type:String,default:"1.4.15"},appkey:{type:String,default:""},height:{type:[Number,String],default:500},lnglat:{type:Array,default:()=>[]}},emits:["update:lnglat"],setup(e,{emit:t}){const a=e,l=v("");let o="",s="",n="";const r=h((()=>"string"==typeof a.height?a.height:`${a.height}px`));function i(){o=new AMap.Map("amap",{zoom:12}),AMap.plugin("AMap.ToolBar",(()=>{let e=new AMap.ToolBar;o.addControl(e)})),s=new AMap.Marker({draggable:!0,cursor:"move"}),s.on("dragend",(e=>{t("update:lnglat",[e.lnglat.lng,e.lnglat.lat])})),n=new AMap.Autocomplete,o.on("click",(e=>{u(e.lnglat.getLng(),e.lnglat.getLat())})),2==a.lnglat.length&&u(a.lnglat[0],a.lnglat[1])}function u(e,a){o.remove(s),s.setPosition([e,a]),o.add(s),o.setFitView(),t("update:lnglat",[e,a])}function p(e,t){n.search(e,((e,a)=>{t(a.tips)}))}function c(e){l.value=e.name,e.location?u(e.location.lng,e.location.lat):o.setCity(e.adcode)}return x((()=>{if("undefined"==typeof AMap){let e=document.createElement("script");e.charset="UTF-8",e.src=`https://webapi.amap.com/maps?v=${a.v}&key=${a.appkey}&plugin=AMap.Autocomplete`,document.head.appendChild(e),e.onload=()=>{i()}}else nextTick((()=>{i()}))})),(e,t)=>{const a=X,o=O,s=pe;return w(),S("div",ce,[_(s,{modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=e=>l.value=e),class:"search","fetch-suggestions":p,"trigger-on-focus":!1,clearable:"",placeholder:"请输入地址关键字",onSelect:c},{prefix:j((()=>[_(o,{class:"el-input__icon"},{default:j((()=>[_(a,{name:"i-ep:location-information"})])),_:1})])),default:j((({item:e})=>[A("div",de,T(e.name),1),A("span",{class:"search-address",title:e.district+e.address},T(e.district+e.address),9,fe)])),_:1},8,["modelValue"]),A("div",{id:"amap",style:P(`height:${k(r)};`)},null,4)])}}},[["__scopeId","data-v-1e5cb3f8"]]);var me=W({name:"ComponentExampleAmap",props:{},data:()=>({lnglat:[120.068384,30.290939]}),created(){},mounted(){},methods:{}},[["render",function(e,t,a,l,o,s){const n=ge,i=r;return w(),S("div",null,[_(i,null,{default:j((()=>[A("div",null,"经纬度："+T(o.lnglat),1),D(" 注意这里替换高德地图的appkey "),_(n,{lnglat:o.lnglat,"onUpdate:lnglat":t[0]||(t[0]=e=>o.lnglat=e),appkey:"8f7844cc502e17bb549c04c9aaadaf94",height:600},null,8,["lnglat"])])),_:1})])}],["__scopeId","data-v-755ff3c4"]]);export{me as default};
