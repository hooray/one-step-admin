
/**
 * 由 One-step-admin 提供技术支持
 * Powered by One-step-admin
 * https://one-step-admin.netlify.app
 * 代码仓库
 * Gitee  https://gitee.com/hooray/one-step-admin
 * Github https://github.com/hooray/one-step-admin
 */
    
var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,i=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l;import{E as s}from"./el-input-number.eccc2b30.js";import{H as r,C as u,T as d,r as m,x as p,d as c,B as v,U as g,V as f,_ as h,aV as y,m as V,c as b,e as w,f as S,b as x,t as k,X as B,a6 as D,n as C,q as M,ah as P,al as z,D as N,o as j,Z as L,h as K,i as E,a1 as F,aO as T}from"./index.1b2a4798.js";import{E as I}from"./el-popper.04fca2fb.js";import{o as O,a as X}from"./event.561dcd8a.js";import{U as A,I as Y,C as R}from"./event.75bf56a9.js";import{d as U}from"./debounce.00dabd51.js";import{f as _,a as W,u as $}from"./index.c8167427.js";import{i as H}from"./validator.659ac956.js";import{t as q,d as Z}from"./error.b438369f.js";const G=(e,t,a)=>{const{disabled:l,min:o,max:n,step:i,showTooltip:s,precision:c,sliderSize:v,formatTooltip:g,emitChange:f,resetSize:h,updateDragging:y}=r("SliderProvider"),{tooltip:V,tooltipVisible:b,formatValue:w,displayTooltip:S,hideTooltip:x}=((e,t,a)=>{const l=m(null),o=m(!1),n=u((()=>t.value instanceof Function)),i=u((()=>n.value&&t.value(e.modelValue)||e.modelValue)),s=U((()=>{a.value&&(o.value=!0)}),50),r=U((()=>{a.value&&(o.value=!1)}),50);return{tooltip:l,tooltipVisible:o,formatValue:i,displayTooltip:s,hideTooltip:r}})(e,g,s),k=u((()=>(e.modelValue-o.value)/(n.value-o.value)*100+"%")),B=u((()=>e.vertical?{bottom:k.value}:{left:k.value})),D=e=>{let t,a;return e.type.startsWith("touch")?(a=e.touches[0].clientY,t=e.touches[0].clientX):(a=e.clientY,t=e.clientX),{clientX:t,clientY:a}},C=a=>{t.dragging=!0,t.isClick=!0;const{clientX:l,clientY:o}=D(a);e.vertical?t.startY=o:t.startX=l,t.startPosition=Number.parseFloat(k.value),t.newPosition=t.startPosition},M=a=>{if(t.dragging){let l;t.isClick=!1,S(),h();const{clientX:o,clientY:n}=D(a);e.vertical?(t.currentY=n,l=(t.startY-t.currentY)/v.value*100):(t.currentX=o,l=(t.currentX-t.startX)/v.value*100),t.newPosition=t.startPosition+l,z(t.newPosition)}},P=()=>{t.dragging&&(setTimeout((()=>{t.dragging=!1,t.hovering||x(),t.isClick||(z(t.newPosition),f())}),0),X(window,"mousemove",M),X(window,"touchmove",M),X(window,"mouseup",P),X(window,"touchend",P),X(window,"contextmenu",P))},z=async l=>{if(null===l||Number.isNaN(+l))return;l<0?l=0:l>100&&(l=100);const s=100/((n.value-o.value)/i.value);let r=Math.round(l/s)*s*(n.value-o.value)*.01+o.value;r=Number.parseFloat(r.toFixed(c.value)),a(A,r),t.dragging||e.modelValue===t.oldValue||(t.oldValue=e.modelValue),await p(),t.dragging&&S(),V.value.updatePopper()};return d((()=>t.dragging),(e=>{y(e)})),{tooltip:V,tooltipVisible:b,showTooltip:s,wrapperStyle:B,formatValue:w,handleMouseEnter:()=>{t.hovering=!0,S()},handleMouseLeave:()=>{t.hovering=!1,t.dragging||x()},onButtonDown:e=>{l.value||(e.preventDefault(),C(e),O(window,"mousemove",M),O(window,"touchmove",M),O(window,"mouseup",P),O(window,"touchend",P),O(window,"contextmenu",P))},onLeftKeyDown:()=>{l.value||(t.newPosition=Number.parseFloat(k.value)-i.value/(n.value-o.value)*100,z(t.newPosition),f())},onRightKeyDown:()=>{l.value||(t.newPosition=Number.parseFloat(k.value)+i.value/(n.value-o.value)*100,z(t.newPosition),f())},setPosition:z}};var J=h(c({name:"ElSliderButton",components:{ElTooltip:I},props:{modelValue:{type:Number,default:0},vertical:{type:Boolean,default:!1},tooltipClass:{type:String,default:""}},emits:[A],setup(e,{emit:t}){const a=v("slider"),l=g({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:e.modelValue}),{tooltip:o,showTooltip:n,tooltipVisible:i,wrapperStyle:s,formatValue:r,handleMouseEnter:u,handleMouseLeave:d,onButtonDown:m,onLeftKeyDown:p,onRightKeyDown:c,setPosition:h}=G(e,l,t),{hovering:y,dragging:V}=f(l);return{ns:a,tooltip:o,tooltipVisible:i,showTooltip:n,wrapperStyle:s,formatValue:r,handleMouseEnter:u,handleMouseLeave:d,onButtonDown:m,onLeftKeyDown:p,onRightKeyDown:c,setPosition:h,hovering:y,dragging:V}}}),[["render",function(e,t,a,l,o,n){const i=y("el-tooltip");return V(),b("div",{ref:"button",class:B([e.ns.e("button-wrapper"),{hover:e.hovering,dragging:e.dragging}]),style:D(e.wrapperStyle),tabindex:"0",onMouseenter:t[1]||(t[1]=(...t)=>e.handleMouseEnter&&e.handleMouseEnter(...t)),onMouseleave:t[2]||(t[2]=(...t)=>e.handleMouseLeave&&e.handleMouseLeave(...t)),onMousedown:t[3]||(t[3]=(...t)=>e.onButtonDown&&e.onButtonDown(...t)),onTouchstart:t[4]||(t[4]=(...t)=>e.onButtonDown&&e.onButtonDown(...t)),onFocus:t[5]||(t[5]=(...t)=>e.handleMouseEnter&&e.handleMouseEnter(...t)),onBlur:t[6]||(t[6]=(...t)=>e.handleMouseLeave&&e.handleMouseLeave(...t)),onKeydown:[t[7]||(t[7]=C(((...t)=>e.onLeftKeyDown&&e.onLeftKeyDown(...t)),["left"])),t[8]||(t[8]=C(((...t)=>e.onRightKeyDown&&e.onRightKeyDown(...t)),["right"])),t[9]||(t[9]=C(M(((...t)=>e.onLeftKeyDown&&e.onLeftKeyDown(...t)),["prevent"]),["down"])),t[10]||(t[10]=C(M(((...t)=>e.onRightKeyDown&&e.onRightKeyDown(...t)),["prevent"]),["up"]))]},[w(i,{ref:"tooltip",visible:e.tooltipVisible,"onUpdate:visible":t[0]||(t[0]=t=>e.tooltipVisible=t),placement:"top","stop-popper-mouse-event":!1,"popper-class":e.tooltipClass,disabled:!e.showTooltip,persistent:""},{content:S((()=>[x("span",null,k(e.formatValue),1)])),default:S((()=>[x("div",{class:B([e.ns.e("button"),{hover:e.hovering,dragging:e.dragging}])},null,2)])),_:1},8,["visible","popper-class","disabled"])],38)}],["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/button.vue"]]);const Q=c({name:"ElMarker",props:{mark:{type:[String,Object],default:()=>{}}},setup:e=>({ns:v("slider"),label:u((()=>"string"==typeof e.mark?e.mark:e.mark.label))}),render(){var e;return P("div",{class:this.ns.e("marks-text"),style:null==(e=this.mark)?void 0:e.style},this.label)}});const ee=c({name:"ElSlider",components:{ElInputNumber:s,SliderButton:J,SliderMarker:h(Q,[["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/marker.vue"]])},props:{modelValue:{type:[Number,Array],default:0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:{type:Boolean,default:!1},showInputControls:{type:Boolean,default:!0},size:{type:String,validator:H},inputSize:{type:String,validator:H},showStops:{type:Boolean,default:!1},showTooltip:{type:Boolean,default:!0},formatTooltip:{type:Function,default:void 0},disabled:{type:Boolean,default:!1},range:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},height:{type:String,default:""},debounce:{type:Number,default:300},label:{type:String,default:void 0},tooltipClass:{type:String,default:void 0},marks:Object},emits:[A,R,Y],setup(e,{emit:s}){const d=v("slider"),c=g({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:h,slider:y,firstButton:V,secondButton:b,sliderDisabled:w,minValue:S,maxValue:x,runwayStyle:k,barStyle:B,resetSize:D,emitChange:C,onSliderClick:M,setFirstValue:P,setSecondValue:j}=((e,t,a)=>{const l=r(_,{}),o=r(W,{}),n=z(null),i=m(null),s=m(null),d={firstButton:i,secondButton:s},c=u((()=>e.disabled||l.disabled||!1)),v=u((()=>Math.min(t.firstValue,t.secondValue))),g=u((()=>Math.max(t.firstValue,t.secondValue))),f=u((()=>e.range?100*(g.value-v.value)/(e.max-e.min)+"%":100*(t.firstValue-e.min)/(e.max-e.min)+"%")),h=u((()=>e.range?100*(v.value-e.min)/(e.max-e.min)+"%":"0%")),y=u((()=>e.vertical?{height:e.height}:{})),V=u((()=>e.vertical?{height:f.value,bottom:h.value}:{width:f.value,left:h.value})),b=()=>{n.value&&(t.sliderSize=n.value["client"+(e.vertical?"Height":"Width")])},w=a=>{const l=e.min+a*(e.max-e.min)/100;if(!e.range)return void i.value.setPosition(a);let o;o=Math.abs(v.value-l)<Math.abs(g.value-l)?t.firstValue<t.secondValue?"firstButton":"secondButton":t.firstValue>t.secondValue?"firstButton":"secondButton",d[o].value.setPosition(a)},S=e=>{a(A,e),a(Y,e)},x=async()=>{await p(),a(R,e.range?[v.value,g.value]:e.modelValue)};return{elFormItem:o,slider:n,firstButton:i,secondButton:s,sliderDisabled:c,minValue:v,maxValue:g,runwayStyle:y,barStyle:V,resetSize:b,setPosition:w,emitChange:x,onSliderClick:a=>{if(!c.value&&!t.dragging){if(b(),e.vertical){const e=n.value.getBoundingClientRect().bottom;w((e-a.clientY)/t.sliderSize*100)}else{const e=n.value.getBoundingClientRect().left;w((a.clientX-e)/t.sliderSize*100)}x()}},setFirstValue:a=>{t.firstValue=a,S(e.range?[v.value,g.value]:a)},setSecondValue:a=>{t.secondValue=a,e.range&&S([v.value,g.value])}}})(e,c,s),{stops:L,getStopStyle:K}=((e,t,a,l)=>({stops:u((()=>{if(!e.showStops||e.min>e.max)return[];if(0===e.step)return[];const o=(e.max-e.min)/e.step,n=100*e.step/(e.max-e.min),i=Array.from({length:o-1}).map(((e,t)=>(t+1)*n));return e.range?i.filter((t=>t<100*(a.value-e.min)/(e.max-e.min)||t>100*(l.value-e.min)/(e.max-e.min))):i.filter((a=>a>100*(t.firstValue-e.min)/(e.max-e.min)))})),getStopStyle:t=>e.vertical?{bottom:`${t}%`}:{left:`${t}%`}}))(e,c,S,x),E=$(),F=u((()=>e.inputSize||E.value)),T=u((()=>[d.b(),d.m(E.value),d.is("vertical",e.vertical),{[d.m("with-input")]:e.showInput}])),I=(e=>u((()=>e.marks?Object.keys(e.marks).map(parseFloat).sort(((e,t)=>e-t)).filter((t=>t<=e.max&&t>=e.min)).map((t=>({point:t,position:100*(t-e.min)/(e.max-e.min),mark:e.marks[t]}))):[])))(e);te(e,c,S,x,s,h);const O=u((()=>{const t=[e.min,e.max,e.step].map((e=>{const t=`${e}`.split(".")[1];return t?t.length:0}));return Math.max.apply(null,t)})),{sliderWrapper:X}=ae(e,c,D),{firstValue:U,secondValue:H,oldValue:q,dragging:Z,sliderSize:G}=f(c);var J;return N("SliderProvider",(J=((e,t)=>{for(var a in t||(t={}))o.call(t,a)&&i(e,a,t[a]);if(l)for(var a of l(t))n.call(t,a)&&i(e,a,t[a]);return e})({},f(e)),t(J,a({sliderSize:G,disabled:w,precision:O,emitChange:C,resetSize:D,updateDragging:e=>{c.dragging=e}})))),{ns:d,firstValue:U,secondValue:H,oldValue:q,dragging:Z,sliderSize:G,slider:y,firstButton:V,secondButton:b,sliderDisabled:w,runwayStyle:k,barStyle:B,emitChange:C,onSliderClick:M,getStopStyle:K,setFirstValue:P,setSecondValue:j,stops:L,markList:I,sliderWrapper:X,sliderWrapperSize:E,sliderInputSize:F,sliderKls:T}}}),te=(e,t,a,l,o,n)=>{const i=e=>{o(A,e),o(Y,e)},s=()=>e.range?![a.value,l.value].every(((e,a)=>e===t.oldValue[a])):e.modelValue!==t.oldValue,r=()=>{var a,l;if(e.min>e.max)return void q("Slider","min should not be greater than max.");const o=e.modelValue;e.range&&Array.isArray(o)?o[1]<e.min?i([e.min,e.min]):o[0]>e.max?i([e.max,e.max]):o[0]<e.min?i([e.min,o[1]]):o[1]>e.max?i([o[0],e.max]):(t.firstValue=o[0],t.secondValue=o[1],s()&&(null==(a=n.validate)||a.call(n,"change").catch((e=>Z())),t.oldValue=o.slice())):e.range||"number"!=typeof o||Number.isNaN(o)||(o<e.min?i(e.min):o>e.max?i(e.max):(t.firstValue=o,s()&&(null==(l=n.validate)||l.call(n,"change").catch((e=>Z())),t.oldValue=o)))};r(),d((()=>t.dragging),(e=>{e||r()})),d((()=>e.modelValue),((e,a)=>{t.dragging||Array.isArray(e)&&Array.isArray(a)&&e.every(((e,t)=>e===a[t]))&&t.firstValue===e[0]&&t.secondValue===e[1]||r()}),{deep:!0}),d((()=>[e.min,e.max]),(()=>{r()}))},ae=(e,t,a)=>{const l=m(null);return j((async()=>{let o;e.range?(Array.isArray(e.modelValue)?(t.firstValue=Math.max(e.min,e.modelValue[0]),t.secondValue=Math.min(e.max,e.modelValue[1])):(t.firstValue=e.min,t.secondValue=e.max),t.oldValue=[t.firstValue,t.secondValue],o=`${t.firstValue}-${t.secondValue}`):("number"!=typeof e.modelValue||Number.isNaN(e.modelValue)?t.firstValue=e.min:t.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),t.oldValue=t.firstValue,o=t.firstValue),l.value.setAttribute("aria-valuetext",o),l.value.setAttribute("aria-label",e.label?e.label:`slider between ${e.min} and ${e.max}`),O(window,"resize",a),await p(),a()})),L((()=>{X(window,"resize",a)})),{sliderWrapper:l}},le=["aria-valuemin","aria-valuemax","aria-orientation","aria-disabled"],oe={key:1};var ne=h(ee,[["render",function(e,t,a,l,o,n){const i=y("slider-button"),s=y("slider-marker"),r=y("el-input-number");return V(),b("div",{ref:"sliderWrapper",class:B(e.sliderKls),role:"slider","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-orientation":e.vertical?"vertical":"horizontal","aria-disabled":e.sliderDisabled},[x("div",{ref:"slider",class:B([e.ns.e("runway"),{"show-input":e.showInput&&!e.range},e.ns.is("disabled",e.sliderDisabled)]),style:D(e.runwayStyle),onClick:t[0]||(t[0]=(...t)=>e.onSliderClick&&e.onSliderClick(...t))},[x("div",{class:B(e.ns.e("bar")),style:D(e.barStyle)},null,6),w(i,{ref:"firstButton","model-value":e.firstValue,vertical:e.vertical,"tooltip-class":e.tooltipClass,"onUpdate:modelValue":e.setFirstValue},null,8,["model-value","vertical","tooltip-class","onUpdate:modelValue"]),e.range?(V(),K(i,{key:0,ref:"secondButton","model-value":e.secondValue,vertical:e.vertical,"tooltip-class":e.tooltipClass,"onUpdate:modelValue":e.setSecondValue},null,8,["model-value","vertical","tooltip-class","onUpdate:modelValue"])):E("v-if",!0),e.showStops?(V(),b("div",oe,[(V(!0),b(F,null,T(e.stops,((t,a)=>(V(),b("div",{key:a,class:B(e.ns.e("stop")),style:D(e.getStopStyle(t))},null,6)))),128))])):E("v-if",!0),e.markList.length>0?(V(),b(F,{key:2},[x("div",null,[(V(!0),b(F,null,T(e.markList,((t,a)=>(V(),b("div",{key:a,style:D(e.getStopStyle(t.position)),class:B([e.ns.e("stop"),e.ns.e("marks-stop")])},null,6)))),128))]),x("div",{class:B(e.ns.e("marks"))},[(V(!0),b(F,null,T(e.markList,((t,a)=>(V(),K(s,{key:a,mark:t.mark,style:D(e.getStopStyle(t.position))},null,8,["mark","style"])))),128))],2)],64)):E("v-if",!0)],6),e.showInput&&!e.range?(V(),K(r,{key:0,ref:"input","model-value":e.firstValue,class:B(e.ns.e("input")),step:e.step,disabled:e.sliderDisabled,controls:e.showInputControls,min:e.min,max:e.max,debounce:e.debounce,size:e.sliderInputSize,"onUpdate:modelValue":e.setFirstValue,onChange:e.emitChange},null,8,["model-value","class","step","disabled","controls","min","max","debounce","size","onUpdate:modelValue","onChange"])):E("v-if",!0)],10,le)}],["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/index.vue"]]);ne.install=e=>{e.component(ne.name,ne)};const ie=ne;export{ie as E};
