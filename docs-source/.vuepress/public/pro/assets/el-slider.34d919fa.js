
/**
 * 由 One-step-admin 提供技术支持
 * Powered by One-step-admin
 * https://one-step-admin.netlify.app
 * 代码仓库
 * Gitee  https://gitee.com/hooray/one-step-admin
 * Github https://github.com/hooray/one-step-admin
 */
    
var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,i=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l;import{E as s}from"./el-input-number.7d3582fa.js";import{N as r,C as u,Z as d,r as m,z as p,d as c,J as v,$ as g,a0 as f,a2 as y,ay as h,o as b,c as V,g as w,w as S,a as x,t as k,a1 as B,ab as D,q as C,x as M,am as P,aq as z,K as N,f as j,a4 as K,j as L,k as F,G as E,F as T}from"./index.89c4a536.js";import{E as I}from"./el-popper.27b489eb.js";import{o as A,a as O}from"./event.e842ba5a.js";import{U as X,I as Y,C as R}from"./event.87cd92d6.js";import{d as U}from"./debounce.4df1b226.js";import{f as $,a as W,u as _}from"./index.0dfe2aba.js";import{i as q}from"./validator.0261e922.js";import{t as G,d as H}from"./error.67356979.js";const J=(e,t,a)=>{const{disabled:l,min:o,max:n,step:i,showTooltip:s,precision:c,sliderSize:v,formatTooltip:g,emitChange:f,resetSize:y,updateDragging:h}=r("SliderProvider"),{tooltip:b,tooltipVisible:V,formatValue:w,displayTooltip:S,hideTooltip:x}=((e,t,a)=>{const l=m(null),o=m(!1),n=u((()=>t.value instanceof Function)),i=u((()=>n.value&&t.value(e.modelValue)||e.modelValue)),s=U((()=>{a.value&&(o.value=!0)}),50),r=U((()=>{a.value&&(o.value=!1)}),50);return{tooltip:l,tooltipVisible:o,formatValue:i,displayTooltip:s,hideTooltip:r}})(e,g,s),k=u((()=>(e.modelValue-o.value)/(n.value-o.value)*100+"%")),B=u((()=>e.vertical?{bottom:k.value}:{left:k.value})),D=e=>{let t,a;return e.type.startsWith("touch")?(a=e.touches[0].clientY,t=e.touches[0].clientX):(a=e.clientY,t=e.clientX),{clientX:t,clientY:a}},C=a=>{t.dragging=!0,t.isClick=!0;const{clientX:l,clientY:o}=D(a);e.vertical?t.startY=o:t.startX=l,t.startPosition=Number.parseFloat(k.value),t.newPosition=t.startPosition},M=a=>{if(t.dragging){let l;t.isClick=!1,S(),y();const{clientX:o,clientY:n}=D(a);e.vertical?(t.currentY=n,l=(t.startY-t.currentY)/v.value*100):(t.currentX=o,l=(t.currentX-t.startX)/v.value*100),t.newPosition=t.startPosition+l,z(t.newPosition)}},P=()=>{t.dragging&&(setTimeout((()=>{t.dragging=!1,t.hovering||x(),t.isClick||(z(t.newPosition),f())}),0),O(window,"mousemove",M),O(window,"touchmove",M),O(window,"mouseup",P),O(window,"touchend",P),O(window,"contextmenu",P))},z=async l=>{if(null===l||Number.isNaN(+l))return;l<0?l=0:l>100&&(l=100);const s=100/((n.value-o.value)/i.value);let r=Math.round(l/s)*s*(n.value-o.value)*.01+o.value;r=Number.parseFloat(r.toFixed(c.value)),a(X,r),t.dragging||e.modelValue===t.oldValue||(t.oldValue=e.modelValue),await p(),t.dragging&&S(),b.value.updatePopper()};return d((()=>t.dragging),(e=>{h(e)})),{tooltip:b,tooltipVisible:V,showTooltip:s,wrapperStyle:B,formatValue:w,handleMouseEnter:()=>{t.hovering=!0,S()},handleMouseLeave:()=>{t.hovering=!1,t.dragging||x()},onButtonDown:e=>{l.value||(e.preventDefault(),C(e),A(window,"mousemove",M),A(window,"touchmove",M),A(window,"mouseup",P),A(window,"touchend",P),A(window,"contextmenu",P))},onLeftKeyDown:()=>{l.value||(t.newPosition=Number.parseFloat(k.value)-i.value/(n.value-o.value)*100,z(t.newPosition),f())},onRightKeyDown:()=>{l.value||(t.newPosition=Number.parseFloat(k.value)+i.value/(n.value-o.value)*100,z(t.newPosition),f())},setPosition:z}};var Z=y(c({name:"ElSliderButton",components:{ElTooltip:I},props:{modelValue:{type:Number,default:0},vertical:{type:Boolean,default:!1},tooltipClass:{type:String,default:""}},emits:[X],setup(e,{emit:t}){const a=v("slider"),l=g({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:e.modelValue}),{tooltip:o,showTooltip:n,tooltipVisible:i,wrapperStyle:s,formatValue:r,handleMouseEnter:u,handleMouseLeave:d,onButtonDown:m,onLeftKeyDown:p,onRightKeyDown:c,setPosition:y}=J(e,l,t),{hovering:h,dragging:b}=f(l);return{ns:a,tooltip:o,tooltipVisible:i,showTooltip:n,wrapperStyle:s,formatValue:r,handleMouseEnter:u,handleMouseLeave:d,onButtonDown:m,onLeftKeyDown:p,onRightKeyDown:c,setPosition:y,hovering:h,dragging:b}}}),[["render",function(e,t,a,l,o,n){const i=h("el-tooltip");return b(),V("div",{ref:"button",class:B([e.ns.e("button-wrapper"),{hover:e.hovering,dragging:e.dragging}]),style:D(e.wrapperStyle),tabindex:"0",onMouseenter:t[1]||(t[1]=(...t)=>e.handleMouseEnter&&e.handleMouseEnter(...t)),onMouseleave:t[2]||(t[2]=(...t)=>e.handleMouseLeave&&e.handleMouseLeave(...t)),onMousedown:t[3]||(t[3]=(...t)=>e.onButtonDown&&e.onButtonDown(...t)),onTouchstart:t[4]||(t[4]=(...t)=>e.onButtonDown&&e.onButtonDown(...t)),onFocus:t[5]||(t[5]=(...t)=>e.handleMouseEnter&&e.handleMouseEnter(...t)),onBlur:t[6]||(t[6]=(...t)=>e.handleMouseLeave&&e.handleMouseLeave(...t)),onKeydown:[t[7]||(t[7]=C(((...t)=>e.onLeftKeyDown&&e.onLeftKeyDown(...t)),["left"])),t[8]||(t[8]=C(((...t)=>e.onRightKeyDown&&e.onRightKeyDown(...t)),["right"])),t[9]||(t[9]=C(M(((...t)=>e.onLeftKeyDown&&e.onLeftKeyDown(...t)),["prevent"]),["down"])),t[10]||(t[10]=C(M(((...t)=>e.onRightKeyDown&&e.onRightKeyDown(...t)),["prevent"]),["up"]))]},[w(i,{ref:"tooltip",visible:e.tooltipVisible,"onUpdate:visible":t[0]||(t[0]=t=>e.tooltipVisible=t),placement:"top","stop-popper-mouse-event":!1,"popper-class":e.tooltipClass,disabled:!e.showTooltip,persistent:""},{content:S((()=>[x("span",null,k(e.formatValue),1)])),default:S((()=>[x("div",{class:B([e.ns.e("button"),{hover:e.hovering,dragging:e.dragging}])},null,2)])),_:1},8,["visible","popper-class","disabled"])],38)}],["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/button.vue"]]);const Q=c({name:"ElMarker",props:{mark:{type:[String,Object],default:()=>{}}},setup:e=>({ns:v("slider"),label:u((()=>"string"==typeof e.mark?e.mark:e.mark.label))}),render(){var e;return P("div",{class:this.ns.e("marks-text"),style:null==(e=this.mark)?void 0:e.style},this.label)}});const ee=c({name:"ElSlider",components:{ElInputNumber:s,SliderButton:Z,SliderMarker:y(Q,[["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/marker.vue"]])},props:{modelValue:{type:[Number,Array],default:0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:{type:Boolean,default:!1},showInputControls:{type:Boolean,default:!0},size:{type:String,validator:q},inputSize:{type:String,validator:q},showStops:{type:Boolean,default:!1},showTooltip:{type:Boolean,default:!0},formatTooltip:{type:Function,default:void 0},disabled:{type:Boolean,default:!1},range:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},height:{type:String,default:""},debounce:{type:Number,default:300},label:{type:String,default:void 0},tooltipClass:{type:String,default:void 0},marks:Object},emits:[X,R,Y],setup(e,{emit:s}){const d=v("slider"),c=g({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:y,slider:h,firstButton:b,secondButton:V,sliderDisabled:w,minValue:S,maxValue:x,runwayStyle:k,barStyle:B,resetSize:D,emitChange:C,onSliderClick:M,setFirstValue:P,setSecondValue:j}=((e,t,a)=>{const l=r($,{}),o=r(W,{}),n=z(null),i=m(null),s=m(null),d={firstButton:i,secondButton:s},c=u((()=>e.disabled||l.disabled||!1)),v=u((()=>Math.min(t.firstValue,t.secondValue))),g=u((()=>Math.max(t.firstValue,t.secondValue))),f=u((()=>e.range?100*(g.value-v.value)/(e.max-e.min)+"%":100*(t.firstValue-e.min)/(e.max-e.min)+"%")),y=u((()=>e.range?100*(v.value-e.min)/(e.max-e.min)+"%":"0%")),h=u((()=>e.vertical?{height:e.height}:{})),b=u((()=>e.vertical?{height:f.value,bottom:y.value}:{width:f.value,left:y.value})),V=()=>{n.value&&(t.sliderSize=n.value["client"+(e.vertical?"Height":"Width")])},w=a=>{const l=e.min+a*(e.max-e.min)/100;if(!e.range)return void i.value.setPosition(a);let o;o=Math.abs(v.value-l)<Math.abs(g.value-l)?t.firstValue<t.secondValue?"firstButton":"secondButton":t.firstValue>t.secondValue?"firstButton":"secondButton",d[o].value.setPosition(a)},S=e=>{a(X,e),a(Y,e)},x=async()=>{await p(),a(R,e.range?[v.value,g.value]:e.modelValue)};return{elFormItem:o,slider:n,firstButton:i,secondButton:s,sliderDisabled:c,minValue:v,maxValue:g,runwayStyle:h,barStyle:b,resetSize:V,setPosition:w,emitChange:x,onSliderClick:a=>{if(!c.value&&!t.dragging){if(V(),e.vertical){const e=n.value.getBoundingClientRect().bottom;w((e-a.clientY)/t.sliderSize*100)}else{const e=n.value.getBoundingClientRect().left;w((a.clientX-e)/t.sliderSize*100)}x()}},setFirstValue:a=>{t.firstValue=a,S(e.range?[v.value,g.value]:a)},setSecondValue:a=>{t.secondValue=a,e.range&&S([v.value,g.value])}}})(e,c,s),{stops:K,getStopStyle:L}=((e,t,a,l)=>({stops:u((()=>{if(!e.showStops||e.min>e.max)return[];if(0===e.step)return[];const o=(e.max-e.min)/e.step,n=100*e.step/(e.max-e.min),i=Array.from({length:o-1}).map(((e,t)=>(t+1)*n));return e.range?i.filter((t=>t<100*(a.value-e.min)/(e.max-e.min)||t>100*(l.value-e.min)/(e.max-e.min))):i.filter((a=>a>100*(t.firstValue-e.min)/(e.max-e.min)))})),getStopStyle:t=>e.vertical?{bottom:`${t}%`}:{left:`${t}%`}}))(e,c,S,x),F=_(),E=u((()=>e.inputSize||F.value)),T=u((()=>[d.b(),d.m(F.value),d.is("vertical",e.vertical),{[d.m("with-input")]:e.showInput}])),I=(e=>u((()=>e.marks?Object.keys(e.marks).map(parseFloat).sort(((e,t)=>e-t)).filter((t=>t<=e.max&&t>=e.min)).map((t=>({point:t,position:100*(t-e.min)/(e.max-e.min),mark:e.marks[t]}))):[])))(e);te(e,c,S,x,s,y);const A=u((()=>{const t=[e.min,e.max,e.step].map((e=>{const t=`${e}`.split(".")[1];return t?t.length:0}));return Math.max.apply(null,t)})),{sliderWrapper:O}=ae(e,c,D),{firstValue:U,secondValue:q,oldValue:G,dragging:H,sliderSize:J}=f(c);var Z;return N("SliderProvider",(Z=((e,t)=>{for(var a in t||(t={}))o.call(t,a)&&i(e,a,t[a]);if(l)for(var a of l(t))n.call(t,a)&&i(e,a,t[a]);return e})({},f(e)),t(Z,a({sliderSize:J,disabled:w,precision:A,emitChange:C,resetSize:D,updateDragging:e=>{c.dragging=e}})))),{ns:d,firstValue:U,secondValue:q,oldValue:G,dragging:H,sliderSize:J,slider:h,firstButton:b,secondButton:V,sliderDisabled:w,runwayStyle:k,barStyle:B,emitChange:C,onSliderClick:M,getStopStyle:L,setFirstValue:P,setSecondValue:j,stops:K,markList:I,sliderWrapper:O,sliderWrapperSize:F,sliderInputSize:E,sliderKls:T}}}),te=(e,t,a,l,o,n)=>{const i=e=>{o(X,e),o(Y,e)},s=()=>e.range?![a.value,l.value].every(((e,a)=>e===t.oldValue[a])):e.modelValue!==t.oldValue,r=()=>{var a,l;if(e.min>e.max)return void G("Slider","min should not be greater than max.");const o=e.modelValue;e.range&&Array.isArray(o)?o[1]<e.min?i([e.min,e.min]):o[0]>e.max?i([e.max,e.max]):o[0]<e.min?i([e.min,o[1]]):o[1]>e.max?i([o[0],e.max]):(t.firstValue=o[0],t.secondValue=o[1],s()&&(null==(a=n.validate)||a.call(n,"change").catch((e=>H())),t.oldValue=o.slice())):e.range||"number"!=typeof o||Number.isNaN(o)||(o<e.min?i(e.min):o>e.max?i(e.max):(t.firstValue=o,s()&&(null==(l=n.validate)||l.call(n,"change").catch((e=>H())),t.oldValue=o)))};r(),d((()=>t.dragging),(e=>{e||r()})),d((()=>e.modelValue),((e,a)=>{t.dragging||Array.isArray(e)&&Array.isArray(a)&&e.every(((e,t)=>e===a[t]))&&t.firstValue===e[0]&&t.secondValue===e[1]||r()}),{deep:!0}),d((()=>[e.min,e.max]),(()=>{r()}))},ae=(e,t,a)=>{const l=m(null);return j((async()=>{let o;e.range?(Array.isArray(e.modelValue)?(t.firstValue=Math.max(e.min,e.modelValue[0]),t.secondValue=Math.min(e.max,e.modelValue[1])):(t.firstValue=e.min,t.secondValue=e.max),t.oldValue=[t.firstValue,t.secondValue],o=`${t.firstValue}-${t.secondValue}`):("number"!=typeof e.modelValue||Number.isNaN(e.modelValue)?t.firstValue=e.min:t.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),t.oldValue=t.firstValue,o=t.firstValue),l.value.setAttribute("aria-valuetext",o),l.value.setAttribute("aria-label",e.label?e.label:`slider between ${e.min} and ${e.max}`),A(window,"resize",a),await p(),a()})),K((()=>{O(window,"resize",a)})),{sliderWrapper:l}},le=["aria-valuemin","aria-valuemax","aria-orientation","aria-disabled"],oe={key:1};var ne=y(ee,[["render",function(e,t,a,l,o,n){const i=h("slider-button"),s=h("slider-marker"),r=h("el-input-number");return b(),V("div",{ref:"sliderWrapper",class:B(e.sliderKls),role:"slider","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-orientation":e.vertical?"vertical":"horizontal","aria-disabled":e.sliderDisabled},[x("div",{ref:"slider",class:B([e.ns.e("runway"),{"show-input":e.showInput&&!e.range},e.ns.is("disabled",e.sliderDisabled)]),style:D(e.runwayStyle),onClick:t[0]||(t[0]=(...t)=>e.onSliderClick&&e.onSliderClick(...t))},[x("div",{class:B(e.ns.e("bar")),style:D(e.barStyle)},null,6),w(i,{ref:"firstButton","model-value":e.firstValue,vertical:e.vertical,"tooltip-class":e.tooltipClass,"onUpdate:modelValue":e.setFirstValue},null,8,["model-value","vertical","tooltip-class","onUpdate:modelValue"]),e.range?(b(),L(i,{key:0,ref:"secondButton","model-value":e.secondValue,vertical:e.vertical,"tooltip-class":e.tooltipClass,"onUpdate:modelValue":e.setSecondValue},null,8,["model-value","vertical","tooltip-class","onUpdate:modelValue"])):F("v-if",!0),e.showStops?(b(),V("div",oe,[(b(!0),V(E,null,T(e.stops,((t,a)=>(b(),V("div",{key:a,class:B(e.ns.e("stop")),style:D(e.getStopStyle(t))},null,6)))),128))])):F("v-if",!0),e.markList.length>0?(b(),V(E,{key:2},[x("div",null,[(b(!0),V(E,null,T(e.markList,((t,a)=>(b(),V("div",{key:a,style:D(e.getStopStyle(t.position)),class:B([e.ns.e("stop"),e.ns.e("marks-stop")])},null,6)))),128))]),x("div",{class:B(e.ns.e("marks"))},[(b(!0),V(E,null,T(e.markList,((t,a)=>(b(),L(s,{key:a,mark:t.mark,style:D(e.getStopStyle(t.position))},null,8,["mark","style"])))),128))],2)],64)):F("v-if",!0)],6),e.showInput&&!e.range?(b(),L(r,{key:0,ref:"input","model-value":e.firstValue,class:B(e.ns.e("input")),step:e.step,disabled:e.sliderDisabled,controls:e.showInputControls,min:e.min,max:e.max,debounce:e.debounce,size:e.sliderInputSize,"onUpdate:modelValue":e.setFirstValue,onChange:e.emitChange},null,8,["model-value","class","step","disabled","controls","min","max","debounce","size","onUpdate:modelValue","onChange"])):F("v-if",!0)],10,le)}],["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/index.vue"]]);ne.install=e=>{e.component(ne.name,ne)};const ie=ne;export{ie as E};
