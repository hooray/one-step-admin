
/**
 * 由 One-step-admin 提供技术支持
 * https://hooray.gitee.io/one-step-admin/
 * Powered by One-step-admin
 * https://hooray.github.io/one-step-admin/
 */
    
var e=Object.defineProperty,o=Object.defineProperties,t=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,i=(o,t,n)=>t in o?e(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,r=(e,o)=>{for(var t in o||(o={}))s.call(o,t)&&i(e,t,o[t]);if(n)for(var t of n(o))l.call(o,t)&&i(e,t,o[t]);return e},a=(e,n)=>o(e,t(n));import{V as u,r as d,U as c,cD as p,aJ as m,ah as b,f as v,w as f,v as g,e as y,a7 as w,ap as x,x as h,Q as j,aP as k,aG as _,aH as C,aq as $,cS as P,aE as A,m as L,c as O,cT as V,W as E,u as B,a as T,g as I,b as S,t as N,s as q,y as z,z as D}from"./index.2721a539.js";import{_ as H}from"./index.20ddebed.js";import{_ as R}from"./index.d9ff6232.js";/* empty css                        */import{E as U,a as G}from"./el-button.702f0937.js";/* empty css               *//* empty css                       *//* empty css                        *//* empty css                   */import{E as J,a as M}from"./index.7b0f5054.js";import{E as Q}from"./index.c7ec0ec4.js";/* empty css                */import"./index.4b9f4b82.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./index.438da6eb.js";import"./index.f8027735.js";import"./event.75bf56a9.js";import"./error.b438369f.js";let W;const Z=function(e={}){if(!x)return;const o=F(e);if(o.fullscreen&&W)return W;const t=function(e){let o;const t=d(!1),n=c(a(r({},e),{originalPosition:"",originalOverflow:"",visible:!1}));function s(){const e=n.parent;if(!e.vLoadingAddClassList){let o=e.getAttribute("loading-number");o=Number.parseInt(o)-1,o?e.setAttribute("loading-number",o.toString()):(m(e,"el-loading-parent--relative"),e.removeAttribute("loading-number")),m(e,"el-loading-parent--hidden")}l(),x.unmount()}function l(){var e,o;null==(o=null==(e=h.$el)?void 0:e.parentNode)||o.removeChild(h.$el)}function i(){t.value&&(t.value=!1,s())}const x=p({name:"ElLoading",setup:()=>()=>{const e=n.spinner||n.svg,o=b("svg",r({class:"circular",viewBox:n.svgViewBox?n.svgViewBox:"25 25 50 50"},e?{innerHTML:e}:{}),[b("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none"})]),t=n.text?b("p",{class:"el-loading-text"},[n.text]):void 0;return b(w,{name:"el-loading-fade",onAfterLeave:i},{default:v((()=>[f(y("div",{style:{backgroundColor:n.background||""},class:["el-loading-mask",n.customClass,n.fullscreen?"is-fullscreen":""]},[b("div",{class:"el-loading-spinner"},[o,t])]),[[g,n.visible]])]))})}}),h=x.mount(document.createElement("div"));return a(r({},u(n)),{setText:function(e){n.text=e},remvoeElLoadingChild:l,close:function(){var l;e.beforeClose&&!e.beforeClose()||(n.parent.vLoadingAddClassList=void 0,t.value=!0,clearTimeout(o),o=window.setTimeout((()=>{t.value&&(t.value=!1,s())}),400),n.visible=!1,null==(l=e.closed)||l.call(e))},handleAfterLeave:i,vm:h,get $el(){return h.$el}})}(a(r({},o),{closed:()=>{var e;null==(e=o.closed)||e.call(o),o.fullscreen&&(W=void 0)}}));K(o,o.parent,t),X(o,o.parent,t),o.parent.vLoadingAddClassList=()=>X(o,o.parent,t);let n=o.parent.getAttribute("loading-number");return n=n?`${Number.parseInt(n)+1}`:"1",o.parent.setAttribute("loading-number",n),o.parent.appendChild(t.$el),h((()=>t.visible.value=o.visible)),o.fullscreen&&(W=t),t},F=e=>{var o,t,n,s;let l;return l=j(e.target)?null!=(o=document.querySelector(e.target))?o:document.body:e.target||document.body,{parent:l===document.body||e.body?document.body:l,background:e.background||"",svg:e.svg||"",svgViewBox:e.svgViewBox||"",spinner:e.spinner||!1,text:e.text||"",fullscreen:l===document.body&&(null==(t=e.fullscreen)||t),lock:null!=(n=e.lock)&&n,customClass:e.customClass||"",visible:null==(s=e.visible)||s,target:l}},K=async(e,o,t)=>{const{nextZIndex:n}=k(),s={};if(e.fullscreen)t.originalPosition.value=_(document.body,"position"),t.originalOverflow.value=_(document.body,"overflow"),s.zIndex=n();else if(e.parent===document.body){t.originalPosition.value=_(document.body,"position"),await h();for(const o of["top","left"]){const t="top"===o?"scrollTop":"scrollLeft";s[o]=e.target.getBoundingClientRect()[o]+document.body[t]+document.documentElement[t]-Number.parseInt(_(document.body,`margin-${o}`),10)+"px"}for(const o of["height","width"])s[o]=`${e.target.getBoundingClientRect()[o]}px`}else t.originalPosition.value=_(o,"position");for(const[l,i]of Object.entries(s))t.$el.style[l]=i},X=(e,o,t)=>{"absolute"!==t.originalPosition.value&&"fixed"!==t.originalPosition.value?C(o,"el-loading-parent--relative"):m(o,"el-loading-parent--relative"),e.fullscreen&&e.lock?C(o,"el-loading-parent--hidden"):m(o,"el-loading-parent--hidden")},Y=Symbol("ElLoading"),ee=(e,o)=>{var t,n,s,l;const i=o.instance,r=e=>$(o.value)?o.value[e]:void 0,a=o=>(e=>{const o=j(e)&&(null==i?void 0:i[e])||e;return o?d(o):o})(r(o)||e.getAttribute(`element-loading-${P(o)}`)),u=null!=(t=r("fullscreen"))?t:o.modifiers.fullscreen,c={text:a("text"),svg:a("svg"),svgViewBox:a("svgViewBox"),spinner:a("spinner"),background:a("background"),customClass:a("customClass"),fullscreen:u,target:null!=(n=r("target"))?n:u?void 0:e,body:null!=(s=r("body"))?s:o.modifiers.body,lock:null!=(l=r("lock"))?l:o.modifiers.lock};e[Y]={options:c,instance:Z(c)}},oe={mounted(e,o){o.value&&ee(e,o)},updated(e,o){const t=e[Y];o.oldValue!==o.value&&(o.value&&!o.oldValue?ee(e,o):o.value&&o.oldValue?$(o.value)&&((e,o)=>{for(const t of Object.keys(o))A(o[t])&&(o[t].value=e[t])})(o.value,t.options):null==t||t.instance.close())},unmounted(e){var o;null==(o=e[Y])||o.instance.close()}},te={install(e){e.directive("loading",oe),e.config.globalProperties.$loading=Z},directive:oe,service:Z},ne={props:{value:{type:Array,default:()=>[]}},setup(e){const o=e;return(e,t)=>(L(),O("div",null,[V(o.value)?E(e.$slots,"default",{key:0}):E(e.$slots,"no-auth",{key:1})]))}};const se={key:0},le={key:1},ie=S("h3",null,"切换帐号",-1),re=S("h3",null,"帐号权限",-1),ae=S("h3",null,"鉴权组件（请对照代码查看）",-1),ue=q("你有 permission.browse 权限"),de=q("你没有 permission.browse 权限"),ce=q("你有 permission.create 权限"),pe=q("你没有 permission.create 权限"),me=q("你有 permission.browse 或 permission.create 权限"),be=q("你没有 permission.browse 或 permission.create 权限"),ve=q("你有 permission.browse 和 permission.create 权限"),fe=q("你没有 permission.browse 和 permission.create 权限"),ge=S("h3",null,"鉴权指令（请对照代码查看）",-1),ye=[q(" 如果你有 permission.browse 权限则能看到这句话 ")],we=[q(" 如果你有 permission.create 权限则能看到这句话 ")],xe=[q(" 如果你有 permission.browse 或 permission.create 权限则能看到这句话 ")],he=[q(" 如果你有 permission.browse 和 permission.create 权限则能看到这句话 ")],je=S("h3",null,"鉴权函数（请对照代码查看）",-1),ke=q("校验 permission.browse 权限"),_e=q("校验 permission.create 权限"),Ce=q("校验 permission.browse 或 permission.create 权限"),$e=q("校验 permission.browse 和 permission.create 权限"),Pe={setup(e){const{proxy:o}=D(),t=B(),n=T();function s(e){te.service({lock:!0,text:"帐号切换中",background:"rgba(0, 0, 0, 0.7)"}),n.login({account:e,password:""}).then((()=>{setTimeout((()=>{location.reload()}),1e3)}))}function l(e){o.$auth(e)?z.success("校验通过"):z.error("校验不通过")}return(e,i)=>{const r=J,a=M,u=Q,d=H,c=ne,p=U,m=G,b=R,g=H,w=ne;return L(),O("div",null,[y(b,null,{default:v((()=>[I(t).app.enablePermission?(L(),O("div",le,[ie,y(a,{modelValue:I(n).account,"onUpdate:modelValue":i[0]||(i[0]=e=>I(n).account=e),onChange:s},{default:v((()=>[y(r,{label:"admin"}),y(r,{label:"test"})])),_:1},8,["modelValue"]),re,S("div",null,N(I(n).permissions),1),ae,S("div",null,[y(d,{value:"permission.browse",style:{"margin-bottom":"10px"}},{"no-auth":v((()=>[y(u,{type:"danger"},{default:v((()=>[de])),_:1})])),default:v((()=>[y(u,null,{default:v((()=>[ue])),_:1})])),_:1}),y(d,{value:"permission.create",style:{"margin-bottom":"10px"}},{"no-auth":v((()=>[y(u,{type:"danger"},{default:v((()=>[pe])),_:1})])),default:v((()=>[y(u,null,{default:v((()=>[ce])),_:1})])),_:1}),y(d,{value:["permission.browse","permission.create"],style:{"margin-bottom":"10px"}},{"no-auth":v((()=>[y(u,{type:"danger"},{default:v((()=>[be])),_:1})])),default:v((()=>[y(u,null,{default:v((()=>[me])),_:1})])),_:1},8,["value"]),y(c,{value:["permission.browse","permission.create"]},{"no-auth":v((()=>[y(u,{type:"danger"},{default:v((()=>[fe])),_:1})])),default:v((()=>[y(u,null,{default:v((()=>[ve])),_:1})])),_:1},8,["value"])]),ge,S("div",null,[f((L(),O("div",null,ye)),[[g,"permission.browse"]]),f((L(),O("div",null,we)),[[g,"permission.create"]]),f((L(),O("div",null,xe)),[[g,["permission.browse","permission.create"]]]),f((L(),O("div",null,he)),[[w,["permission.browse","permission.create"]]])]),je,S("div",null,[y(m,{style:{display:"block","margin-bottom":"10px"}},{default:v((()=>[y(p,{onClick:i[1]||(i[1]=e=>l("permission.browse"))},{default:v((()=>[ke])),_:1}),y(p,{onClick:i[2]||(i[2]=e=>l("permission.create"))},{default:v((()=>[_e])),_:1})])),_:1}),y(m,null,{default:v((()=>[y(p,{onClick:i[3]||(i[3]=e=>l(["permission.browse","permission.create"]))},{default:v((()=>[Ce])),_:1}),y(p,{onClick:i[4]||(i[4]=e=>{return t=["permission.browse","permission.create"],void(o.$authAll(t)?z.success("校验通过"):z.error("校验不通过"));var t})},{default:v((()=>[$e])),_:1})])),_:1})])])):(L(),O("div",se,"请到 seeting.js 里打开权限功能，再进入该页面查看演示"))])),_:1})])}}};export{Pe as default};
