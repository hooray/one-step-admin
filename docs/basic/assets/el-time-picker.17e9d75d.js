
/**
 * 由 One-step-admin 提供技术支持
 * https://hooray.gitee.io/one-step-admin/
 * Powered by One-step-admin
 * https://hooray.github.io/one-step-admin/
 */
    
var e=Object.defineProperty,n=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,o=(n,a,t)=>a in n?e(n,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[a]=t,i=(e,n)=>{for(var a in n||(n={}))r.call(n,a)&&o(e,a,n[a]);if(t)for(var a of t(n))s.call(n,a)&&o(e,a,n[a]);return e},l=(e,t)=>n(e,a(t));import{bu as u,N as c,d,B as m,C as p,r as f,H as b,_ as v,bl as h,aL as g,aS as S,m as k,c as w,b as y,X as C,t as T,e as O,i as _,D as M,ah as R}from"./index.2721a539.js";import{d as x,u as A,g as P,c as D,t as V,T as j,e as E,C as B}from"./panel-time-pick.cd18f78c.js";import{u as H}from"./index.af579ae3.js";import{b as I}from"./_baseFlatten.7649e1ea.js";import{a as q,m as F,p as K,q as U,r as L}from"./isEqual.819cbe5b.js";function N(e){return e}function X(e,n,a){switch(a.length){case 0:return e.call(n);case 1:return e.call(n,a[0]);case 2:return e.call(n,a[0],a[1]);case 3:return e.call(n,a[0],a[1],a[2])}return e.apply(n,a)}var $=Date.now;var z,G,J,Q=u?function(e,n){return u(e,"toString",{configurable:!0,enumerable:!1,value:(a=n,function(){return a}),writable:!0});var a}:N,W=(z=Q,G=0,J=0,function(){var e=$(),n=16-(e-J);if(J=e,n>0){if(++G>=800)return arguments[0]}else G=0;return z.apply(void 0,arguments)});function Y(e){return e!=e}function Z(e,n){return!!(null==e?0:e.length)&&function(e,n,a){return n==n?function(e,n,a){for(var t=a-1,r=e.length;++t<r;)if(e[t]===n)return t;return-1}(e,n,a):function(e,n,a,t){for(var r=e.length,s=a+(t?1:-1);t?s--:++s<r;)if(n(e[s],s,e))return s;return-1}(e,Y,a)}(e,n,0)>-1}var ee=Math.max;function ne(e){return c(e)&&q(e)}function ae(e,n,a){for(var t=-1,r=null==e?0:e.length;++t<r;)if(a(n,e[t]))return!0;return!1}var te=F&&1/K(new F([,-0]))[1]==1/0?function(e){return new F(e)}:function(){};var re=function(e,n){return W(function(e,n,a){return n=ee(void 0===n?e.length-1:n,0),function(){for(var t=arguments,r=-1,s=ee(t.length-n,0),o=Array(s);++r<s;)o[r]=t[n+r];r=-1;for(var i=Array(n+1);++r<n;)i[r]=t[r];return i[n]=a(o),X(e,this,i)}}(e,n,N),e+"")}((function(e){return function(e,n,a){var t=-1,r=Z,s=e.length,o=!0,i=[],l=i;if(a)o=!1,r=ae;else if(s>=200){var u=n?null:te(e);if(u)return K(u);o=!1,r=L,l=new U}else l=n?[]:i;e:for(;++t<s;){var c=e[t],d=n?n(c):c;if(c=a||0!==c?c:0,o&&d==d){for(var m=l.length;m--;)if(l[m]===d)continue e;n&&l.push(d),i.push(c)}else r(l,d,a)||(l!==i&&l.push(d),i.push(c))}return i}(I(e,1,ne,!0))})),se=re;const oe=(e,n)=>{const a=[];for(let t=e;t<=n;t++)a.push(t);return a},ie=d({components:{TimeSpinner:x},props:{visible:Boolean,actualVisible:Boolean,parsedValue:{type:[Array]},format:{type:String,default:""}},emits:["pick","select-range","set-picker-option"],setup(e,n){const{t:a,lang:t}=H(),r=m("time"),s=m("picker"),o=p((()=>e.parsedValue[0])),i=p((()=>e.parsedValue[1])),l=A(e),u=p((()=>e.format.includes("ss"))),c=p((()=>e.format.includes("A")?"A":e.format.includes("a")?"a":"")),d=f([]),v=f([]),S=(e,a)=>{n.emit("pick",[e,a],!0)},k=p((()=>o.value>i.value)),w=f([0,2]),y=p((()=>u.value?11:8)),C=(e,n)=>{const a=B?B(e):[],t="start"===e,r=(n||(t?i.value:o.value)).hour(),s=t?oe(r+1,23):oe(0,r-1);return se(a,s)},T=(e,n,a)=>{const t=I?I(e,n):[],r="start"===n,s=a||(r?i.value:o.value);if(e!==s.hour())return t;const l=s.minute(),u=r?oe(l+1,59):oe(0,l-1);return se(t,u)},O=(e,n,a,t)=>{const r=q?q(e,n,a):[],s="start"===a,l=t||(s?i.value:o.value),u=l.hour(),c=l.minute();if(e!==u||n!==c)return r;const d=l.second(),m=s?oe(d+1,59):oe(0,d-1);return se(r,m)},_=e=>e.map(((n,a)=>D(e[0],e[1],0===a?"start":"end"))),{getAvailableHours:M,getAvailableMinutes:R,getAvailableSeconds:x}=P(C,T,O),D=(e,n,a)=>{const t={hour:M,minute:R,second:x},r="start"===a;let s=r?e:n;const o=r?n:e;return["hour","minute","second"].forEach((e=>{if(t[e]){let n;const i=t[e];if(n="minute"===e?i(s.hour(),a,o):"second"===e?i(s.hour(),s.minute(),a,o):i(a,o),n&&n.length&&!n.includes(s[e]())){const a=r?0:n.length-1;s=s[e](n[a])}}})),s};n.emit("set-picker-option",["formatToString",n=>n?Array.isArray(n)?n.map((n=>n.format(e.format))):n.format(e.format):null]),n.emit("set-picker-option",["parseUserInput",n=>n?Array.isArray(n)?n.map((n=>h(n,e.format).locale(t.value))):h(n,e.format).locale(t.value):null]),n.emit("set-picker-option",["isValidValue",e=>{const n=e.map((e=>h(e).locale(t.value))),a=_(n);return n[0].isSame(a[0])&&n[1].isSame(a[1])}]),n.emit("set-picker-option",["handleKeydown",e=>{const n=e.code;if(n===g.left||n===g.right){return(e=>{const n=u.value?[0,3,6,11,14,17]:[0,3,8,11],a=["hours","minutes"].concat(u.value?["seconds"]:[]),t=(n.indexOf(w.value[0])+e+n.length)%n.length,r=n.length/2;t<r?V.start_emitSelectRange(a[t]):V.end_emitSelectRange(a[t-r])})(n===g.left?-1:1),void e.preventDefault()}if(n===g.up||n===g.down){const a=n===g.up?-1:1,t=w.value[0]<y.value?"start":"end";return V[`${t}_scrollDown`](a),void e.preventDefault()}}]),n.emit("set-picker-option",["getDefaultValue",()=>{if(Array.isArray(F))return F.map((e=>h(e).locale(t.value)));const e=h(F).locale(t.value);return[e,e.add(60,"m")]}]),n.emit("set-picker-option",["getRangeAvailableTime",_]);const V={},j=b("EP_PICKER_BASE"),{arrowControl:E,disabledHours:B,disabledMinutes:I,disabledSeconds:q,defaultValue:F}=j.props;return{nsTime:r,nsPicker:s,arrowControl:E,onSetOption:e=>{V[e[0]]=e[1]},setMaxSelectionRange:(e,a)=>{n.emit("select-range",e,a,"max"),w.value=[e+y.value,a+y.value]},setMinSelectionRange:(e,a)=>{n.emit("select-range",e,a,"min"),w.value=[e,a]},btnConfirmDisabled:k,handleCancel:()=>{n.emit("pick",l.value,!1)},handleConfirm:(e=!1)=>{n.emit("pick",[o.value,i.value],e)},t:a,showSeconds:u,minDate:o,maxDate:i,amPmMode:c,handleMinChange:e=>{S(e.millisecond(0),i.value)},handleMaxChange:e=>{S(o.value,e.millisecond(0))},minSelectableRange:d,maxSelectableRange:v,disabledHours_:C,disabledMinutes_:T,disabledSeconds_:O}}}),le=["disabled"];var ue=v(ie,[["render",function(e,n,a,t,r,s){const o=S("time-spinner");return e.actualVisible?(k(),w("div",{key:0,class:C([e.nsTime.b("range-picker"),e.nsPicker.b("panel")])},[y("div",{class:C(e.nsTime.be("range-picker","content"))},[y("div",{class:C(e.nsTime.be("range-picker","cell"))},[y("div",{class:C(e.nsTime.be("range-picker","header"))},T(e.t("el.datepicker.startTime")),3),y("div",{class:C([e.nsTime.be("range-picker","body"),e.nsTime.be("panel","content"),e.nsTime.is("arrow",e.arrowControl),{"has-seconds":e.showSeconds}])},[O(o,{ref:"minSpinner",role:"start","show-seconds":e.showSeconds,"am-pm-mode":e.amPmMode,"arrow-control":e.arrowControl,"spinner-date":e.minDate,"disabled-hours":e.disabledHours_,"disabled-minutes":e.disabledMinutes_,"disabled-seconds":e.disabledSeconds_,onChange:e.handleMinChange,onSetOption:e.onSetOption,onSelectRange:e.setMinSelectionRange},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onChange","onSetOption","onSelectRange"])],2)],2),y("div",{class:C(e.nsTime.be("range-picker","cell"))},[y("div",{class:C(e.nsTime.be("range-picker","header"))},T(e.t("el.datepicker.endTime")),3),y("div",{class:C([e.nsTime.be("range-picker","body"),e.nsTime.be("panel","content"),e.nsTime.is("arrow",e.arrowControl),{"has-seconds":e.showSeconds}])},[O(o,{ref:"maxSpinner",role:"end","show-seconds":e.showSeconds,"am-pm-mode":e.amPmMode,"arrow-control":e.arrowControl,"spinner-date":e.maxDate,"disabled-hours":e.disabledHours_,"disabled-minutes":e.disabledMinutes_,"disabled-seconds":e.disabledSeconds_,onChange:e.handleMaxChange,onSetOption:e.onSetOption,onSelectRange:e.setMaxSelectionRange},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onChange","onSetOption","onSelectRange"])],2)],2)],2),y("div",{class:C(e.nsTime.be("panel","footer"))},[y("button",{type:"button",class:C([e.nsTime.be("panel","btn"),"cancel"]),onClick:n[0]||(n[0]=n=>e.handleCancel())},T(e.t("el.datepicker.cancel")),3),y("button",{type:"button",class:C([e.nsTime.be("panel","btn"),"confirm"]),disabled:e.btnConfirmDisabled,onClick:n[1]||(n[1]=n=>e.handleConfirm())},T(e.t("el.datepicker.confirm")),11,le)],2)],2)):_("v-if",!0)}],["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/panel-time-range.vue"]]);h.extend(D);const ce=d({name:"ElTimePicker",install:null,props:l(i({},V),{isRange:{type:Boolean,default:!1}}),emits:["update:modelValue"],setup(e,n){const a=f(null),t=e.isRange?"timerange":"time",r=e.isRange?ue:j,s=l(i({},e),{focus:()=>{var e;null==(e=a.value)||e.handleFocus()},blur:()=>{var e;null==(e=a.value)||e.handleBlur()}});return M("ElPopperOptions",e.popperOptions),n.expose(s),()=>{var s;const o=null!=(s=e.format)?s:E;return R(B,l(i({},e),{format:o,type:t,ref:a,"onUpdate:modelValue":e=>n.emit("update:modelValue",e)}),{default:e=>R(r,e)})}}});ce.install=e=>{e.component(ce.name,ce)};const de=ce;export{de as E};
