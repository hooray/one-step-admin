
/**
 * 由 One-step-admin 提供技术支持
 * https://hooray.gitee.io/one-step-admin/
 * Powered by One-step-admin
 * https://hooray.github.io/one-step-admin/
 */
    
var pe=Object.defineProperty,fe=Object.defineProperties;var ge=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var ve=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable;var F=(_,d,c)=>d in _?pe(_,d,{enumerable:!0,configurable:!0,writable:!0,value:c}):_[d]=c,O=(_,d)=>{for(var c in d||(d={}))ve.call(d,c)&&F(_,c,d[c]);if(A)for(var c of A(d))be.call(d,c)&&F(_,c,d[c]);return _},T=(_,d)=>fe(_,ge(d));import{_ as he}from"./index.3bae8151.js";import{_ as xe}from"./index.6fd57480.js";import{_ as ye}from"./index.8d24a871.js";import{_ as we}from"./index.f9ee30f8.js";import{_ as Ve}from"./index.f2402e5b.js";import{r as X,U as Z,x as i,an as G,V as R,o as v,k as D,A as e,z as a,$ as m,C as K,t as H,y as x,u as y,af as J,m as P,ae as Q,l as $e,j as Ce,Z as N,X as ke}from"./vendor.f7e26336.js";import{u as ze}from"./pagination.1e490ab2.js";import{_ as B}from"./index.61ee47b7.js";const Ue=m("\u4FDD\u5BC6"),Me=m("\u7537"),Le=m("\u5973"),Pe={props:{id:{type:[Number,String],default:""}},setup(_,{expose:d}){const c=_,{proxy:f}=K(),l=X({loading:!1,form:{id:c.id,account:"",name:"",mobile:"",sex:"2"},rules:{account:[{required:!0,message:"\u8BF7\u8F93\u5165\u5E10\u53F7",trigger:"blur"}],name:[{required:!0,message:"\u8BF7\u8F93\u5165\u59D3\u540D",trigger:"blur"}],mobile:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7",trigger:"blur"},{validator:(u,o,s)=>{let p={key:"mobile",value:o};l.value.form.id!=""&&(p.id=l.value.form.id),f.$api.get("pages_example/manager/check",{baseURL:"/mock/",params:p}).then(g=>{g.data.exist?s(new Error("\u624B\u673A\u53F7\u5DF2\u5B58\u5728")):s()})},trigger:"blur"}]}});Z(()=>{l.value.form.id!=""&&V()});function V(){l.value.loading=!0,f.$api.get("pages_example/manager/detail",{baseURL:"/mock/",params:{id:l.value.form.id}}).then(u=>{l.value.loading=!1,l.value.form.account=u.data.account,l.value.form.name=u.data.name,l.value.form.mobile=u.data.mobile})}return d({submit(u){l.value.form.id==""?f.$refs.form.validate(o=>{o&&f.$api.post("pages_example/manager/create",l.value.form,{baseURL:"/mock/"}).then(()=>{f.$message.success({message:"\u6A21\u62DF\u65B0\u589E\u6210\u529F",center:!0}),u&&u()})}):f.$refs.form.validate(o=>{o&&f.$api.post("pages_example/manager/edit",l.value.form,{baseURL:"/mock/"}).then(()=>{f.$message.success({message:"\u6A21\u62DF\u7F16\u8F91\u6210\u529F",center:!0}),u&&u()})})}}),(u,o)=>{const s=i("el-input"),p=i("el-form-item"),g=i("el-radio-button"),C=i("el-radio-group"),k=i("el-form"),b=G("loading");return R((v(),D("div",null,[e(k,{ref:"form",model:l.value.form,rules:l.value.rules,"label-width":"120px","label-suffix":"\uFF1A"},{default:a(()=>[e(p,{label:"\u5E10\u53F7",prop:"account"},{default:a(()=>[e(s,{modelValue:l.value.form.account,"onUpdate:modelValue":o[0]||(o[0]=h=>l.value.form.account=h),placeholder:"\u8BF7\u8F93\u5165\u5E10\u53F7"},null,8,["modelValue"])]),_:1}),e(p,{label:"\u59D3\u540D",prop:"name"},{default:a(()=>[e(s,{modelValue:l.value.form.name,"onUpdate:modelValue":o[1]||(o[1]=h=>l.value.form.name=h),placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D"},null,8,["modelValue"])]),_:1}),e(p,{label:"\u624B\u673A\u53F7",prop:"mobile"},{default:a(()=>[e(s,{modelValue:l.value.form.mobile,"onUpdate:modelValue":o[2]||(o[2]=h=>l.value.form.mobile=h),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"},null,8,["modelValue"])]),_:1}),e(p,{label:"\u6027\u522B",prop:"sex"},{default:a(()=>[e(C,{modelValue:l.value.form.sex,"onUpdate:modelValue":o[3]||(o[3]=h=>l.value.form.sex=h),size:"small"},{default:a(()=>[e(g,{label:"2"},{default:a(()=>[Ue]),_:1}),e(g,{label:"1"},{default:a(()=>[Me]),_:1}),e(g,{label:"0"},{default:a(()=>[Le]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])),[[b,l.value.loading]])}}};var I=B(Pe,[["__scopeId","data-v-aa80d99c"]]);const Se=m("\u53D6 \u6D88"),je=m("\u786E \u5B9A"),Re={class:"buttons"},De=m("\u53D6 \u6D88"),Ke=m("\u786E \u5B9A"),Ne={props:T(O({},I.props),{modelValue:{type:Boolean,default:!1},mode:{type:String,default:"dialog",validator:_=>["dialog","drawer"].includes(_)}}),emits:["update:modelValue","success"],setup(_,{emit:d}){const c=_,{proxy:f}=K();let l=H({get:function(){return c.modelValue},set:function(s){d("update:modelValue",s)}});const V=H(()=>c.id==""?"\u65B0\u589E\u7BA1\u7406\u5458":"\u7F16\u8F91\u7BA1\u7406\u5458");function u(){f.$refs.form.submit(()=>{d("success"),o()})}function o(){l.value=!1}return(s,p)=>{const g=i("el-button"),C=i("el-dialog"),k=i("el-drawer");return v(),D("div",null,[c.mode==="dialog"?(v(),x(C,{key:0,modelValue:y(l),"onUpdate:modelValue":p[0]||(p[0]=b=>J(l)?l.value=b:l=b),title:y(V),width:"600px","close-on-click-modal":!1,"append-to-body":"","destroy-on-close":""},{footer:a(()=>[e(g,{size:"large",onClick:o},{default:a(()=>[Se]),_:1}),e(g,{type:"primary",size:"large",onClick:u},{default:a(()=>[je]),_:1})]),default:a(()=>[e(I,Q({ref:"form"},s.$props),null,16)]),_:1},8,["modelValue","title"])):c.mode==="drawer"?(v(),x(k,{key:1,modelValue:y(l),"onUpdate:modelValue":p[1]||(p[1]=b=>J(l)?l.value=b:l=b),title:y(V),size:"600px","close-on-click-modal":!1,"custom-class":"form-mode-drawer","destroy-on-close":""},{default:a(()=>[e(I,Q({ref:"form"},s.$props,{class:"form-container"}),null,16),$e("div",Re,[e(g,{size:"large",onClick:o},{default:a(()=>[De]),_:1}),e(g,{type:"primary",size:"large",onClick:u},{default:a(()=>[Ke]),_:1})])]),_:1},8,["modelValue","title"])):P("v-if",!0)])}}};var Be=B(Ne,[["__scopeId","data-v-240f849c"]]);const Ie=m("\u65B0\u589E\u7BA1\u7406\u5458"),Ee=m("\u5168\u90E8"),qe=m("\u7537"),Ae=m("\u5973"),Fe=m("\u4FDD\u5BC6"),Oe=m("\u7B5B \u9009"),Te=m("\u6279\u91CF\u64CD\u4F5C"),Xe=m("\u7537"),Ze=m("\u5973"),Ge=m("\u4FDD\u5BC6"),He=m("\u7F16\u8F91"),Je=m(" \u66F4\u591A\u64CD\u4F5C "),Qe=m("\u91CD\u7F6E\u5BC6\u7801"),We=m("\u5220\u9664"),Ye=Ce({name:"PagesExampleManagerList"}),eo=Object.assign(Ye,{setup(_){const{pagination:d,getParams:c,onSizeChange:f,onCurrentChange:l,onSortChange:V}=ze(),{proxy:u}=K(),o=X({loading:!1,formMode:"dialog",formModeProps:{visible:!1,id:""},search:{account:"",name:"",mobile:"",sex:""},searchMore:!1,batch:{enable:!0,selectionDataList:[]},dataList:[]});Z(()=>{s()});function s(){o.value.loading=!0;let n=c();o.value.search.account&&(n.account=o.value.search.account),o.value.search.name&&(n.name=o.value.search.name),o.value.search.mobile&&(n.mobile=o.value.search.mobile),o.value.search.sex!=""&&(n.sex=o.value.search.sex),u.$api.get("pages_example/manager/list",{baseURL:"/mock/",params:n}).then(t=>{o.value.loading=!1,o.value.dataList=t.data.list,d.value.total=t.data.total})}function p(n){f(n).then(()=>s())}function g(n){l(n).then(()=>s())}function C(n,t){V(n,t).then(()=>s())}function k(){o.value.formModeProps.id="",o.value.formModeProps.visible=!0}function b(n){o.value.formModeProps.id=n.id,o.value.formModeProps.visible=!0}function h(n,t){u.$confirm(`\u786E\u8BA4${n?"\u542F\u7528":"\u505C\u7528"}\u300C${t.account}\u300D\u5417\uFF1F`,"\u786E\u8BA4\u4FE1\u606F").then(()=>{u.$api.post("pages_example/manager/change/status",{id:t.id,status:n},{baseURL:"/mock/"}).then(()=>{u.$message.success({message:`\u6A21\u62DF${n?"\u542F\u7528":"\u505C\u7528"}\u6210\u529F`,center:!0})})}).catch(()=>{t.status=!n})}function W(n){u.$confirm(`\u786E\u8BA4\u5C06\u300C${n.account}\u300D\u7684\u5BC6\u7801\u91CD\u7F6E\u4E3A \u201C123456\u201D \u5417\uFF1F`,"\u786E\u8BA4\u4FE1\u606F").then(()=>{u.$api.post("pages_example/manager/password/reset",{id:n.id},{baseURL:"/mock/"}).then(()=>{u.$message.success({message:"\u6A21\u62DF\u91CD\u7F6E\u6210\u529F",center:!0})})}).catch(()=>{})}function Y(n){u.$confirm(`\u786E\u8BA4\u5220\u9664\u300C${n.account}\u300D\u7BA1\u7406\u5458\u5417\uFF1F`,"\u786E\u8BA4\u4FE1\u606F").then(()=>{u.$api.post("pages_example/manager/delete",{id:n.id},{baseURL:"/mock/"}).then(()=>{s(),u.$message.success({message:"\u6A21\u62DF\u5220\u9664\u6210\u529F",center:!0})})}).catch(()=>{})}function ee(n,t){switch(n){case"resetPassword":W(t);break;case"delete":Y(t);break}}return(n,t)=>{const oe=Ve,z=i("el-button"),S=i("el-input"),U=i("el-form-item"),M=i("el-col"),E=i("el-row"),L=i("el-radio-button"),ae=i("el-radio-group"),le=i("el-form"),te=we,ne=ye,w=i("el-table-column"),j=i("el-tag"),se=i("el-switch"),re=xe,q=i("el-dropdown-item"),de=i("el-dropdown-menu"),ue=i("el-dropdown"),ie=i("el-table"),me=i("el-pagination"),ce=he,_e=G("loading");return v(),D("div",null,[e(oe,{title:"\u7BA1\u7406\u5458\u7BA1\u7406",content:"\u9875\u9762\u6570\u636E\u4E3A Mock \u793A\u4F8B\u6570\u636E\uFF0C\u975E\u771F\u5B9E\u6570\u636E\u3002"}),e(ce,null,{default:a(()=>[e(z,{type:"primary",size:"large",icon:"el-icon-plus",onClick:k},{default:a(()=>[Ie]),_:1}),e(te,{"show-more":"",onToggle:t[4]||(t[4]=r=>o.value.searchMore=r)},{default:a(()=>[e(le,{model:o.value.search,size:"default","label-width":"100px","label-suffix":"\uFF1A"},{default:a(()=>[e(E,null,{default:a(()=>[e(M,{md:8},{default:a(()=>[e(U,{label:"\u5E10\u53F7"},{default:a(()=>[e(S,{modelValue:o.value.search.account,"onUpdate:modelValue":t[0]||(t[0]=r=>o.value.search.account=r),placeholder:"\u8BF7\u8F93\u5165\u5E10\u53F7\uFF0C\u652F\u6301\u6A21\u7CCA\u67E5\u8BE2",clearable:"",onKeydown:N(s,["enter"]),onClear:s},null,8,["modelValue","onKeydown"])]),_:1})]),_:1}),e(M,{md:8},{default:a(()=>[e(U,{label:"\u59D3\u540D"},{default:a(()=>[e(S,{modelValue:o.value.search.name,"onUpdate:modelValue":t[1]||(t[1]=r=>o.value.search.name=r),placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D\uFF0C\u652F\u6301\u6A21\u7CCA\u67E5\u8BE2",clearable:"",onKeydown:N(s,["enter"]),onClear:s},null,8,["modelValue","onKeydown"])]),_:1})]),_:1}),e(M,{md:8},{default:a(()=>[e(U,{label:"\u624B\u673A\u53F7"},{default:a(()=>[e(S,{modelValue:o.value.search.mobile,"onUpdate:modelValue":t[2]||(t[2]=r=>o.value.search.mobile=r),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7",clearable:"",onKeydown:N(s,["enter"]),onClear:s},null,8,["modelValue","onKeydown"])]),_:1})]),_:1})]),_:1}),R(e(E,null,{default:a(()=>[e(M,{md:8},{default:a(()=>[e(U,{label:"\u6027\u522B"},{default:a(()=>[e(ae,{modelValue:o.value.search.sex,"onUpdate:modelValue":t[3]||(t[3]=r=>o.value.search.sex=r),onChange:s},{default:a(()=>[e(L,{label:""},{default:a(()=>[Ee]),_:1}),e(L,{label:"1"},{default:a(()=>[qe]),_:1}),e(L,{label:"0"},{default:a(()=>[Ae]),_:1}),e(L,{label:"2"},{default:a(()=>[Fe]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},512),[[ke,o.value.searchMore]]),e(U,null,{default:a(()=>[e(z,{type:"primary",icon:"el-icon-search",onClick:s},{default:a(()=>[Oe]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),o.value.batch.enable?(v(),x(ne,{key:0,data:o.value.dataList,"selection-data":o.value.batch.selectionDataList,onCheckAll:t[5]||(t[5]=r=>n.$refs.table.toggleAllSelection()),onCheckNull:t[6]||(t[6]=r=>n.$refs.table.clearSelection())},{default:a(()=>[e(z,{size:"default"},{default:a(()=>[Te]),_:1})]),_:1},8,["data","selection-data"])):P("v-if",!0),R((v(),x(ie,{ref:"table",class:"list-table",data:o.value.dataList,border:"",stripe:"","highlight-current-row":"",onSortChange:C,onSelectionChange:t[7]||(t[7]=r=>o.value.batch.selectionDataList=r)},{default:a(()=>[o.value.batch.enable?(v(),x(w,{key:0,type:"selection",align:"center",fixed:""})):P("v-if",!0),e(w,{prop:"account",sortable:"",label:"\u5E10\u53F7"}),e(w,{prop:"name",label:"\u59D3\u540D",width:"100",align:"center"}),e(w,{prop:"sex",label:"\u6027\u522B",width:"100",align:"center"},{default:a(r=>[r.row.sex==1?(v(),x(j,{key:0,type:"success",size:"small"},{default:a(()=>[Xe]),_:1})):r.row.sex==0?(v(),x(j,{key:1,type:"warning",size:"small"},{default:a(()=>[Ze]),_:1})):(v(),x(j,{key:2,type:"info",size:"small"},{default:a(()=>[Ge]),_:1}))]),_:1}),e(w,{prop:"mobile",label:"\u624B\u673A\u53F7",width:"150",align:"center"}),e(w,{label:"\u72B6\u6001",width:"100",align:"center"},{default:a(r=>[e(se,{modelValue:r.row.status,"onUpdate:modelValue":$=>r.row.status=$,onChange:$=>h($,r.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(w,{label:"\u64CD\u4F5C",width:"200",align:"center",fixed:"right"},{default:a(r=>[e(z,{type:"primary",size:"small",plain:"",onClick:$=>b(r.row)},{default:a(()=>[He]),_:2},1032,["onClick"]),e(ue,{onCommand:$=>ee($,r.row)},{dropdown:a(()=>[e(de,null,{default:a(()=>[e(q,{command:"resetPassword"},{default:a(()=>[Qe]),_:1}),e(q,{command:"delete",divided:""},{default:a(()=>[We]),_:1})]),_:1})]),default:a(()=>[e(z,{size:"small"},{default:a(()=>[Je,e(re,{name:"el-icon-arrow-down"})]),_:1})]),_:2},1032,["onCommand"])]),_:1})]),_:1},8,["data"])),[[_e,o.value.loading]]),e(me,{"current-page":y(d).page,total:y(d).total,"page-size":y(d).size,"page-sizes":y(d).sizes,layout:y(d).layout,"hide-on-single-page":!1,class:"pagination",background:"",onCurrentChange:g,onSizeChange:p},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),["dialog","drawer"].includes(o.value.formMode)?(v(),x(Be,{key:0,id:o.value.formModeProps.id,modelValue:o.value.formModeProps.visible,"onUpdate:modelValue":t[8]||(t[8]=r=>o.value.formModeProps.visible=r),mode:o.value.formMode,onSuccess:s},null,8,["id","modelValue","mode"])):P("v-if",!0)])}}});var mo=B(eo,[["__scopeId","data-v-347165c1"]]);export{mo as default};
