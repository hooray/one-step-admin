
/**
 * 由 One-step-admin 提供技术支持
 * Powered by One-step-admin
 * https://one-step-admin.netlify.app
 * 代码仓库
 * Gitee  https://gitee.com/hooray/one-step-admin
 * Github https://github.com/hooray/one-step-admin
 */
    
import{_ as e}from"./index.a1a42e0f.js";import{d as a,a as s,r,c as l,b as o,w as d,l as t,m as p,n as i,y as m,z as u,B as n}from"./index.0a5e3bc2.js";import{E as f}from"./el-button.2fada245.js";import{E as c}from"./el-row.5ffdf9e2.js";import{E as w}from"./el-col.3759f1e4.js";import{E as j,a as b}from"./el-form.baa50cfd.js";import"./el-form-item.e866842d.js";import{E as g}from"./el-input.3dbe719d.js";import{_ as h}from"./index.7bc6f31f.js";/* empty css                     */import"./index2.5834ab0d.js";import"./error2.1d524120.js";import"./index2.f37a6952.js";import"./index2.2a4e9295.js";import"./index2.fa2fe4ab.js";import"./typescript2.7477ece2.js";import"./isEqual.e1bd83ff.js";import"./event2.27558ffe.js";import"./index2.0c75c32d.js";import"./isNil.aac33454.js";const v=m("提交"),x=a({name:"PersonalEditPassword"}),y=Object.assign(x,{setup(a){const m=t(),x=p(),{proxy:y}=n(),_=s(),V=r({password:"",newpassword:"",checkpassword:""}),E=r({password:[{required:!0,message:"请输入原密码",trigger:"blur"}],newpassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}],checkpassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{validator:(e,a,s)=>{a!==V.value.newpassword?s(new Error("请确认新密码")):s()}}]});function k(){y.$refs.formRef.validate((e=>{e&&_.editPassword(V.value).then((()=>{u({type:"success",message:"模拟修改成功，请重新登录"}),_.logout().then((()=>{x.push({name:"login",query:{redirect:m.fullPath}})}))})).catch((()=>{}))}))}return(a,s)=>{const r=h,t=g,p=j,m=b,u=w,n=c,x=f,y=e;return i(),l("div",null,[o(y,null,{action:d((()=>[o(x,{type:"primary",size:"small",onClick:k},{default:d((()=>[v])),_:1})])),default:d((()=>[o(r,{title:"修改密码",content:"定期修改密码可以提高帐号安全性噢~"}),o(n,null,{default:d((()=>[o(u,{md:24,lg:12},{default:d((()=>[o(m,{ref:"formRef",model:V.value,rules:E.value,"label-width":"120px"},{default:d((()=>[o(p,{label:"原密码",prop:"password"},{default:d((()=>[o(t,{modelValue:V.value.password,"onUpdate:modelValue":s[0]||(s[0]=e=>V.value.password=e),type:"password",placeholder:"请输入原密码"},null,8,["modelValue"])])),_:1}),o(p,{label:"新密码",prop:"newpassword"},{default:d((()=>[o(t,{modelValue:V.value.newpassword,"onUpdate:modelValue":s[1]||(s[1]=e=>V.value.newpassword=e),type:"password",placeholder:"请输入原密码"},null,8,["modelValue"])])),_:1}),o(p,{label:"确认新密码",prop:"checkpassword"},{default:d((()=>[o(t,{modelValue:V.value.checkpassword,"onUpdate:modelValue":s[2]||(s[2]=e=>V.value.checkpassword=e),type:"password",placeholder:"请输入原密码"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1})])),_:1})])}}});export{y as default};
