
/**
 * 由 One-step-admin 提供技术支持
 * Powered by One-step-admin
 * https://one-step-admin.netlify.app
 * 代码仓库
 * Gitee  https://gitee.com/hooray/one-step-admin
 * Github https://github.com/hooray/one-step-admin
 */
    
var e=Object.defineProperty,o=Object.defineProperties,n=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,i=(o,n,t)=>n in o?e(o,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[n]=t,r=(e,o)=>{for(var n in o||(o={}))s.call(o,n)&&i(e,n,o[n]);if(t)for(var n of t(o))l.call(o,n)&&i(e,n,o[n]);return e},a=(e,t)=>o(e,n(t));import{X as u,r as d,W as c,cE as p,aL as m,aj as b,h as v,w as g,v as f,g as y,a8 as x,aq as w,y as h,R as j,aT as k,aI as _,aJ as C,ar as $,cT as L,ai as A,b as O,c as P,cU as V,G as E,u as B,a as T,f as I,e as N,t as S,s as R,x as q,z}from"./index.eaca9d64.js";import{_ as U}from"./index.c4d94c97.js";import{_ as D}from"./index.9a39b5db.js";/* empty css                        */import{E as G,a as H}from"./el-button.3a9a3385.js";/* empty css               *//* empty css                       *//* empty css                        */import{E as J,a as M}from"./index2.5e3d5613.js";import{E as W}from"./index2.5d9b7623.js";/* empty css                */import"./index.8eb858d1.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./index2.fa9449b9.js";import"./index2.200c9b4b.js";import"./event2.aca9aa52.js";import"./error2.8f448c70.js";let X;const Z=function(e={}){if(!w)return;const o=F(e);if(o.fullscreen&&X)return X;const n=function(e){let o;const n=d(!1),t=c(a(r({},e),{originalPosition:"",originalOverflow:"",visible:!1}));function s(){const e=t.parent;if(!e.vLoadingAddClassList){let o=e.getAttribute("loading-number");o=Number.parseInt(o)-1,o?e.setAttribute("loading-number",o.toString()):(m(e,"el-loading-parent--relative"),e.removeAttribute("loading-number")),m(e,"el-loading-parent--hidden")}l(),w.unmount()}function l(){var e,o;null==(o=null==(e=h.$el)?void 0:e.parentNode)||o.removeChild(h.$el)}function i(){n.value&&(n.value=!1,s())}const w=p({name:"ElLoading",setup:()=>()=>{const e=t.spinner||t.svg,o=b("svg",r({class:"circular",viewBox:t.svgViewBox?t.svgViewBox:"25 25 50 50"},e?{innerHTML:e}:{}),[b("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none"})]),n=t.text?b("p",{class:"el-loading-text"},[t.text]):void 0;return b(x,{name:"el-loading-fade",onAfterLeave:i},{default:v((()=>[g(y("div",{style:{backgroundColor:t.background||""},class:["el-loading-mask",t.customClass,t.fullscreen?"is-fullscreen":""]},[b("div",{class:"el-loading-spinner"},[o,n])]),[[f,t.visible]])]))})}}),h=w.mount(document.createElement("div"));return a(r({},u(t)),{setText:function(e){t.text=e},remvoeElLoadingChild:l,close:function(){var l;e.beforeClose&&!e.beforeClose()||(t.parent.vLoadingAddClassList=void 0,n.value=!0,clearTimeout(o),o=window.setTimeout((()=>{n.value&&(n.value=!1,s())}),400),t.visible=!1,null==(l=e.closed)||l.call(e))},handleAfterLeave:i,vm:h,get $el(){return h.$el}})}(a(r({},o),{closed:()=>{var e;null==(e=o.closed)||e.call(o),o.fullscreen&&(X=void 0)}}));K(o,o.parent,n),Q(o,o.parent,n),o.parent.vLoadingAddClassList=()=>Q(o,o.parent,n);let t=o.parent.getAttribute("loading-number");return t=t?`${Number.parseInt(t)+1}`:"1",o.parent.setAttribute("loading-number",t),o.parent.appendChild(n.$el),h((()=>n.visible.value=o.visible)),o.fullscreen&&(X=n),n},F=e=>{var o,n,t,s;let l;return l=j(e.target)?null!=(o=document.querySelector(e.target))?o:document.body:e.target||document.body,{parent:l===document.body||e.body?document.body:l,background:e.background||"",svg:e.svg||"",svgViewBox:e.svgViewBox||"",spinner:e.spinner||!1,text:e.text||"",fullscreen:l===document.body&&(null==(n=e.fullscreen)||n),lock:null!=(t=e.lock)&&t,customClass:e.customClass||"",visible:null==(s=e.visible)||s,target:l}},K=async(e,o,n)=>{const{nextZIndex:t}=k(),s={};if(e.fullscreen)n.originalPosition.value=_(document.body,"position"),n.originalOverflow.value=_(document.body,"overflow"),s.zIndex=t();else if(e.parent===document.body){n.originalPosition.value=_(document.body,"position"),await h();for(const o of["top","left"]){const n="top"===o?"scrollTop":"scrollLeft";s[o]=e.target.getBoundingClientRect()[o]+document.body[n]+document.documentElement[n]-Number.parseInt(_(document.body,`margin-${o}`),10)+"px"}for(const o of["height","width"])s[o]=`${e.target.getBoundingClientRect()[o]}px`}else n.originalPosition.value=_(o,"position");for(const[l,i]of Object.entries(s))n.$el.style[l]=i},Q=(e,o,n)=>{"absolute"!==n.originalPosition.value&&"fixed"!==n.originalPosition.value?C(o,"el-loading-parent--relative"):m(o,"el-loading-parent--relative"),e.fullscreen&&e.lock?C(o,"el-loading-parent--hidden"):m(o,"el-loading-parent--hidden")},Y=Symbol("ElLoading"),ee=(e,o)=>{var n,t,s,l;const i=o.instance,r=e=>$(o.value)?o.value[e]:void 0,a=o=>(e=>{const o=j(e)&&(null==i?void 0:i[e])||e;return o?d(o):o})(r(o)||e.getAttribute(`element-loading-${L(o)}`)),u=null!=(n=r("fullscreen"))?n:o.modifiers.fullscreen,c={text:a("text"),svg:a("svg"),svgViewBox:a("svgViewBox"),spinner:a("spinner"),background:a("background"),customClass:a("customClass"),fullscreen:u,target:null!=(t=r("target"))?t:u?void 0:e,body:null!=(s=r("body"))?s:o.modifiers.body,lock:null!=(l=r("lock"))?l:o.modifiers.lock};e[Y]={options:c,instance:Z(c)}},oe={mounted(e,o){o.value&&ee(e,o)},updated(e,o){const n=e[Y];o.oldValue!==o.value&&(o.value&&!o.oldValue?ee(e,o):o.value&&o.oldValue?$(o.value)&&((e,o)=>{for(const n of Object.keys(o))A(o[n])&&(o[n].value=e[n])})(o.value,n.options):null==n||n.instance.close())},unmounted(e){var o;null==(o=e[Y])||o.instance.close()}},ne={install(e){e.directive("loading",oe),e.config.globalProperties.$loading=Z},directive:oe,service:Z},te={name:"index",props:{value:{type:Array,default:()=>[]}},setup(e){const o=e;return(e,n)=>(O(),P("div",null,[V(o.value)?E(e.$slots,"default",{key:0}):E(e.$slots,"no-auth",{key:1})]))}};const se={key:0},le={key:1},ie=N("h3",null,"切换帐号",-1),re=N("h3",null,"帐号权限",-1),ae=N("h3",null,"鉴权组件（请对照代码查看）",-1),ue=R("你有 permission.browse 权限"),de=R("你没有 permission.browse 权限"),ce=R("你有 permission.create 权限"),pe=R("你没有 permission.create 权限"),me=R("你有 permission.browse 或 permission.create 权限"),be=R("你没有 permission.browse 或 permission.create 权限"),ve=R("你有 permission.browse 和 permission.create 权限"),ge=R("你没有 permission.browse 和 permission.create 权限"),fe=N("h3",null,"鉴权指令（请对照代码查看）",-1),ye=[R(" 如果你有 permission.browse 权限则能看到这句话 ")],xe=[R(" 如果你有 permission.create 权限则能看到这句话 ")],we=[R(" 如果你有 permission.browse 或 permission.create 权限则能看到这句话 ")],he=[R(" 如果你有 permission.browse 和 permission.create 权限则能看到这句话 ")],je=N("h3",null,"鉴权函数（请对照代码查看）",-1),ke=R("校验 permission.browse 权限"),_e=R("校验 permission.create 权限"),Ce=R("校验 permission.browse 或 permission.create 权限"),$e=R("校验 permission.browse 和 permission.create 权限"),Le={name:"index",setup(e){const{proxy:o}=z(),n=B(),t=T();function s(e){ne.service({lock:!0,text:"帐号切换中",background:"rgba(0, 0, 0, 0.7)"}),t.login({account:e,password:""}).then((()=>{setTimeout((()=>{location.reload()}),1e3)}))}function l(e){o.$auth(e)?q.success("校验通过"):q.error("校验不通过")}return(e,i)=>{const r=J,a=M,u=W,d=U,c=te,p=G,m=H,b=D,f=U,x=te;return O(),P("div",null,[y(b,null,{default:v((()=>[I(n).app.enablePermission?(O(),P("div",le,[ie,y(a,{modelValue:I(t).account,"onUpdate:modelValue":i[0]||(i[0]=e=>I(t).account=e),onChange:s},{default:v((()=>[y(r,{label:"admin"}),y(r,{label:"test"})])),_:1},8,["modelValue"]),re,N("div",null,S(I(t).permissions),1),ae,N("div",null,[y(d,{value:"permission.browse",style:{"margin-bottom":"10px"}},{"no-auth":v((()=>[y(u,{type:"danger"},{default:v((()=>[de])),_:1})])),default:v((()=>[y(u,null,{default:v((()=>[ue])),_:1})])),_:1}),y(d,{value:"permission.create",style:{"margin-bottom":"10px"}},{"no-auth":v((()=>[y(u,{type:"danger"},{default:v((()=>[pe])),_:1})])),default:v((()=>[y(u,null,{default:v((()=>[ce])),_:1})])),_:1}),y(d,{value:["permission.browse","permission.create"],style:{"margin-bottom":"10px"}},{"no-auth":v((()=>[y(u,{type:"danger"},{default:v((()=>[be])),_:1})])),default:v((()=>[y(u,null,{default:v((()=>[me])),_:1})])),_:1},8,["value"]),y(c,{value:["permission.browse","permission.create"]},{"no-auth":v((()=>[y(u,{type:"danger"},{default:v((()=>[ge])),_:1})])),default:v((()=>[y(u,null,{default:v((()=>[ve])),_:1})])),_:1},8,["value"])]),fe,N("div",null,[g((O(),P("div",null,ye)),[[f,"permission.browse"]]),g((O(),P("div",null,xe)),[[f,"permission.create"]]),g((O(),P("div",null,we)),[[f,["permission.browse","permission.create"]]]),g((O(),P("div",null,he)),[[x,["permission.browse","permission.create"]]])]),je,N("div",null,[y(m,{style:{display:"block","margin-bottom":"10px"}},{default:v((()=>[y(p,{onClick:i[1]||(i[1]=e=>l("permission.browse"))},{default:v((()=>[ke])),_:1}),y(p,{onClick:i[2]||(i[2]=e=>l("permission.create"))},{default:v((()=>[_e])),_:1})])),_:1}),y(m,null,{default:v((()=>[y(p,{onClick:i[3]||(i[3]=e=>l(["permission.browse","permission.create"]))},{default:v((()=>[Ce])),_:1}),y(p,{onClick:i[4]||(i[4]=e=>{return n=["permission.browse","permission.create"],void(o.$authAll(n)?q.success("校验通过"):q.error("校验不通过"));var n})},{default:v((()=>[$e])),_:1})])),_:1})])])):(O(),P("div",se,"请到 seeting.js 里打开权限功能，再进入该页面查看演示"))])),_:1})])}}};export{Le as default};
