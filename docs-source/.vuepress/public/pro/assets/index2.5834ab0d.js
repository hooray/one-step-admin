
/**
 * 由 One-step-admin 提供技术支持
 * Powered by One-step-admin
 * https://one-step-admin.netlify.app
 * 代码仓库
 * Gitee  https://gitee.com/hooray/one-step-admin
 * Github https://github.com/hooray/one-step-admin
 */
    
import{O as e,d as l,a2 as a,V as t,r as s,C as r,a3 as o,b0 as n,aj as i,a0 as u,av as c,n as v,i as m,w as d,g as f,h as p,e as h,$ as b,aa as y,ac as g,aA as w,c as S,b as z,G as x,P as k,ak as T,a8 as H,W as E,a5 as L,A as $,X,Y,o as B,a4 as C,aw as W,H as _,ab as j,j as A,ad as N}from"./index.0a5e3bc2.js";import{t as R}from"./error2.1d524120.js";const M=Symbol("scrollbarContextKey"),O={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},P=e({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),K=l({name:"Thumb",props:P,setup(e){const l=a(M),u=t("scrollbar");l||R("Thumb","can not inject scrollbar context");const v=s(),m=s(),d=s({}),f=s(!1);let p=!1,h=!1,b=c?document.onselectstart:null;const y=r((()=>O[e.vertical?"vertical":"horizontal"])),g=r((()=>(({move:e,size:l,bar:a})=>({[a.size]:l,transform:`translate${a.axis}(${e}%)`}))({size:e.size,move:e.move,bar:y.value}))),w=r((()=>v.value[y.value.offset]**2/l.wrapElement[y.value.scrollSize]/e.ratio/m.value[y.value.offset])),S=e=>{e.stopImmediatePropagation(),p=!0,document.addEventListener("mousemove",z),document.addEventListener("mouseup",x),b=document.onselectstart,document.onselectstart=()=>!1},z=e=>{if(!v.value||!m.value)return;if(!1===p)return;const a=d.value[y.value.axis];if(!a)return;const t=100*(-1*(v.value.getBoundingClientRect()[y.value.direction]-e[y.value.client])-(m.value[y.value.offset]-a))*w.value/v.value[y.value.offset];l.wrapElement[y.value.scroll]=t*l.wrapElement[y.value.scrollSize]/100},x=()=>{p=!1,d.value[y.value.axis]=0,document.removeEventListener("mousemove",z),document.removeEventListener("mouseup",x),k(),h&&(f.value=!1)};o((()=>{k(),document.removeEventListener("mouseup",x)}));const k=()=>{document.onselectstart!==b&&(document.onselectstart=b)};return n(i(l,"scrollbarElement"),"mousemove",(()=>{h=!1,f.value=!!e.size})),n(i(l,"scrollbarElement"),"mouseleave",(()=>{h=!0,f.value=p})),{ns:u,instance:v,thumb:m,bar:y,thumbStyle:g,visible:f,clickTrackHandler:e=>{if(!m.value||!v.value||!l.wrapElement)return;const a=100*(Math.abs(e.target.getBoundingClientRect()[y.value.direction]-e[y.value.client])-m.value[y.value.offset]/2)*w.value/v.value[y.value.offset];l.wrapElement[y.value.scroll]=a*l.wrapElement[y.value.scrollSize]/100},clickThumbHandler:e=>{var l;if(e.stopPropagation(),e.ctrlKey||[1,2].includes(e.button))return;null==(l=window.getSelection())||l.removeAllRanges(),S(e);const a=e.currentTarget;a&&(d.value[y.value.axis]=a[y.value.offset]-(e[y.value.client]-a.getBoundingClientRect()[y.value.direction]))}}}});const q=l({components:{Thumb:u(K,[["render",function(e,l,a,t,s,r){return v(),m(g,{name:e.ns.b("fade")},{default:d((()=>[f(h("div",{ref:"instance",class:b([e.ns.e("bar"),e.ns.is(e.bar.key)]),onMousedown:l[1]||(l[1]=(...l)=>e.clickTrackHandler&&e.clickTrackHandler(...l))},[h("div",{ref:"thumb",class:b(e.ns.e("thumb")),style:y(e.thumbStyle),onMousedown:l[0]||(l[0]=(...l)=>e.clickThumbHandler&&e.clickThumbHandler(...l))},null,38)],34),[[p,e.always||e.visible]])])),_:1},8,["name"])}],["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]])},props:e({always:{type:Boolean,default:!0},width:{type:String,default:""},height:{type:String,default:""},ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),setup(e){const l=s(0),a=s(0);return{handleScroll:t=>{if(t){const s=t.offsetHeight-4,r=t.offsetWidth-4;a.value=100*t.scrollTop/s*e.ratioY,l.value=100*t.scrollLeft/r*e.ratioX}},moveX:l,moveY:a}}});const G=N(u(l({name:"ElScrollbar",components:{Bar:u(q,[["render",function(e,l,a,t,s,r){const o=w("thumb");return v(),S(x,null,[z(o,{move:e.moveX,ratio:e.ratioX,size:e.width,always:e.always},null,8,["move","ratio","size","always"]),z(o,{move:e.moveY,ratio:e.ratioY,size:e.height,vertical:"",always:e.always},null,8,["move","ratio","size","always"])],64)}],["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]])},props:e({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:k([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:{type:Boolean,default:!1},minSize:{type:Number,default:20}}),emits:{scroll:({scrollTop:e,scrollLeft:l})=>T(e)&&T(l)},setup(e,{emit:l}){const a=t("scrollbar");let o,i;const u=s(),c=s(),v=s(),m=s("0"),d=s("0"),f=s(),p=s(0),h=s(0),b=s(1),y=s(1),g=r((()=>{const l={};return e.height&&(l.height=H(e.height)),e.maxHeight&&(l.maxHeight=H(e.maxHeight)),[e.wrapStyle,l]}));const w=()=>{if(!c.value)return;const l=c.value.offsetHeight-4,a=c.value.offsetWidth-4,t=l**2/c.value.scrollHeight,s=a**2/c.value.scrollWidth,r=Math.max(t,e.minSize),o=Math.max(s,e.minSize);b.value=t/(l-t)/(r/(l-r)),y.value=s/(a-s)/(o/(a-o)),d.value=r+4<l?`${r}px`:"",m.value=o+4<a?`${o}px`:""};return E((()=>e.noresize),(e=>{e?(null==o||o(),null==i||i()):(({stop:o}=L(v,w)),i=n("resize",w))}),{immediate:!0}),E((()=>[e.maxHeight,e.height]),(()=>{e.native||$((()=>{var e;w(),c.value&&(null==(e=f.value)||e.handleScroll(c.value))}))})),X(M,Y({scrollbarElement:u,wrapElement:c})),B((()=>{e.native||$((()=>w()))})),C((()=>w())),{ns:a,scrollbar$:u,wrap$:c,resize$:v,barRef:f,moveX:p,moveY:h,ratioX:y,ratioY:b,sizeWidth:m,sizeHeight:d,style:g,update:w,handleScroll:()=>{var e;c.value&&(null==(e=f.value)||e.handleScroll(c.value),l("scroll",{scrollTop:c.value.scrollTop,scrollLeft:c.value.scrollLeft}))},scrollTo:function(e,l){W(e)?c.value.scrollTo(e):T(e)&&T(l)&&c.value.scrollTo(e,l)},setScrollTop:e=>{T(e)&&(c.value.scrollTop=e)},setScrollLeft:e=>{T(e)&&(c.value.scrollLeft=e)}}}}),[["render",function(e,l,a,t,s,r){const o=w("bar");return v(),S("div",{ref:"scrollbar$",class:b(e.ns.b())},[h("div",{ref:"wrap$",class:b([e.wrapClass,e.ns.e("wrap"),{[e.ns.em("wrap","hidden-default")]:!e.native}]),style:y(e.style),onScroll:l[0]||(l[0]=(...l)=>e.handleScroll&&e.handleScroll(...l))},[(v(),m(j(e.tag),{ref:"resize$",class:b([e.ns.e("view"),e.viewClass]),style:y(e.viewStyle)},{default:d((()=>[_(e.$slots,"default")])),_:3},8,["class","style"]))],38),e.native?A("v-if",!0):(v(),m(o,{key:0,ref:"barRef",height:e.sizeHeight,width:e.sizeWidth,always:e.always,"ratio-x":e.ratioX,"ratio-y":e.ratioY},null,8,["height","width","always","ratio-x","ratio-y"]))],2)}],["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]));export{G as E};
