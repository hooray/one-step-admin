
/**
 * 由 One-step-admin 提供技术支持
 * https://hooray.gitee.io/one-step-admin/
 * Powered by One-step-admin
 * https://hooray.github.io/one-step-admin/
 */
    
var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,n=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l;import{_ as r}from"./index.9c1fa942.js";import{I as i,M as p,aG as u,X as c,av as d,d as f,J as m,ap as v,r as g,C as b,W as h,aM as y,o as x,n as j,i as $,w,f as A,e as _,h as k,c as S,E as B,a1 as C,af as E,F,H as M,y as O,t as T,G as I,ab as V,aC as K,as as U,q as P,x as R,bb as L,a2 as W,z as q,bq as N,L as z,_ as H,j as G}from"./index.05e4ed9f.js";import{E as D}from"./el-input.93d8033e.js";/* empty css                     */import{b as J,g as X,E as Q}from"./el-popper.f565a276.js";/* empty css                */import{_ as Y}from"./index.dd2c42e8.js";import{E as Z}from"./index.80697eb7.js";import{U as ee}from"./event.e7ca8317.js";import{u as te}from"./deprecation.ea6afa68.js";import{u as ae}from"./index.bebbe66d.js";import{t as le}from"./error.76088f19.js";import{d as oe}from"./debounce.c94dc814.js";import"./index.48c8fc0e.js";import"./typescript.14beffb5.js";import"./index.aa8c6f3e.js";import"./isNil.aac33454.js";import"./event.bca3aed8.js";import"./index.a6330198.js";const se=i({valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:p(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:p([Function,Array]),default:u},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},popperAppendToBody:{type:Boolean,default:void 0},teleported:J.teleported,highlightFirstItem:{type:Boolean,default:!1}}),ne={[ee]:e=>c(e),input:e=>c(e),change:e=>c(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,select:e=>d(e)},re=["aria-expanded","aria-owns"],ie={key:0},pe=["id","aria-selected","onClick"],ue=f((ce=((e,t)=>{for(var a in t||(t={}))o.call(t,a)&&n(e,a,t[a]);if(l)for(var a of l(t))s.call(t,a)&&n(e,a,t[a]);return e})({},{name:"ElAutocomplete",inheritAttrs:!1}),t(ce,a({props:se,emits:ne,setup(e,{expose:t,emit:a}){const l=e,o="ElAutocomplete",s=m("autocomplete"),{compatTeleported:n}=te(o,"popperAppendToBody");let r=!1;const i=ae(),p=v(),u=g([]),c=g(-1),d=g(""),f=g(!1),W=g(!1),z=g(!1),H=g(),G=g(),J=g(),Y=g(),se=b((()=>s.b(String(X())))),ne=b((()=>p.style)),ue=b((()=>(h(u.value)&&u.value.length>0||z.value)&&f.value)),ce=b((()=>!l.hideLoading&&z.value)),de=()=>{q((()=>{ue.value&&(d.value=`${H.value.$el.offsetWidth}px`)}))},fe=oe((e=>{if(W.value)return;z.value=!0;const t=e=>{z.value=!1,W.value||(h(e)?(u.value=e,c.value=l.highlightFirstItem?0:-1):le(o,"autocomplete suggestions must be an array"))};if(h(l.fetchSuggestions))t(l.fetchSuggestions);else{const a=l.fetchSuggestions(e,t);h(a)?t(a):N(a)&&a.then(t)}}),l.debounce),me=e=>{const t=Boolean(e);if(a("input",e),a(ee,e),W.value=!1,f.value||(f.value=r&&t),!l.triggerOnFocus&&!e)return W.value=!0,void(u.value=[]);r&&t&&(r=!1),fe(e)},ve=e=>{a("change",e)},ge=e=>{f.value=!0,a("focus",e),l.triggerOnFocus&&fe(String(l.modelValue))},be=e=>{a("blur",e)},he=()=>{f.value=!1,r=!0,a(ee,""),a("clear")},ye=()=>{ue.value&&c.value>=0&&c.value<u.value.length?je(u.value[c.value]):l.selectWhenUnmatched&&(a("select",{value:l.modelValue}),q((()=>{u.value=[],c.value=-1})))},xe=()=>{f.value=!1},je=e=>{a("input",e[l.valueKey]),a(ee,e[l.valueKey]),a("select",e),q((()=>{u.value=[],c.value=-1}))},$e=e=>{if(!ue.value||z.value)return;if(e<0)return void(c.value=-1);e>=u.value.length&&(e=u.value.length-1);const t=G.value.querySelector(`.${s.be("suggestion","wrap")}`),a=t.querySelectorAll(`.${s.be("suggestion","list")} li`)[e],l=t.scrollTop,{offsetTop:o,scrollHeight:n}=a;o+n>l+t.clientHeight&&(t.scrollTop+=n),o<l&&(t.scrollTop-=n),c.value=e,H.value.ref.setAttribute("aria-activedescendant",`${se.value}-item-${c.value}`)};return y(Y,xe),x((()=>{H.value.ref.setAttribute("role","textbox"),H.value.ref.setAttribute("aria-autocomplete","list"),H.value.ref.setAttribute("aria-controls","id"),H.value.ref.setAttribute("aria-activedescendant",`${se.value}-item-${c.value}`)})),t({highlightedIndex:c,activated:f,loading:z,inputRef:H,popperRef:J,suggestions:u,handleSelect:je,handleKeyEnter:ye,focus:()=>{var e;null==(e=H.value)||e.focus()},close:xe,highlight:$e}),(e,t)=>(j(),$(k(Q),{ref_key:"popperRef",ref:J,visible:k(ue),"onUpdate:visible":t[2]||(t[2]=e=>L(ue)?ue.value=e:null),placement:e.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[k(s).e("popper"),e.popperClass],teleported:k(n),"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${k(s).namespace.value}-zoom-in-top`,persistent:"",onBeforeShow:de},{content:w((()=>[A("div",{ref_key:"regionRef",ref:G,class:C([k(s).b("suggestion"),k(s).is("loading",k(ce))]),style:V({minWidth:d.value,outline:"none"}),role:"region"},[_(k(Z),{id:k(se),tag:"ul","wrap-class":k(s).be("suggestion","wrap"),"view-class":k(s).be("suggestion","list"),role:"listbox"},{default:w((()=>[k(ce)?(j(),S("li",ie,[_(k(B),{class:C(k(s).is("loading"))},{default:w((()=>[_(k(E))])),_:1},8,["class"])])):(j(!0),S(I,{key:1},F(u.value,((t,a)=>(j(),S("li",{id:`${k(se)}-item-${a}`,key:a,class:C({highlighted:c.value===a}),role:"option","aria-selected":c.value===a,onClick:e=>je(t)},[M(e.$slots,"default",{item:t},(()=>[O(T(t[e.valueKey]),1)]))],10,pe)))),128))])),_:3},8,["id","wrap-class","view-class"])],6)])),default:w((()=>[A("div",{ref_key:"listboxRef",ref:Y,class:C([k(s).b(),e.$attrs.class]),style:V(k(ne)),role:"combobox","aria-haspopup":"listbox","aria-expanded":k(ue),"aria-owns":k(se)},[_(k(D),U({ref_key:"inputRef",ref:H},k(i),{"model-value":e.modelValue,onInput:me,onChange:ve,onFocus:ge,onBlur:be,onClear:he,onKeydown:[t[0]||(t[0]=P(R((e=>$e(c.value-1)),["prevent"]),["up"])),t[1]||(t[1]=P(R((e=>$e(c.value+1)),["prevent"]),["down"])),P(ye,["enter"]),P(xe,["tab"])]}),K({_:2},[e.$slots.prepend?{name:"prepend",fn:w((()=>[M(e.$slots,"prepend")]))}:void 0,e.$slots.append?{name:"append",fn:w((()=>[M(e.$slots,"append")]))}:void 0,e.$slots.prefix?{name:"prefix",fn:w((()=>[M(e.$slots,"prefix")]))}:void 0,e.$slots.suffix?{name:"suffix",fn:w((()=>[M(e.$slots,"suffix")]))}:void 0]),1040,["model-value","onKeydown"])],14,re)])),_:3},8,["visible","placement","popper-class","teleported","transition"]))}}))));var ce;const de=z(W(ue,[["__file","/home/runner/work/element-plus/element-plus/packages/components/autocomplete/src/autocomplete.vue"]]));const fe={class:"map"},me={class:"search-name"},ve=["title"];var ge=H({props:{v:{type:String,default:"1.4.15"},appkey:{type:String,default:""},height:{type:[Number,String],default:500},lnglat:{type:Array,default:()=>[]}},emits:["update:lnglat"],setup(e,{emit:t}){const a=e,l=g("");let o="",s="",n="";const r=b((()=>"string"==typeof a.height?a.height:`${a.height}px`));function i(){o=new AMap.Map("amap",{zoom:12}),AMap.plugin("AMap.ToolBar",(()=>{let e=new AMap.ToolBar;o.addControl(e)})),s=new AMap.Marker({draggable:!0,cursor:"move"}),s.on("dragend",(e=>{t("update:lnglat",[e.lnglat.lng,e.lnglat.lat])})),n=new AMap.Autocomplete,o.on("click",(e=>{p(e.lnglat.getLng(),e.lnglat.getLat())})),2==a.lnglat.length&&p(a.lnglat[0],a.lnglat[1])}function p(e,a){o.remove(s),s.setPosition([e,a]),o.add(s),o.setFitView(),t("update:lnglat",[e,a])}function u(e,t){n.search(e,((e,a)=>{t(a.tips)}))}function c(e){l.value=e.name,e.location?p(e.location.lng,e.location.lat):o.setCity(e.adcode)}return x((()=>{if("undefined"==typeof AMap){let e=document.createElement("script");e.charset="UTF-8",e.src=`https://webapi.amap.com/maps?v=${a.v}&key=${a.appkey}&plugin=AMap.Autocomplete`,document.head.appendChild(e),e.onload=()=>{i()}}else q((()=>{i()}))})),(e,t)=>{const a=Y,o=B,s=de;return j(),S("div",fe,[_(s,{modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=e=>l.value=e),class:"search","fetch-suggestions":u,"trigger-on-focus":!1,clearable:"",placeholder:"请输入地址关键字",onSelect:c},{prefix:w((()=>[_(o,{class:"el-input__icon"},{default:w((()=>[_(a,{name:"ep:location-information"})])),_:1})])),default:w((({item:e})=>[A("div",me,T(e.name),1),A("span",{class:"search-address",title:e.district+e.address},T(e.district+e.address),9,ve)])),_:1},8,["modelValue"]),A("div",{id:"amap",style:V(`height:${k(r)};`)},null,4)])}}},[["__scopeId","data-v-ebf792bc"]]);var be=H({name:"ComponentExampleAmap",props:{},data:()=>({lnglat:[120.068384,30.290939]}),created(){},mounted(){},methods:{}},[["render",function(e,t,a,l,o,s){const n=ge,i=r;return j(),S("div",null,[_(i,null,{default:w((()=>[A("div",null,"经纬度："+T(o.lnglat),1),G(" 注意这里替换高德地图的appkey "),_(n,{lnglat:o.lnglat,"onUpdate:lnglat":t[0]||(t[0]=e=>o.lnglat=e),appkey:"8f7844cc502e17bb549c04c9aaadaf94",height:600},null,8,["lnglat"])])),_:1})])}],["__scopeId","data-v-755ff3c4"]]);export{be as default};
