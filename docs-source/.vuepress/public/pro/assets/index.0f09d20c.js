
/**
 * 由 One-step-admin 提供技术支持
 * https://hooray.gitee.io/one-step-admin/
 * Powered by One-step-admin
 * https://hooray.github.io/one-step-admin/
 */
    
var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,n=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l;import{_ as r}from"./index.e4264495.js";import{I as i,M as p,aF as u,X as c,av as d,d as f,J as m,ap as v,r as g,C as h,W as b,aL as y,f as x,o as w,j,w as A,a as $,g as k,i as _,c as S,E as M,a1 as C,af as B,F,H as E,y as O,t as T,G as z,ab as I,aB as V,as as K,q as R,x as U,ba as q,a2 as L,z as P,bq as W,L as H,_ as N,k as D}from"./index.b046d3e8.js";import{E as G}from"./el-input.33bb8256.js";/* empty css                     */import{b as J,g as X,E as Y}from"./el-popper.f248985f.js";/* empty css                */import{E as Q}from"./index.56c2243e.js";import{U as Z}from"./event.e7ca8317.js";import{u as ee}from"./deprecation.56e2aeee.js";import{u as te}from"./index.b8b1886a.js";import{t as ae}from"./error.76088f19.js";import{d as le}from"./debounce.b773226e.js";import"./index.2b0c4341.js";import"./typescript.14beffb5.js";import"./index.16ef6f7e.js";import"./isNil.aac33454.js";import"./event.bca3aed8.js";import"./index.a16a43f7.js";const oe=i({valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:p(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:p([Function,Array]),default:u},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},popperAppendToBody:{type:Boolean,default:void 0},teleported:J.teleported,highlightFirstItem:{type:Boolean,default:!1}}),se={[Z]:e=>c(e),input:e=>c(e),change:e=>c(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,select:e=>d(e)},ne=["aria-expanded","aria-owns"],re={key:0},ie=["id","aria-selected","onClick"],pe=f((ue=((e,t)=>{for(var a in t||(t={}))o.call(t,a)&&n(e,a,t[a]);if(l)for(var a of l(t))s.call(t,a)&&n(e,a,t[a]);return e})({},{name:"ElAutocomplete",inheritAttrs:!1}),t(ue,a({props:oe,emits:se,setup(e,{expose:t,emit:a}){const l=e,o="ElAutocomplete",s=m("autocomplete"),{compatTeleported:n}=ee(o,"popperAppendToBody");let r=!1;const i=te(),p=v(),u=g([]),c=g(-1),d=g(""),f=g(!1),L=g(!1),H=g(!1),N=g(),D=g(),J=g(),oe=g(),se=h((()=>s.b(String(X())))),pe=h((()=>p.style)),ue=h((()=>(b(u.value)&&u.value.length>0||H.value)&&f.value)),ce=h((()=>!l.hideLoading&&H.value)),de=()=>{P((()=>{ue.value&&(d.value=`${N.value.$el.offsetWidth}px`)}))},fe=le((e=>{if(L.value)return;H.value=!0;const t=e=>{H.value=!1,L.value||(b(e)?(u.value=e,c.value=l.highlightFirstItem?0:-1):ae(o,"autocomplete suggestions must be an array"))};if(b(l.fetchSuggestions))t(l.fetchSuggestions);else{const a=l.fetchSuggestions(e,t);b(a)?t(a):W(a)&&a.then(t)}}),l.debounce),me=e=>{const t=Boolean(e);if(a("input",e),a(Z,e),L.value=!1,f.value||(f.value=r&&t),!l.triggerOnFocus&&!e)return L.value=!0,void(u.value=[]);r&&t&&(r=!1),fe(e)},ve=e=>{a("change",e)},ge=e=>{f.value=!0,a("focus",e),l.triggerOnFocus&&fe(String(l.modelValue))},he=e=>{a("blur",e)},be=()=>{f.value=!1,r=!0,a(Z,""),a("clear")},ye=()=>{ue.value&&c.value>=0&&c.value<u.value.length?we(u.value[c.value]):l.selectWhenUnmatched&&(a("select",{value:l.modelValue}),P((()=>{u.value=[],c.value=-1})))},xe=()=>{f.value=!1},we=e=>{a("input",e[l.valueKey]),a(Z,e[l.valueKey]),a("select",e),P((()=>{u.value=[],c.value=-1}))},je=e=>{if(!ue.value||H.value)return;if(e<0)return void(c.value=-1);e>=u.value.length&&(e=u.value.length-1);const t=D.value.querySelector(`.${s.be("suggestion","wrap")}`),a=t.querySelectorAll(`.${s.be("suggestion","list")} li`)[e],l=t.scrollTop,{offsetTop:o,scrollHeight:n}=a;o+n>l+t.clientHeight&&(t.scrollTop+=n),o<l&&(t.scrollTop-=n),c.value=e,N.value.ref.setAttribute("aria-activedescendant",`${se.value}-item-${c.value}`)};return y(oe,xe),x((()=>{N.value.ref.setAttribute("role","textbox"),N.value.ref.setAttribute("aria-autocomplete","list"),N.value.ref.setAttribute("aria-controls","id"),N.value.ref.setAttribute("aria-activedescendant",`${se.value}-item-${c.value}`)})),t({highlightedIndex:c,activated:f,loading:H,inputRef:N,popperRef:J,suggestions:u,handleSelect:we,handleKeyEnter:ye,focus:()=>{var e;null==(e=N.value)||e.focus()},close:xe,highlight:je}),(e,t)=>(w(),j(_(Y),{ref_key:"popperRef",ref:J,visible:_(ue),"onUpdate:visible":t[2]||(t[2]=e=>q(ue)?ue.value=e:null),placement:e.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[_(s).e("popper"),e.popperClass],teleported:_(n),"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${_(s).namespace.value}-zoom-in-top`,persistent:"",onBeforeShow:de},{content:A((()=>[$("div",{ref_key:"regionRef",ref:D,class:C([_(s).b("suggestion"),_(s).is("loading",_(ce))]),style:I({minWidth:d.value,outline:"none"}),role:"region"},[k(_(Q),{id:_(se),tag:"ul","wrap-class":_(s).be("suggestion","wrap"),"view-class":_(s).be("suggestion","list"),role:"listbox"},{default:A((()=>[_(ce)?(w(),S("li",re,[k(_(M),{class:C(_(s).is("loading"))},{default:A((()=>[k(_(B))])),_:1},8,["class"])])):(w(!0),S(z,{key:1},F(u.value,((t,a)=>(w(),S("li",{id:`${_(se)}-item-${a}`,key:a,class:C({highlighted:c.value===a}),role:"option","aria-selected":c.value===a,onClick:e=>we(t)},[E(e.$slots,"default",{item:t},(()=>[O(T(t[e.valueKey]),1)]))],10,ie)))),128))])),_:3},8,["id","wrap-class","view-class"])],6)])),default:A((()=>[$("div",{ref_key:"listboxRef",ref:oe,class:C([_(s).b(),e.$attrs.class]),style:I(_(pe)),role:"combobox","aria-haspopup":"listbox","aria-expanded":_(ue),"aria-owns":_(se)},[k(_(G),K({ref_key:"inputRef",ref:N},_(i),{"model-value":e.modelValue,onInput:me,onChange:ve,onFocus:ge,onBlur:he,onClear:be,onKeydown:[t[0]||(t[0]=R(U((e=>je(c.value-1)),["prevent"]),["up"])),t[1]||(t[1]=R(U((e=>je(c.value+1)),["prevent"]),["down"])),R(ye,["enter"]),R(xe,["tab"])]}),V({_:2},[e.$slots.prepend?{name:"prepend",fn:A((()=>[E(e.$slots,"prepend")]))}:void 0,e.$slots.append?{name:"append",fn:A((()=>[E(e.$slots,"append")]))}:void 0,e.$slots.prefix?{name:"prefix",fn:A((()=>[E(e.$slots,"prefix")]))}:void 0,e.$slots.suffix?{name:"suffix",fn:A((()=>[E(e.$slots,"suffix")]))}:void 0]),1040,["model-value","onKeydown"])],14,ne)])),_:3},8,["visible","placement","popper-class","teleported","transition"]))}}))));var ue;const ce=H(L(pe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/autocomplete/src/autocomplete.vue"]]));const de={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},fe=[$("path",{fill:"currentColor",d:"M288 896h448q32 0 32 32t-32 32H288q-32 0-32-32t32-32z"},null,-1),$("path",{fill:"currentColor",d:"M800 416a288 288 0 1 0-576 0c0 118.144 94.528 272.128 288 456.576C705.472 688.128 800 534.144 800 416zM512 960C277.312 746.688 160 565.312 160 416a352 352 0 0 1 704 0c0 149.312-117.312 330.688-352 544z"},null,-1),$("path",{fill:"currentColor",d:"M512 512a96 96 0 1 0 0-192a96 96 0 0 0 0 192zm0 64a160 160 0 1 1 0-320a160 160 0 0 1 0 320z"},null,-1)];var me={name:"ep-location-information",render:function(e,t){return w(),S("svg",de,fe)}};const ve={class:"map"},ge={class:"search-name"},he=["title"];var be=N({props:{v:{type:String,default:"1.4.15"},appkey:{type:String,default:""},height:{type:[Number,String],default:500},lnglat:{type:Array,default:()=>[]}},emits:["update:lnglat"],setup(e,{emit:t}){const a=e,l=g("");let o="",s="",n="";const r=h((()=>"string"==typeof a.height?a.height:`${a.height}px`));function i(){o=new AMap.Map("amap",{zoom:12}),AMap.plugin("AMap.ToolBar",(()=>{let e=new AMap.ToolBar;o.addControl(e)})),s=new AMap.Marker({draggable:!0,cursor:"move"}),s.on("dragend",(e=>{t("update:lnglat",[e.lnglat.lng,e.lnglat.lat])})),n=new AMap.Autocomplete,o.on("click",(e=>{p(e.lnglat.getLng(),e.lnglat.getLat())})),2==a.lnglat.length&&p(a.lnglat[0],a.lnglat[1])}function p(e,a){o.remove(s),s.setPosition([e,a]),o.add(s),o.setFitView(),t("update:lnglat",[e,a])}function u(e,t){n.search(e,((e,a)=>{t(a.tips)}))}function c(e){l.value=e.name,e.location?p(e.location.lng,e.location.lat):o.setCity(e.adcode)}return x((()=>{if("undefined"==typeof AMap){let e=document.createElement("script");e.charset="UTF-8",e.src=`https://webapi.amap.com/maps?v=${a.v}&key=${a.appkey}&plugin=AMap.Autocomplete`,document.head.appendChild(e),e.onload=()=>{i()}}else P((()=>{i()}))})),(e,t)=>{const a=me,o=M,s=ce;return w(),S("div",ve,[k(s,{modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=e=>l.value=e),class:"search","fetch-suggestions":u,"trigger-on-focus":!1,clearable:"",placeholder:"请输入地址关键字",onSelect:c},{prefix:A((()=>[k(o,{class:"el-input__icon"},{default:A((()=>[k(a)])),_:1})])),default:A((({item:e})=>[$("div",ge,T(e.name),1),$("span",{class:"search-address",title:e.district+e.address},T(e.district+e.address),9,he)])),_:1},8,["modelValue"]),$("div",{id:"amap",style:I(`height:${_(r)};`)},null,4)])}}},[["__scopeId","data-v-7eb8b0f2"]]);var ye=N({name:"ComponentExampleAmap",props:{},data:()=>({lnglat:[120.068384,30.290939]}),created(){},mounted(){},methods:{}},[["render",function(e,t,a,l,o,s){const n=be,i=r;return w(),S("div",null,[k(i,null,{default:A((()=>[$("div",null,"经纬度："+T(o.lnglat),1),D(" 注意这里替换高德地图的appkey "),k(n,{lnglat:o.lnglat,"onUpdate:lnglat":t[0]||(t[0]=e=>o.lnglat=e),appkey:"8f7844cc502e17bb549c04c9aaadaf94",height:600},null,8,["lnglat"])])),_:1})])}],["__scopeId","data-v-755ff3c4"]]);export{ye as default};
