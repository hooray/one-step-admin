
/**
 * 由 One-step-admin 提供技术支持
 * https://hooray.gitee.io/one-step-admin/
 * Powered by One-step-admin
 * https://hooray.github.io/one-step-admin/
 */
    
import{_ as t}from"./index.d92f6c0c.js";import{aq as e,r as o,S as l,o as a,k as r,T as s,U as i,B as n,Y as u,m as p,C as d,A as c,x as f}from"./vendor.b0dde714.js";import{_ as v}from"./index.091d1180.js";import{_ as h}from"./index.c2d6d7be.js";function m(t,e,o,l){return parseFloat((e-l*e/t+o).toFixed(2))}function x(t){return t.value}function b(t,e){const o=document.createElementNS("http://www.w3.org/2000/svg",t);for(let l in e)o.setAttribute(l,e[l]);return o}const k={class:"sparkline"},y=["width","height","stroke-width","stroke","fill"];var w=v({props:{value:{type:Array,require:!0},width:{type:Number,default:100},height:{type:Number,default:30},strokeWidth:{type:Number,default:3},strokeColor:{type:String,default:"#dc2b33"},fillColor:{type:String,default:"transparent"},cursorColor:{type:String,default:"#dc2b33"},spotColor:{type:String,default:"#dc2b33"},tooltip:{type:Boolean,default:!1}},setup(t){const c=t;e((e=>({c913f086:t.cursorColor,"5df51191":t.spotColor})));const{proxy:f}=d(),v=o({show:!1,content:"",top:0,left:0});return l((()=>{!function(t,e,o){if(function(t){[...t.querySelectorAll("*")].forEach((e=>t.removeChild(e)))}(t),e.length<=1)return;o=o||{},"number"==typeof e[0]&&(e=e.map((t=>({value:t}))));const l=o.onmousemove,a=o.onmouseout,r="interactive"in o?o.interactive:!!l,s=o.spotRadius||2,i=2*s,n=o.cursorWidth||2,u=parseFloat(t.attributes["stroke-width"].value),p=o.fetch||x,d=e.map((t=>p(t))),c=parseFloat(t.attributes.width.value)-2*i,f=parseFloat(t.attributes.height.value),v=f-2*u-i,h=Math.max(...d),k=-1e3,y=d.length-1,w=c/y,g=[],C=m(h,v,u+s,d[0]);let A=`M${i} ${C}`;d.forEach(((t,o)=>{const l=o*w+i,a=m(h,v,u+s,t);g.push(Object.assign({},e[o],{index:o,x:l,y:a})),A+=` L ${l} ${a}`}));const $=b("path",{class:"sparkline--line",d:A,fill:"none"}),S=b("path",{class:"sparkline--fill",d:`${A} V ${f} L ${i} ${f} Z`,stroke:"none"});if(t.appendChild(S),t.appendChild($),!r)return;const _=b("line",{class:"sparkline--cursor",x1:k,x2:k,y1:0,y2:f,"stroke-width":n}),j=b("circle",{class:"sparkline--spot",cx:k,cy:k,r:s});t.appendChild(_),t.appendChild(j);const E=b("rect",{width:t.attributes.width.value,height:t.attributes.height.value,style:"fill: transparent; stroke: transparent",class:"sparkline--interaction-layer"});t.appendChild(E),E.addEventListener("mouseout",(t=>{_.setAttribute("x1",k),_.setAttribute("x2",k),j.setAttribute("cx",k),a&&a(t)})),E.addEventListener("mousemove",(t=>{const e=t.offsetX;let o=g.find((t=>t.x>=e));o||(o=g[y]);let a,r,s=g[g.indexOf(o)-1];s?(r=s.x+(o.x-s.x)/2,a=e>=r?o:s):a=o;const i=a.x,n=a.y;j.setAttribute("cx",i),j.setAttribute("cy",n),_.setAttribute("x1",i),_.setAttribute("x2",i),l&&l(t,a)}))}(f.$refs.sparklineRef,c.value,c.tooltip&&{onmousemove:(t,e)=>{v.value.show=!0,v.value.content=e.tooltip,v.value.top=t.offsetY,v.value.left=t.offsetX+20},onmouseout:()=>{v.value.show=!1}})})),(e,o)=>(a(),r("div",k,[(a(),r("svg",{ref:"sparklineRef",width:t.width,height:t.height,"stroke-width":t.strokeWidth,stroke:t.strokeColor,fill:t.fillColor},null,8,y)),t.tooltip?s((a(),r("span",{key:0,class:"tooltip",style:n([`left: ${v.value.left}px`,`top: ${v.value.top}px`])},u(v.value.content),5)),[[i,v.value.show]]):p("v-if",!0)]))}},[["__scopeId","data-v-6ee43c5a"]]);var g=v({data:()=>({value1:[1,5,2,4,8,3,7],value2:[{tooltip:"值：1",value:1},{tooltip:"值：3",value:3},{tooltip:"值：5",value:5},{tooltip:"值：8",value:8},{tooltip:"值：4",value:4},{tooltip:"值：6",value:6},{tooltip:"值：9",value:9}]})},[["render",function(e,o,l,s,i,n){const u=h,p=w,d=t;return a(),r("div",null,[c(u,{title:"迷你图",content:"Sparkline"}),c(d,null,{default:f((()=>[c(p,{value:i.value1},null,8,["value"]),c(p,{value:i.value1,"stroke-color":"#409eff","fill-color":"#b3d8ff"},null,8,["value"]),c(p,{value:i.value2,tooltip:""},null,8,["value"]),c(p,{value:i.value2,tooltip:"","stroke-color":"#409eff","fill-color":"#b3d8ff","cursor-color":"#e6a23c","spot-color":"#909399"},null,8,["value"])])),_:1})])}]]);export{g as default};
